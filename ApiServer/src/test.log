[newBConfig] SessionOn: false
[ORM]2017/05/14 16:37:51 unsupport orm tag not null
2017/05/14 16:37:51 [1;34m[D] root:root@tcp(localhost:3306)/rtdb?charset=utf8 [0m
table `tbl_user` already exists, skip
table `tbl_user_group` already exists, skip
table `tbl_user_group_member` already exists, skip
table `tbl_property` already exists, skip
table `tbl_house` already exists, skip
table `tbl_rental` already exists, skip
table `tbl_tag` already exists, skip
table `tbl_house_tag` already exists, skip
table `tbl_house_recommend` already exists, skip
table `tbl_deliverables` already exists, skip
table `tbl_house_deliverable` already exists, skip
table `tbl_house_cert` already exists, skip
table `tbl_facility_type` already exists, skip
table `tbl_facilitys` already exists, skip
table `tbl_house_facility` already exists, skip
table `tbl_house_event` already exists, skip
table `tbl_house_event_process` already exists, skip
table `tbl_pictures` already exists, skip
table `tbl_pic_set` already exists, skip
table `tbl_sms_code` already exists, skip
=== RUN   Test_GetHouseDeliverableList
2017/05/14 16:37:51 [1;34m[D] [GetHouseDeliverableList]  uid: -1 , hid 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT h.deliverable AS id, d.name, h.qty, h.desc
							FROM tbl_house_deliverable AS h, tbl_deliverables AS d 
							WHERE h.house=4 AND h.deliverable = d.Id]
--- PASS: Test_GetHouseDeliverableList (0.00s)
	AccessoryDeliverable_test.go:15: Test GetHouseDeliverableList
	AccessoryDeliverable_test.go:17: <Case>
	AccessoryDeliverable_test.go:24:  0 : {Id:1 Name:Â§ßÈó®Èí•Âåô Qty:3 Desc:2ÊääÈí•Âåô}
	AccessoryDeliverable_test.go:24:  1 : {Id:3 Name:‰ø°Êä•ÁÆ±Èí•Âåô Qty:2 Desc:‰∏ÄÊääÈí•Âåô}
=== RUN   Test_GetDeliverables
2017/05/14 16:37:51 [1;34m[D] [GetDeliverables]  uid: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`name` FROM `tbl_deliverables` T0 LIMIT 1000]
--- PASS: Test_GetDeliverables (0.00s)
	AccessoryDeliverable_test.go:33: Test GetDeliverables
	AccessoryDeliverable_test.go:35: <Case>
	AccessoryDeliverable_test.go:42:  0 : {Id:1 Name:Â§ßÈó®Èí•Âåô}
	AccessoryDeliverable_test.go:42:  1 : {Id:3 Name:‰ø°Êä•ÁÆ±Èí•Âåô}
	AccessoryDeliverable_test.go:42:  2 : {Id:4 Name:Èó®Á¶ÅÂç°}
	AccessoryDeliverable_test.go:42:  3 : {Id:5 Name:Èí•ÂåôA}
	AccessoryDeliverable_test.go:42:  4 : {Id:6 Name:ÊµãËØïÁöÑ‰∫§‰ªòÁâ©}
=== RUN   Test_EditDeliverable
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: -1 , name:  , login user: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [EditDeliverable]  <Error> code: 1101, ( name: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: -1 , name: 1 , login user: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [getDeliverable]  <Error> code: 1101, ( deliverable:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [EditDeliverable]  <Error> code: 1101, ( deliverable:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: 0 , name: 1 , login user: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [getDeliverable]  <Error> code: 1101, ( deliverable:0 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [EditDeliverable]  <Error> code: 1101, ( deliverable:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: 100000000 , name: 1 , login user: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [getDeliverable]  <Error> code: 1102, ( did:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [EditDeliverable]  <Error> code: 1102, ( did:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: Èí•Âåô , login user: 4 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%Èí•Âåô%`, `3`
2017/05/14 16:37:51 [1;31m[E] [EditDeliverable]  <Error> code: 1105, ( name:Èí•Âåô )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: Èí•Âåô , login user: -1 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [EditDeliverable]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: Èí•Âåô , login user: 100000000 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [EditDeliverable]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: Èí•Âåô , login user: 2 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [EditDeliverable]  <Error> code: 1106, ( uid:2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: Èí•Âåô , login user: 6 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [EditDeliverable]  <Error> code: 1106, ( uid:6 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: TestName , login user: 4 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%TestName%`, `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.8ms] - [UPDATE `tbl_deliverables` SET `name` = ? WHERE `id` = ?] - `TestName`, `3`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: ‰ø°Êä•ÁÆ±Èí•Âåô , login user: 4 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%‰ø°Êä•ÁÆ±Èí•Âåô%`, `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [UPDATE `tbl_deliverables` SET `name` = ? WHERE `id` = ?] - `‰ø°Êä•ÁÆ±Èí•Âåô`, `3`
--- PASS: Test_EditDeliverable (0.02s)
	AccessoryDeliverable_test.go:51: Test EditDeliverable
	AccessoryDeliverable_test.go:53: <Case> Invalid argument: name not set
	AccessoryDeliverable_test.go:59: <Case> Invalid argument: did < 0
	AccessoryDeliverable_test.go:65: <Case> Invalid argument: did = 0
	AccessoryDeliverable_test.go:71: <Case> Invalid argument: deliverable not exist
	AccessoryDeliverable_test.go:77: <Case> Invalid argument: deliverable name already exist
	AccessoryDeliverable_test.go:84: <Case> permission: user not login
	AccessoryDeliverable_test.go:90: <Case> permission: user does not exist
	AccessoryDeliverable_test.go:96: <Case> permission: regular user
	AccessoryDeliverable_test.go:102: <Case> permission: user is agency
	AccessoryDeliverable_test.go:108: <Case> Modify
	AccessoryDeliverable_test.go:116: name, before: ‰ø°Êä•ÁÆ±Èí•Âåô
	AccessoryDeliverable_test.go:124: name, to modify: TestName , modified: TestName
=== RUN   Test_AddDeliverable
2017/05/14 16:37:51 [1;34m[D] [AddDeliverable]  name:  , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddDeliverable]  <Error> code: 1101, ( name: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddDeliverable]  name: 11 , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddDeliverable]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddDeliverable]  name: 11 , login user: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddDeliverable]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddDeliverable]  name: 11 , login user: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddDeliverable]  <Error> code: 1106, ( uid:2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddDeliverable]  name: 11 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddDeliverable]  <Error> code: 1106, ( uid:6 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddDeliverable]  name: Èí•Âåô , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` LIKE BINARY ? ] - `%Èí•Âåô%`
2017/05/14 16:37:51 [1;31m[E] [AddDeliverable]  <Error> code: 1105, ( name:Èí•Âåô )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddDeliverable]  name: Ê∞¥ÁîµÂ≠òÊäò , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` LIKE BINARY ? ] - `%Ê∞¥ÁîµÂ≠òÊäò%`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [INSERT INTO `tbl_deliverables` (`name`) VALUES (?)] - `Ê∞¥ÁîµÂ≠òÊäò`
2017/05/14 16:37:51 [1;34m[D] [delDeliverable]  deliverable: 9 , login user: 5 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;33m[W] [delDeliverable]  checking deliverable relation or just delete all of them along with deliverable [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.1ms] - [DELETE FROM `tbl_deliverables` WHERE `id` = ?] - `9`
--- PASS: Test_AddDeliverable (0.01s)
	AccessoryDeliverable_test.go:141: Test AddDeliverable
	AccessoryDeliverable_test.go:143: <Case> Invalid argument: name not set
	AccessoryDeliverable_test.go:149: <Case> Permission: user not login
	AccessoryDeliverable_test.go:155: <Case> Permission: login user does not exist
	AccessoryDeliverable_test.go:161: <Case> Permission: login user is a regualr user
	AccessoryDeliverable_test.go:167: <Case> Permission: login user is a agency
	AccessoryDeliverable_test.go:173: <Case> Invalid argument: deliverable already exist
	AccessoryDeliverable_test.go:179: <Case> Add Deliverable
	AccessoryDeliverable_test.go:187: id: 9
=== RUN   Test_AddHouseDeliverable
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house -1 , deliverable: 0 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 0 , deliverable: 0 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( hid:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 100000000 , deliverable: 0 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 2 , deliverable: -1 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [getDeliverable]  <Error> code: 1101, ( deliverable:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( deliverable:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 2 , deliverable: 0 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [getDeliverable]  <Error> code: 1101, ( deliverable:0 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( deliverable:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 2 , deliverable: 100000000 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [getDeliverable]  <Error> code: 1102, ( did:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1102, ( did:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 2 , deliverable: 5 , qty: -10 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( qty:-10 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 100000000 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 2 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 11 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:11 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 6 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `2`, `5`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  bExist: false [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( house:2, deliverable:5 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 9 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `2`, `5`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  bExist: false [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( house:2, deliverable:5 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.0ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `2`, `5`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  bExist: false [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( house:2, deliverable:5 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 4 , deliverable: 3 , qty: 10 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.2ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `4`, `3`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  bExist: true [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1105, ( house:4, deliverable:3 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 4 , deliverable: 6 , qty: 10 , desc: Test AddHouseDeliverable [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `4`, `6`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  bExist: false [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.4ms] - [INSERT INTO `tbl_house_deliverable` (`house`, `deliverable`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `4`, `6`, `10`, `Test AddHouseDeliverable`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 4 , deliverable: 6 , qty: 10 , desc: Test AddHouseDeliverable [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `4`, `6`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  bExist: true [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1105, ( house:4, deliverable:6 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 4 , deliverable: 6 , qty: 0 , desc: AddHouseDeliverable [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `4`, `6`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  bExist: true [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id` FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `4`, `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     3.3ms] - [DELETE FROM `tbl_house_deliverable` WHERE `id` IN (?)] - `13`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  numb: 1 [0m
--- PASS: Test_AddHouseDeliverable (0.04s)
	AccessoryDeliverable_test.go:200: Test AddHouseDeliverable
	AccessoryDeliverable_test.go:202: <Case> Invalid argument: house < 0
	AccessoryDeliverable_test.go:208: <Case> Invalid argument: house = 0
	AccessoryDeliverable_test.go:214: <Case> Invalid argument: house does not exist
	AccessoryDeliverable_test.go:221: <Case> Invalid argument: deliverable < 0
	AccessoryDeliverable_test.go:227: <Case> Invalid argument: deliverable = 0
	AccessoryDeliverable_test.go:233: <Case> Invalid argument: deliverable does not exist
	AccessoryDeliverable_test.go:239: <Case> Invalid argument: qty < 0
	AccessoryDeliverable_test.go:245: <Case> Permission: user not login
	AccessoryDeliverable_test.go:251: <Case> Permission: user do not exist
	AccessoryDeliverable_test.go:257: <Case> Permission: regular user
	AccessoryDeliverable_test.go:263: <Case> Permission: agency, but not for this house
	AccessoryDeliverable_test.go:269: <Case> Permission: agency of this house, no record to delete
	AccessoryDeliverable_test.go:275: <Case> Permission: landlord of this house, no record to delete
	AccessoryDeliverable_test.go:281: <Case> Permission: administrator, no record to delete
	AccessoryDeliverable_test.go:287: <Case> Invalid Argument: administrator, house deliverable already exist
	AccessoryDeliverable_test.go:293: <Case> Add deliverable for house, success
	AccessoryDeliverable_test.go:299: new id: 13
	AccessoryDeliverable_test.go:300: <Case> Add same deliverable for house, rejected
	AccessoryDeliverable_test.go:305: <Case> remove the new house deliverable just add
=== RUN   Test_EditHouseDeliverable
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house deliverable: -1 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [getHouseDeliverable]  <Error> code: 1101, ( house deliverable:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( house deliverable:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house deliverable: 0 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [getHouseDeliverable]  <Error> code: 1101, ( house deliverable:0 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( house deliverable:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house deliverable: 100000000 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [getHouseDeliverable]  <Error> code: 1102, ( house deliverable:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1102, ( house deliverable:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house deliverable: 7 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  3 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 9 , house deliverable: 7 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  3 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 11 , house deliverable: 7 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  3 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:11 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 2 , house deliverable: 7 , qty: 5 , desc: test deliverable [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.7ms] - [UPDATE `tbl_house_deliverable` SET `house` = ?, `deliverable` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `6`, `3`, `5`, `test deliverable`, `7`
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 2 , house deliverable: 7 , qty: 4 , desc: ‰∫§‰ªòÁâ©ËØ¥Êòé [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:5 Desc:test deliverable} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.4ms] - [UPDATE `tbl_house_deliverable` SET `house` = ?, `deliverable` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `6`, `3`, `4`, `‰∫§‰ªòÁâ©ËØ¥Êòé`, `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 1 , house deliverable: 7 , qty: 5 , desc: test deliverable [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `1`
2017/05/14 16:37:51 [1;31m[E] [isAgency]  err: <Error> code: 1102, ( uid:1 )
 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `1`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  3 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house deliverable: 7 , qty: 5 , desc: test deliverable [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.5ms] - [UPDATE `tbl_house_deliverable` SET `house` = ?, `deliverable` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `6`, `3`, `5`, `test deliverable`, `7`
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house deliverable: 7 , qty: 4 , desc: ‰∫§‰ªòÁâ©ËØ¥Êòé [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:5 Desc:test deliverable} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.2ms] - [UPDATE `tbl_house_deliverable` SET `house` = ?, `deliverable` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `6`, `3`, `4`, `‰∫§‰ªòÁâ©ËØ¥Êòé`, `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 6 , deliverable: 1 , qty: 2 , desc: new deliverable [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/05/14 16:37:51 [1;34m[D] [getDeliverable]  did: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_deliverables` WHERE `id` = ? ] - `1`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `6`, `1`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  bExist: false [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.2ms] - [INSERT INTO `tbl_house_deliverable` (`house`, `deliverable`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `6`, `1`, `2`, `new deliverable`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house deliverable: 14 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseDeliverable]  hdid: 14 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `14`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  {Id:14 House:6 Deliverable:1 Qty:2 Desc:new deliverable} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id` FROM `tbl_house_deliverable` T0 WHERE T0.`id` = ? ] - `14`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.4ms] - [DELETE FROM `tbl_house_deliverable` WHERE `id` IN (?)] - `14`
2017/05/14 16:37:51 [1;34m[D] [AddHouseDeliverable]  numb: 1 [0m
--- PASS: Test_EditHouseDeliverable (0.04s)
	AccessoryDeliverable_test.go:317: Test EditHouseDeliverable
	AccessoryDeliverable_test.go:319: <Case> Invalid argument: house deliverable < 0
	AccessoryDeliverable_test.go:325: <Case> Invalid argument: house deliverable = 0
	AccessoryDeliverable_test.go:331: <Case> Invalid argument: house deliverable does not exist
	AccessoryDeliverable_test.go:337: <Case> Permission: user not login
	AccessoryDeliverable_test.go:343: <Case> Permission: login user is a regular user
	AccessoryDeliverable_test.go:349: <Case> Permission: login user is agency, but not for this house
	AccessoryDeliverable_test.go:361: before edit: {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé}
	AccessoryDeliverable_test.go:364: <Case> edit house deliverable by landlord
	AccessoryDeliverable_test.go:371: after edit: {Id:7 House:6 Deliverable:3 Qty:5 Desc:test deliverable}
	AccessoryDeliverable_test.go:383: <Case> edit house deliverable by agency
	AccessoryDeliverable_test.go:390: <Case> edit house deliverable by administrator
	AccessoryDeliverable_test.go:396: after edit: {Id:7 House:6 Deliverable:3 Qty:5 Desc:test deliverable}
	AccessoryDeliverable_test.go:407: <Case> delete the house deliver by editing qty = 0
	AccessoryDeliverable_test.go:414: new house deliverable: 14
=== RUN   Test_GetFacilityTypeList
2017/05/14 16:37:51 [1;34m[D] [GetFacilityTypeList]  uid: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetFacilityTypeList]  uid: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetFacilityTypeList]  uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`name` FROM `tbl_facility_type` T0 LIMIT 1000]
--- PASS: Test_GetFacilityTypeList (0.00s)
	AccessoryFacility_test.go:15: Test GetFacilityTypeList
	AccessoryFacility_test.go:17: <Case> Invalid parameter: user not login
	AccessoryFacility_test.go:23: <Case> Invalid parameter: user does not exist
	AccessoryFacility_test.go:29: <Case> get facility type list
	AccessoryFacility_test.go:37:  0 : {Id:4 Name:5rWL6K-V6K6-5pa9
		}
	AccessoryFacility_test.go:37:  1 : {Id:3 Name:6K6-5pa9
		}
	AccessoryFacility_test.go:37:  2 : {Id:1 Name:ÂÆ∂ÂÖ∑}
	AccessoryFacility_test.go:37:  3 : {Id:2 Name:ÂÆ∂Áîµ}
	AccessoryFacility_test.go:37:  4 : {Id:6 Name:ÊµãËØïÁ±ªÂà´}
	AccessoryFacility_test.go:37:  5 : {Id:5 Name:ÊµãËØïËÆæÊñΩ}
=== RUN   Test_EditFacilityType
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: 11 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:11 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [EditFacilityType]  <Error> code: 1101, ( name: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name: test , facility type: -1 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [EditFacilityType]  <Error> code: 1101, ( facility type:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name: test , facility type: 0 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [EditFacilityType]  <Error> code: 1101, ( facility type:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name: test , facility type: 100000000 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [EditFacilityType]  <Error> code: 1102, ( facility type:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name: ËØïÁ±ª , facility type: 2 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%ËØïÁ±ª%`, `2`
2017/05/14 16:37:51 [1;31m[E] [EditFacilityType]  <Error> code: 1105, ( name:ËØïÁ±ª )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name: ÂÆ∂Áîµ1 , facility type: 2 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%ÂÆ∂Áîµ1%`, `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [UPDATE `tbl_facility_type` SET `name` = ? WHERE `id` = ?] - `ÂÆ∂Áîµ1`, `2`
2017/05/14 16:37:51 [1;34m[D] [EditFacilityType]  name: ÂÆ∂Áîµ , facility type: 2 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%ÂÆ∂Áîµ%`, `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.2ms] - [UPDATE `tbl_facility_type` SET `name` = ? WHERE `id` = ?] - `ÂÆ∂Áîµ`, `2`
--- PASS: Test_EditFacilityType (0.02s)
	AccessoryFacility_test.go:46: Test EditFacilityType
	AccessoryFacility_test.go:48: <Case> Permission: user not login
	AccessoryFacility_test.go:54: <Case> Permission: login user does not exist
	AccessoryFacility_test.go:60: <Case> Permission: login user is a regular user
	AccessoryFacility_test.go:66: <Case> Permission: login user is a agency
	AccessoryFacility_test.go:72: <Case> Invalid parameter: type name is empty
	AccessoryFacility_test.go:78: <Case> Invalid parameter: type < 0
	AccessoryFacility_test.go:84: <Case> Invalid parameter: type = 0
	AccessoryFacility_test.go:90: <Case> Invalid parameter: type does not exist
	AccessoryFacility_test.go:96: <Case> Invalid parameter: type name already exist
	AccessoryFacility_test.go:102: <Case> Modify
=== RUN   Test_DeleFacilityType
2017/05/14 16:37:51 [1;34m[D] [DeleFacilityType]  facility type: -1 , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [DeleFacilityType]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DeleFacilityType]  facility type: -1 , login user: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [DeleFacilityType]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DeleFacilityType]  facility type: -1 , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [DeleFacilityType]  <Error> code: 1106, ( uid:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DeleFacilityType]  facility type: -1 , login user: 11 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [DeleFacilityType]  <Error> code: 1106, ( uid:11 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DeleFacilityType]  facility type: -1 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [DeleFacilityType]  <Error> code: 1101, ( facility type:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DeleFacilityType]  facility type: 0 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [DeleFacilityType]  <Error> code: 1101, ( facility type:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DeleFacilityType]  facility type: 100000000 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [DeleFacilityType]  <Error> code: 1102, ( facility type:100000000 )
 [0m
--- PASS: Test_DeleFacilityType (0.01s)
	AccessoryFacility_test.go:120: Test DeleFacilityType
	AccessoryFacility_test.go:122: <Case> Permission: user not login
	AccessoryFacility_test.go:128: <Case> Permission: login user does not exist
	AccessoryFacility_test.go:134: <Case> Permission: login user is a regular user
	AccessoryFacility_test.go:140: <Case> Permission: login user is a agency
	AccessoryFacility_test.go:146: <Case> Invalid parameter: type < 0
	AccessoryFacility_test.go:152: <Case> Invalid parameter: type = 0
	AccessoryFacility_test.go:158: <Case> Invalid parameter: type does not exist
	AccessoryFacility_test.go:163: The actual delete testing, please ref to Test_AddFacilityType
=== RUN   Test_AddFacilityType
2017/05/14 16:37:51 [1;34m[D] [AddFacilityType]  name:  , uid: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacilityType]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacilityType]  name:  , uid: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacilityType]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacilityType]  name:  , uid: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacilityType]  <Error> code: 1106, ( uid:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacilityType]  name:  , uid: 11 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacilityType]  <Error> code: 1106, ( uid:11 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacilityType]  name:  , uid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacilityType]  <Error> code: 1101, ( name: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacilityType]  name: ËØïÁ±ª , uid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` LIKE BINARY ? ] - `%ËØïÁ±ª%`
2017/05/14 16:37:51 [1;31m[E] [AddFacilityType]  <Error> code: 1105, ( name:ËØïÁ±ª )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacilityType]  name: test ÊµãËØï test , uid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` LIKE BINARY ? ] - `%test ÊµãËØï test%`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [INSERT INTO `tbl_facility_type` (`name`) VALUES (?)] - `test ÊµãËØï test`
2017/05/14 16:37:51 [1;34m[D] [DeleFacilityType]  facility type: 9 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.1ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `9`
2017/05/14 16:37:51 [1;33m[W] [DeleFacilityType]  Prevent deleting if this type has been used or delete cascaded [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.1ms] - [DELETE FROM `tbl_facility_type` WHERE `id` = ?] - `9`
--- PASS: Test_AddFacilityType (0.01s)
	AccessoryFacility_test.go:173: Test AddFacilityType
	AccessoryFacility_test.go:175: <Case> Permission: user not login
	AccessoryFacility_test.go:181: <Case> Permission: login user does not exist
	AccessoryFacility_test.go:187: <Case> Permission: login user is a regular user
	AccessoryFacility_test.go:193: <Case> Permission: login user is a agency
	AccessoryFacility_test.go:199: <Case> Invalid parameter: type name is empty
	AccessoryFacility_test.go:205: <Case> Invalid parameter: type name already exist
	AccessoryFacility_test.go:211: <Case> Add facility type
	AccessoryFacility_test.go:218: <Case> Delete facility type just added a second ago
=== RUN   Test_GetFacilityList
2017/05/14 16:37:51 [1;34m[D] [GetFacilityTypeList]  login user: -1 , facility type: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1101, ( facility type:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetFacilityTypeList]  login user: -1 , facility type: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1102, ( facility type:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetFacilityTypeList]  login user: -1 , facility type: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetFacilityTypeList]  login user: 100000000 , facility type: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetFacilityTypeList]  login user: 9 , facility type: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT f.id, f.name, t.name AS type FROM tbl_facilitys AS f, tbl_facility_type AS t WHERE f.type=t.id ORDER BY t.name, f.name]
2017/05/14 16:37:51 [1;34m[D] [GetFacilityTypeList]  login user: 9 , facility type: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT f.id, f.name, t.name AS type FROM tbl_facilitys AS f, tbl_facility_type AS t WHERE f.type=t.id AND type=2 ORDER BY t.name, f.name]
--- PASS: Test_GetFacilityList (0.00s)
	AccessoryFacility_test.go:232: Test GetFacilityList
	AccessoryFacility_test.go:234: <Case> Invalid argument: type < 0
	AccessoryFacility_test.go:240: <Case> Invalid argument: facility type does not exist
	AccessoryFacility_test.go:246: <Case> Permission: user not logined
	AccessoryFacility_test.go:252: <Case> Permission: user does not exist
	AccessoryFacility_test.go:258: <Case> fetch all facilities
	AccessoryFacility_test.go:265:  0 : {Id:6 Name:Ê≤ôÂèëËå∂Âá† Type:ÂÆ∂ÂÖ∑}
	AccessoryFacility_test.go:265:  1 : {Id:8 Name:ÊµãËØï Type:ÂÆ∂ÂÖ∑}
	AccessoryFacility_test.go:265:  2 : {Id:3 Name:ÁîµÂÜ∞ÁÆ± Type:ÂÆ∂Áîµ}
	AccessoryFacility_test.go:265:  3 : {Id:4 Name:ÁîµËßÜÊú∫ Type:ÂÆ∂Áîµ}
	AccessoryFacility_test.go:265:  4 : {Id:7 Name:Á´ãÂºèÁ©∫Ë∞É Type:ÂÆ∂Áîµ}
	AccessoryFacility_test.go:268: <Case> fetch a certain kind of facilities
	AccessoryFacility_test.go:275:  0 : {Id:3 Name:ÁîµÂÜ∞ÁÆ± Type:ÂÆ∂Áîµ}
	AccessoryFacility_test.go:275:  1 : {Id:4 Name:ÁîµËßÜÊú∫ Type:ÂÆ∂Áîµ}
	AccessoryFacility_test.go:275:  2 : {Id:7 Name:Á´ãÂºèÁ©∫Ë∞É Type:ÂÆ∂Áîµ}
=== RUN   Test_EditFacility
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: -1 , type: -1 , name:  , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: -1 , type: -1 , name:  , login user: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: -1 , type: -1 , name:  , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.9ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: -1 , type: -1 , name:  , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:6 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: -1 , type: -1 , name:  , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: 0 , type: -1 , name:  , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: 100000000 , type: -1 , name:  , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1102, ( facility:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: 3 , type: -1 , name:  , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1101, ( name: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: 3 , type: -1 , name: test , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     1.0ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.1ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility type:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: 3 , type: 0 , name: test , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility type:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: 3 , type: 2 , name: ÁîµËßÜ , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`type` = ? AND T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `2`, `%ÁîµËßÜ%`, `3`
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1105, ( facility type:2, name:ÁîµËßÜ )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: 3 , type: 6 , name: ÁîµËßÜÊú∫60Âêã , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.8ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`type` = ? AND T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `6`, `%ÁîµËßÜÊú∫60Âêã%`, `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     3.0ms] - [UPDATE `tbl_facilitys` SET `type` = ?, `name` = ? WHERE `id` = ?] - `6`, `ÁîµËßÜÊú∫60Âêã`, `3`
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  Facility: 3 , type: 2 , name: ÁîµÂÜ∞ÁÆ± , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`type` = ? AND T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `2`, `%ÁîµÂÜ∞ÁÆ±%`, `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.7ms] - [UPDATE `tbl_facilitys` SET `type` = ?, `name` = ? WHERE `id` = ?] - `2`, `ÁîµÂÜ∞ÁÆ±`, `3`
--- PASS: Test_EditFacility (0.03s)
	AccessoryFacility_test.go:286: Test EditFacility
	AccessoryFacility_test.go:288: <Case 1> Permission: user not login
	AccessoryFacility_test.go:294: <Case 2> Permission: user does not exist
	AccessoryFacility_test.go:300: <Case 3> Permission: user is a regualr user
	AccessoryFacility_test.go:306: <Case 4> Permission: user is a agency
	AccessoryFacility_test.go:312: <Case 5> Invalid argument: facility < 0
	AccessoryFacility_test.go:318: <Case 6> Invalid argument: facility = 0
	AccessoryFacility_test.go:324: <Case 7> Invalid argument: facility does not exist
	AccessoryFacility_test.go:330: <Case 8> Invalid argument: name is empty
	AccessoryFacility_test.go:336: <Case 9> Invalid argument: type < 0
	AccessoryFacility_test.go:342: <Case 10> Invalid argument: type = 0
	AccessoryFacility_test.go:348: <Case 11> Invalid argument: duplicated
	AccessoryFacility_test.go:354: <Case 12> Modify facility
	AccessoryFacility_test.go:360: <Case 13> Restore facility
=== RUN   Test_DelFacility
2017/05/14 16:37:51 [1;34m[D] [DelFacility]  Facility: -1 , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [DelFacility]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelFacility]  Facility: -1 , login user: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [DelFacility]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelFacility]  Facility: -1 , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [DelFacility]  <Error> code: 1106, ( uid:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelFacility]  Facility: -1 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [DelFacility]  <Error> code: 1106, ( uid:6 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelFacility]  Facility: -1 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [DelFacility]  <Error> code: 1101, ( facility:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelFacility]  Facility: 0 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [DelFacility]  <Error> code: 1101, ( facility:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelFacility]  Facility: 100000000 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [DelFacility]  <Error> code: 1102, ( facility:100000000 )
 [0m
--- PASS: Test_DelFacility (0.01s)
	AccessoryFacility_test.go:374: Test DelFacility
	AccessoryFacility_test.go:376: <Case 1> Permission: user not login
	AccessoryFacility_test.go:382: <Case 2> Permission: user does not exist
	AccessoryFacility_test.go:388: <Case 3> Permission: user is a regualr user
	AccessoryFacility_test.go:394: <Case 4> Permission: user is a agency
	AccessoryFacility_test.go:400: <Case 5> Invalid argument: facility < 0
	AccessoryFacility_test.go:406: <Case 6> Invalid argument: facility = 0
	AccessoryFacility_test.go:412: <Case 7> Invalid argument: facility does not exist
	AccessoryFacility_test.go:418: The actual delete testing, please ref to Test_AddFacility
=== RUN   Test_AddFacility
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:6 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1101, ( name: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  name: test , facility type: -1 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility type:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  name: test , facility type: 0 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility type:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  name: test , facility type: 100000000 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1102, ( facility type:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  name: ÂÜ∞ , facility type: 2 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`type` = ? AND T0.`name` LIKE BINARY ? ] - `2`, `%ÂÜ∞%`
2017/05/14 16:37:51 [1;31m[E] [AddFacility]  <Error> code: 1105, ( facility type:2, name:ÂÜ∞ )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddFacility]  name: ÂÆΩÂ∏¶ÁΩëÁªú , facility type: 6 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`type` = ? AND T0.`name` LIKE BINARY ? ] - `6`, `%ÂÆΩÂ∏¶ÁΩëÁªú%`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.0ms] - [INSERT INTO `tbl_facilitys` (`type`, `name`) VALUES (?, ?)] - `6`, `ÂÆΩÂ∏¶ÁΩëÁªú`
2017/05/14 16:37:51 [1;34m[D] [DelFacility]  Facility: 11 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `11`
2017/05/14 16:37:51 [1;33m[W] [DelFacility]  Prevent deleting if this facility has been used or delete cascaded [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.0ms] - [DELETE FROM `tbl_facilitys` WHERE `id` = ?] - `11`
--- PASS: Test_AddFacility (0.02s)
	AccessoryFacility_test.go:427: Test AddFacility
	AccessoryFacility_test.go:429: <Case 1> Permission: user not login
	AccessoryFacility_test.go:435: <Case 2> Permission: user does not exist
	AccessoryFacility_test.go:441: <Case 3> Permission: user is a regualr user
	AccessoryFacility_test.go:447: <Case 4> Permission: user is a agency
	AccessoryFacility_test.go:453: <Case 5> Invalid argument: name is empty
	AccessoryFacility_test.go:459: <Case 6> Invalid argument: type < 0
	AccessoryFacility_test.go:465: <Case 7> Invalid argument: type = 0
	AccessoryFacility_test.go:471: <Case 8> Invalid argument: type does not exist
	AccessoryFacility_test.go:477: <Case 9> Invalid argument: duplicated
	AccessoryFacility_test.go:483: <Case 10> Add facility
	AccessoryFacility_test.go:489: new facility: 11
	AccessoryFacility_test.go:491: <Case 11> Delete facility just added a second ago
=== RUN   Test_GetHouseFacilities
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  hid: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  hid: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( hid:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  hid: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  hid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.8ms] - [SELECT hf.id, f.name, t.name AS type, hf.qty, hf.desc 
							FROM tbl_house_facility AS hf, tbl_facilitys AS f, tbl_facility_type AS t 
							WHERE hf.house=4 AND hf.facility=f.id AND f.type=t.id]
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1102, ( house:4 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  hid: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT hf.id, f.name, t.name AS type, hf.qty, hf.desc 
							FROM tbl_house_facility AS hf, tbl_facilitys AS f, tbl_facility_type AS t 
							WHERE hf.house=6 AND hf.facility=f.id AND f.type=t.id]
--- PASS: Test_GetHouseFacilities (0.00s)
	AccessoryFacility_test.go:505: Test GetHouseFacilities
	AccessoryFacility_test.go:508: <Case 1 > Invalid argument: house < 0
	AccessoryFacility_test.go:515: <Case 2 > Invalid argument: house = 0
	AccessoryFacility_test.go:522: <Case 3 > Invalid argument: house does not exist
	AccessoryFacility_test.go:529: <Case 4 > Invalid argument: house does not have any facility
	AccessoryFacility_test.go:536: <Case 5 > get house facility list
	AccessoryFacility_test.go:544:  0 : {Id:7 Name:Ê≤ôÂèëËå∂Âá† Type:ÂÆ∂ÂÖ∑ Qty:2 Desc:Ê≤ôÂèëËå∂Âá†ËØ¥Êòé}
	AccessoryFacility_test.go:544:  1 : {Id:8 Name:ÁîµËßÜÊú∫ Type:ÂÆ∂Áîµ Qty:3 Desc:ÁîµËßÜÊú∫ËØ¥Êòé}
	AccessoryFacility_test.go:544:  2 : {Id:9 Name:ÁîµÂÜ∞ÁÆ± Type:ÂÆ∂Áîµ Qty:11 Desc:}
=== RUN   Test_EditHouseFacility
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: -1 , facility: -1 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( facility:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: -1 , facility: 0 , qty: 0 , desc:  [0m
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( facility:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: -1 , facility: 100000000 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.1ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1102, ( facility:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: -1 , facility: 3 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( house facility:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 0 , facility: 3 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( house facility:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 100000000 , facility: 3 , qty: 0 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.1ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1102, ( facility:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 7 , facility: 3 , qty: -1 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 2 , agency: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( qty:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 7 , facility: 3 , qty: 1 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 2 , agency: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `6`, `3`, `7`
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1105, ( house:6, facility:3 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 100000000 , house facility: 7 , facility: 3 , qty: 1 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.1ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 2 , agency: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `6`, `3`, `7`
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1105, ( house:6, facility:3 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 9 , house facility: 7 , facility: 3 , qty: 1 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 2 , agency: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `6`, `3`, `7`
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1105, ( house:6, facility:3 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 11 , house facility: 5 , facility: 4 , qty: 1 , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `2`, `4`, `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.8ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1106, ( uid:11 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 4 , house facility: 5 , facility: 7 , qty: 10 , desc: ÊµãËØïËØ¥Êòé [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.1ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `7`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.1ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `2`, `7`, `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.6ms] - [UPDATE `tbl_house_facility` SET `facility` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `7`, `10`, `ÊµãËØïËØ¥Êòé`, `5`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 6 , house facility: 5 , facility: 4 , qty: 333 , desc: fdesc_1111 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `2`, `4`, `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.5ms] - [UPDATE `tbl_house_facility` SET `facility` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `4`, `333`, `fdesc_1111`, `5`
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: 9 , house: 2 , fl: [{Id:0 Facility:7 Qty:3 Desc:add desc}] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `7`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`house`, T0.`facility`, T0.`qty`, T0.`desc` FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? LIMIT 1] - `2`, `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  errT: <QuerySeter> no row found [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Begin /     0.1ms] - [START TRANSACTION]
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /  db.Prepare /     0.2ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  0 : {0 7 3 add desc} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     st.Exec /     0.1ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `2`, `7`, `3`, `add desc`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    st.Close /     0.0ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  Commit [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /   tx.Commit /     1.1ms] - [COMMIT]
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 9 , house facility: 18 , facility: 7 , qty: 0 , desc: fdesc_1111 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `7`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `18`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `2`, `7`, `18`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.7ms] - [DELETE FROM `tbl_house_facility` WHERE `id` = ?] - `18`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  Delete 1 records [0m
--- PASS: Test_EditHouseFacility (0.03s)
	AccessoryFacility_test.go:555: Test EditHouseFacility
	AccessoryFacility_test.go:558: <Case 1 > Invalid argument: facility < 0
	AccessoryFacility_test.go:565: <Case 2 > Invalid argument: facility = 0
	AccessoryFacility_test.go:572: <Case 3 > Invalid argument: facility does not exist
	AccessoryFacility_test.go:579: <Case 4 > Invalid argument: house facility < 0
	AccessoryFacility_test.go:586: <Case 5 > Invalid argument: house facility = 0
	AccessoryFacility_test.go:593: <Case 6 > Invalid argument: house facility does not exist
	AccessoryFacility_test.go:600: <Case 7 > Invalid argument: qty < 0
	AccessoryFacility_test.go:607: <Case 8 > Permission: user not login
	AccessoryFacility_test.go:614: <Case 9 > Permission: user does not exist
	AccessoryFacility_test.go:621: <Case 10 > Permission: user is a regular user
	AccessoryFacility_test.go:628: <Case 11 > Permission: user is a agency, but not for this house
	AccessoryFacility_test.go:635: <Case 12 > Update by administrator
	AccessoryFacility_test.go:642: <Case 13 > Restore by house agency
	AccessoryFacility_test.go:649: <Case 14 > Add new facility by landlord
	AccessoryFacility_test.go:658: <Case 15 > remove the new facility by landlord
=== RUN   Test_DeleteHouseFacility
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( house facility:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( house facility:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1102, ( facility:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 11 , house facility: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1106, ( uid:11 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 2 , house facility: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [EditHouseFacility]  <Error> code: 1106, ( uid:2 )
 [0m
--- PASS: Test_DeleteHouseFacility (0.01s)
	AccessoryFacility_test.go:673: Test DeleteHouseFacility
	AccessoryFacility_test.go:676: <Case 1 > Invalid argument: house facility < 0
	AccessoryFacility_test.go:683: <Case 2 > Invalid argument: house facility = 0
	AccessoryFacility_test.go:690: <Case 3 > Invalid argument: house facility does not exist
	AccessoryFacility_test.go:697: <Case 4 > Permission: user not login
	AccessoryFacility_test.go:704: <Case 5 > Permission: user is a regular user
	AccessoryFacility_test.go:711: <Case 6 > Permission: user is an agency, but not for this house
	AccessoryFacility_test.go:718: Please ref to API Test_AddHouseFacilities for actual processing of DeleteHouseFacility
=== RUN   Test_AddHouseFacilities
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: -1 , house: -1 , fl: [] [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: -1 , house: 0 , fl: [] [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( hid:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: -1 , house: 100000000 , fl: [] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: -1 , house: 4 , fl: [] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: 100000000 , house: 4 , fl: [] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: 9 , house: 4 , fl: [] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1106, ( user:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: 11 , house: 4 , fl: [] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1106, ( user:11 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: 5 , house: 4 , fl: [] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( no facility found )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: 5 , house: 4 , fl: [] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( no facility found )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: 5 , house: 4 , fl: [{Id:0 Facility:100000000 Qty:3 Desc:add desc}] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [AddHouseFacilities]  <Error> code: 1102, ( facility:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: 5 , house: 4 , fl: [{Id:0 Facility:7 Qty:3 Desc:add desc}] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `7`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`house`, T0.`facility`, T0.`qty`, T0.`desc` FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? LIMIT 1] - `4`, `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  errT: <QuerySeter> no row found [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Begin /     0.1ms] - [START TRANSACTION]
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /  db.Prepare /     0.1ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  0 : {0 7 3 add desc} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     st.Exec /     0.1ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `4`, `7`, `3`, `add desc`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    st.Close /     0.0ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  Commit [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /   tx.Commit /     1.0ms] - [COMMIT]
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  user: 5 , house: 4 , fl: [{Id:0 Facility:3 Qty:33 Desc:add desc 3} {Id:0 Facility:7 Qty:77 Desc:add desc 7} {Id:0 Facility:8 Qty:88 Desc:add desc 8}] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `7`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name` FROM `tbl_facilitys` WHERE `id` = ? ] - `8`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT T0.`id`, T0.`house`, T0.`facility`, T0.`qty`, T0.`desc` FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? LIMIT 1] - `4`, `3`
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  errT: <QuerySeter> no row found [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`house`, T0.`facility`, T0.`qty`, T0.`desc` FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? LIMIT 1] - `4`, `7`
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  errT: <nil> [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`house`, T0.`facility`, T0.`qty`, T0.`desc` FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? LIMIT 1] - `4`, `8`
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  errT: <QuerySeter> no row found [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Begin /     0.0ms] - [START TRANSACTION]
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /  db.Prepare /     0.4ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  0 : {0 3 33 add desc 3} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     st.Exec /     0.3ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `4`, `3`, `33`, `add desc 3`
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  1 : {0 8 88 add desc 8} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     st.Exec /     0.4ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `4`, `8`, `88`, `add desc 8`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.6ms] - [UPDATE `tbl_house_facility` SET `qty` = ?, `desc` = ? WHERE `id` = ?] - `77`, `add desc 7`, `19`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    st.Close /     0.0ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/05/14 16:37:51 [1;34m[D] [AddHouseFacilities]  Commit [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /   tx.Commit /     0.8ms] - [COMMIT]
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 5 , house facility: 19 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `19`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 4 , agency: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.2ms] - [DELETE FROM `tbl_house_facility` WHERE `id` = ?] - `19`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  Delete 1 records [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 5 , house facility: 20 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `20`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 4 , agency: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     4.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     2.1ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.9ms] - [DELETE FROM `tbl_house_facility` WHERE `id` = ?] - `20`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  Delete 1 records [0m
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  login user: 5 , house facility: 21 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `21`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  house: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  landlord: 4 , agency: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.0ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     3.3ms] - [DELETE FROM `tbl_house_facility` WHERE `id` = ?] - `21`
2017/05/14 16:37:51 [1;34m[D] [EditHouseFacility]  Delete 1 records [0m
--- PASS: Test_AddHouseFacilities (0.06s)
	AccessoryFacility_test.go:733: Test AddHouseFacilities
	AccessoryFacility_test.go:736: <Case 1> Invalid argument: house < 0
	AccessoryFacility_test.go:743: <Case 2> Invalid argument: house = 0
	AccessoryFacility_test.go:750: <Case 3> Invalid argument: house does not exist
	AccessoryFacility_test.go:757: <Case 4> Invalid argument: user not login
	AccessoryFacility_test.go:764: <Case 5> Invalid argument: user does not exist
	AccessoryFacility_test.go:771: <Case 6> Permission Checking: user is a regular user
	AccessoryFacility_test.go:778: <Case 7> Permission Checking: user is an agency, but not for this house
	AccessoryFacility_test.go:806: <Case 8> Invalid argument: no facility list assigned, nil
	AccessoryFacility_test.go:813: <Case 9> Invalid argument: no facility list assigned, empty
	AccessoryFacility_test.go:821: <Case 10> Invalid argument: facility not found
	AccessoryFacility_test.go:829: <Case 11> add facility to house that don't have any facility
	AccessoryFacility_test.go:837: new house facility ids: [19]
	AccessoryFacility_test.go:839: <Case 12> add facility to house that already have facility
	AccessoryFacility_test.go:849: new house facility ids: [20 21]
	AccessoryFacility_test.go:851: <Case 13> Remove all house facilities added above
	AccessoryFacility_test.go:854: Delete new house facility: 19
	AccessoryFacility_test.go:861: Delete new house facility: 20
	AccessoryFacility_test.go:861: Delete new house facility: 21
=== RUN   Test_GetUserInfo_1
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  id: 10000000 , ln: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10000000`
2017/05/14 16:37:51 [1;31m[E] [GetUserInfo]  <Error> code: 1102, ( uid:10000000 )
 [0m
--- PASS: Test_GetUserInfo_1 (0.00s)
	Admin_test.go:13: Test GetUserInfo, user does not exist
	Admin_test.go:18: Pass, user: {0     0 }
=== RUN   Test_GetUserInfo_2
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  id: 4 , ln: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.1ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  landlord himself [0m
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  uid:{Id:4 Name: IdNo: Phone:15306261804 HeadPortrait: Role:0 RoleDesc:Manager} [0m
--- PASS: Test_GetUserInfo_2 (0.00s)
	Admin_test.go:23: Test GetUserInfo, user exist, login user is landload
	Admin_test.go:29: Pass, user: {4   15306261804  0 Manager}
=== RUN   Test_GetUserInfo_3
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  id: 4 , ln: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.0ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  admin [0m
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  uid:{Id:4 Name: IdNo: Phone:15306261804 HeadPortrait: Role:0 RoleDesc:Manager} [0m
--- PASS: Test_GetUserInfo_3 (0.00s)
	Admin_test.go:34: Test GetUserInfo, user exist, login user is administrator
	Admin_test.go:40: Pass, user: {4   15306261804  0 Manager}
=== RUN   Test_GetUserInfo_4
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  id: 4 , ln: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [isOwnerAgency]  uid: 4 , aid: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseListByOwner]  oid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_user` T1 ON T1.`id` = T0.`owner_id` WHERE T1.`id` = ? LIMIT 1000] - `4`
2017/05/14 16:37:51 [1;34m[D] [isOwnerAgency]  house count: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  agency [0m
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  uid:{Id:4 Name: IdNo: Phone:15306261804 HeadPortrait: Role:0 RoleDesc:Manager} [0m
--- PASS: Test_GetUserInfo_4 (0.00s)
	Admin_test.go:45: Test GetUserInfo, user exist, login user is landlord's agency
	Admin_test.go:51: Pass, user: {4   15306261804  0 Manager}
=== RUN   Test_GetUserInfo_5
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  id: 4 , ln: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:7 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [isOwnerAgency]  uid: 4 , aid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `7`
2017/05/14 16:37:51 [1;31m[E] [isAgency]  err: <Error> code: 1102, ( uid:7 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [isOwnerAgency]  err: <Error> code: 1102, ( uid:7 )
 , is agency: false [0m
2017/05/14 16:37:51 [1;34m[D] [GetUserInfo]  uid:{Id:4 Name: IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
--- PASS: Test_GetUserInfo_5 (0.00s)
	Admin_test.go:56: Test GetUserInfo, user exist, login user is nothing
	Admin_test.go:62: Pass, user: {4     0 Manager}
=== RUN   Test_GetSaltByName_1
2017/05/14 16:37:51 [1;34m[D] [GetSaltByName]  login user: unknown [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `login_name` = ? ] - `unknown`
2017/05/14 16:37:51 [1;31m[E] [GetSaltByName]  <Error> code: 1102, ( <QuerySeter> no row found )
 [0m
--- PASS: Test_GetSaltByName_1 (0.00s)
	Admin_test.go:78: Test GetSaltByName, user not exist
	Admin_test.go:83: salt:  , rand: 
=== RUN   Test_GetSaltByName_2
2017/05/14 16:37:51 [1;34m[D] [GetSaltByName]  login user: 15306261804 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `login_name` = ? ] - `15306261804`
2017/05/14 16:37:51 [1;34m[D] [newUserSalt]  new salt: 1dc47bc241db516c49ea2117ed7de2ad , [29 196 123 194 65 219 81 108 73 234 33 23 237 125 226 173] [0m
--- PASS: Test_GetSaltByName_2 (0.00s)
	Admin_test.go:88: Test GetSaltByName, user exist
	Admin_test.go:93: salt: f1c0fb8578e356746e0f98ce07b7a27f , rand: 1dc47bc241db516c49ea2117ed7de2ad
=== RUN   Test_Logout_1
2017/05/14 16:37:51 [1;34m[D] [Logout]  uid: 100000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000`
2017/05/14 16:37:51 [1;31m[E] [Logout]  <Error> code: 1102, ( uid:100000 )
 [0m
--- PASS: Test_Logout_1 (0.00s)
	Admin_test.go:109: Test Logout, user not exist
=== RUN   Test_Logout_2
2017/05/14 16:37:51 [1;34m[D] [Logout]  uid: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.4ms] - [UPDATE `tbl_user` SET `session` = ? WHERE `id` = ?] - ``, `6`
--- PASS: Test_Logout_2 (0.00s)
	Admin_test.go:117: Test Logout, user exist
=== RUN   Test_FetchSms_1
2017/05/14 16:37:51 [1;34m[D] [FetchSms]  login user:  [0m
2017/05/14 16:37:51 [1;34m[D] [checkPhoneNo]  phone:  [0m
2017/05/14 16:37:51 [1;31m[E] [FetchSms]  <Error> code: 1301,  [0m
2017/05/14 16:37:51 [1;34m[D] [FetchSms]  login user: 12345678 [0m
2017/05/14 16:37:51 [1;34m[D] [checkPhoneNo]  phone: 12345678 [0m
2017/05/14 16:37:51 [1;31m[E] [FetchSms]  <Error> code: 1302,  [0m
2017/05/14 16:37:51 [1;34m[D] [FetchSms]  login user: 12345678901234 [0m
2017/05/14 16:37:51 [1;34m[D] [checkPhoneNo]  phone: 12345678901234 [0m
2017/05/14 16:37:51 [1;31m[E] [FetchSms]  <Error> code: 1302,  [0m
2017/05/14 16:37:51 [1;34m[D] [FetchSms]  login user: 1234567xyz9 [0m
2017/05/14 16:37:51 [1;34m[D] [checkPhoneNo]  phone: 1234567xyz9 [0m
2017/05/14 16:37:51 [1;31m[E] [FetchSms]  <Error> code: 1303, ( strconv.ParseInt: parsing "1234567xyz9": invalid syntax )
 [0m
2017/05/14 16:37:51 [1;34m[D] [FetchSms]  login user: 05306261804 [0m
2017/05/14 16:37:51 [1;34m[D] [checkPhoneNo]  phone: 05306261804 [0m
2017/05/14 16:37:51 [1;31m[E] [FetchSms]  <Error> code: 1304,  [0m
2017/05/14 16:37:51 [1;34m[D] [FetchSms]  login user: 25306261804 [0m
2017/05/14 16:37:51 [1;34m[D] [checkPhoneNo]  phone: 25306261804 [0m
2017/05/14 16:37:51 [1;31m[E] [FetchSms]  <Error> code: 1304,  [0m
--- PASS: Test_FetchSms_1 (0.00s)
	Admin_test.go:129: Test FetchSms, phone number incorrect
=== RUN   Test_FetchSms_2
--- PASS: Test_FetchSms_2 (0.00s)
	Admin_test.go:173: Test FetchSms, fail to post sms_code
=== RUN   Test_FetchSms_3
2017/05/14 16:37:51 [1;34m[D] [FetchSms]  login user: 15306261804 [0m
2017/05/14 16:37:51 [1;34m[D] [checkPhoneNo]  phone: 15306261804 [0m
2017/05/14 16:37:51 [1;34m[D] [generateSmsCode]  smsCode: 151515 [0m
2017/05/14 16:37:51 [1;33m[W] [postSms]  NOT Implement, please modify test code once it get implements [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `phone`, `sms_code`, `expire` FROM `tbl_sms_code` WHERE `phone` = ? ] - `15306261804`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.1ms] - [UPDATE `tbl_sms_code` SET `sms_code` = ?, `expire` = ? WHERE `id` = ?] - `151515`, `2017-05-14 16:47:51.64837847 +0800 +0800`, `1`
--- PASS: Test_FetchSms_3 (0.00s)
	Admin_test.go:185: Test FetchSms
	Admin_test.go:190: sms: 151515
=== RUN   Test_GetHouseListByType_1
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: -1 , begin: 0 , count: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( Invalid list type:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 4 , begin: 0 , count: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( Invalid list type:4 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 3 , begin: -1 , count: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( Invalid begin position:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 3 , begin: 0 , count: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( Invalid count:-1 )
 [0m
--- PASS: Test_GetHouseListByType_1 (0.00s)
	House_test.go:15: Test GetHouseListByType, Invalid Arguments
=== RUN   Test_getRecommendHouseList_1
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 1 , begin: 0 , count: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [getRecommendHouseList]  begin: 0 , count: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_recommend` T0 ]
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 1 , begin: 2 , count: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [getRecommendHouseList]  begin: 2 , count: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_house_recommend` T0 ]
2017/05/14 16:37:51 [1;31m[E] [getRecommendHouseList]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/05/14 16:37:51 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 1 , begin: 0 , count: 2 [0m
2017/05/14 16:37:51 [1;34m[D] [getRecommendHouseList]  begin: 0 , count: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_house_recommend` T0 ]
2017/05/14 16:37:51 [1;33m[W] [getRecommendHouseList]  TODO: all() will be restricted by limit, and return max 1000 records [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`house`, T0.`who`, T0.`when` FROM `tbl_house_recommend` T0 ORDER BY T0.`when` ASC LIMIT 2]
--- PASS: Test_getRecommendHouseList_1 (0.00s)
	House_test.go:46: Test getRecommendHouseList
	House_test.go:54: total: 2
	House_test.go:71: IDs: [1 2]
=== RUN   Test_getDeductedHouseList_1
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 2 , begin: 0 , count: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeductedHouseList]  begin: 0 , fetch_numb: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     1.2ms] - [SELECT COUNT(*) AS count FROM (SELECT p0.id as p0_id, p1.id as p1_id, p0.house_id, p0.rental_bid as p0_bid, p1.rental_bid as p1_bid 
							FROM (SELECT t0.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT min(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t0 
								ON rental.id=t0.id WHERE t0.id IS NOT NULL) AS p0, (SELECT t1.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT  max(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t1 
								ON rental.id=t1.id WHERE t1.id IS NOT NULL) AS p1 
							WHERE p0.house_id=p1.house_id 
							HAVING (p1_bid - p0_bid) < 0) AS tmp]
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 2 , begin: 1 , count: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeductedHouseList]  begin: 1 , fetch_numb: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.8ms] - [SELECT COUNT(*) AS count FROM (SELECT p0.id as p0_id, p1.id as p1_id, p0.house_id, p0.rental_bid as p0_bid, p1.rental_bid as p1_bid 
							FROM (SELECT t0.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT min(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t0 
								ON rental.id=t0.id WHERE t0.id IS NOT NULL) AS p0, (SELECT t1.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT  max(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t1 
								ON rental.id=t1.id WHERE t1.id IS NOT NULL) AS p1 
							WHERE p0.house_id=p1.house_id 
							HAVING (p1_bid - p0_bid) < 0) AS tmp]
2017/05/14 16:37:51 [1;31m[E] [getDeductedHouseList]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/05/14 16:37:51 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 2 , begin: 0 , count: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [getDeductedHouseList]  begin: 0 , fetch_numb: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     1.3ms] - [SELECT COUNT(*) AS count FROM (SELECT p0.id as p0_id, p1.id as p1_id, p0.house_id, p0.rental_bid as p0_bid, p1.rental_bid as p1_bid 
							FROM (SELECT t0.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT min(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t0 
								ON rental.id=t0.id WHERE t0.id IS NOT NULL) AS p0, (SELECT t1.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT  max(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t1 
								ON rental.id=t1.id WHERE t1.id IS NOT NULL) AS p1 
							WHERE p0.house_id=p1.house_id 
							HAVING (p1_bid - p0_bid) < 0) AS tmp]
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT p0.id as p0_id, p1.id as p1_id, p0.house_id, p0.rental_bid as p0_bid, p1.rental_bid as p1_bid 
							FROM (SELECT t0.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT min(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t0 
								ON rental.id=t0.id WHERE t0.id IS NOT NULL) AS p0, (SELECT t1.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT  max(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t1 
								ON rental.id=t1.id WHERE t1.id IS NOT NULL) AS p1 
							WHERE p0.house_id=p1.house_id 
							HAVING (p1_bid - p0_bid) < 0 LIMIT 0, 1]
--- PASS: Test_getDeductedHouseList_1 (0.00s)
	House_test.go:75: Test getDeductedHouseList
	House_test.go:83: total: 1
	House_test.go:100: IDs: [2]
=== RUN   Test_getNewHouseList_1
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 3 , begin: 0 , count: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  begin: 0 , fetch_numb: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  tNow: 2017-05-14 16:37:51.658101722 +0800 CST , UTC: 2017-05-14 08:37:51.658101722 +0000 UTC [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  tBegin: 2017-05-07 08:37:51.658101722 +0000 UTC [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  t0: 2017-05-07 00:00:00 +0000 UTC [0m
2017/05/14 16:37:51 [1;33m[W] [getNewHouseList]  TODO: need to check the real submit_time, UTC or Local? [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  sql: SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-07 00:00:00 +0000 UTC' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) AS count FROM (SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-07 00:00:00 +0000 UTC') AS tmp]
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 3 , begin: 1 , count: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  begin: 1 , fetch_numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  tNow: 2017-05-14 16:37:51.658818959 +0800 CST , UTC: 2017-05-14 08:37:51.658818959 +0000 UTC [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  tBegin: 2017-05-07 08:37:51.658818959 +0000 UTC [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  t0: 2017-05-07 00:00:00 +0000 UTC [0m
2017/05/14 16:37:51 [1;33m[W] [getNewHouseList]  TODO: need to check the real submit_time, UTC or Local? [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  sql: SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-07 00:00:00 +0000 UTC' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) AS count FROM (SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-07 00:00:00 +0000 UTC') AS tmp]
2017/05/14 16:37:51 [1;31m[E] [getNewHouseList]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/05/14 16:37:51 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseListByType]  type: 3 , begin: 0 , count: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  begin: 0 , fetch_numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  tNow: 2017-05-14 16:37:51.659234554 +0800 CST , UTC: 2017-05-14 08:37:51.659234554 +0000 UTC [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  tBegin: 2017-05-07 08:37:51.659234554 +0000 UTC [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  t0: 2017-05-07 00:00:00 +0000 UTC [0m
2017/05/14 16:37:51 [1;33m[W] [getNewHouseList]  TODO: need to check the real submit_time, UTC or Local? [0m
2017/05/14 16:37:51 [1;34m[D] [getNewHouseList]  sql: SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-07 00:00:00 +0000 UTC' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) AS count FROM (SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-07 00:00:00 +0000 UTC') AS tmp]
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-07 00:00:00 +0000 UTC' LIMIT 0, 1]
--- PASS: Test_getNewHouseList_1 (0.00s)
	House_test.go:104: Test getNewHouseList
	House_test.go:112: total: 1
	House_test.go:129: IDs: [2]
=== RUN   Test_GetBehalfList_1
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 0 , begin: -1 , tofetch: 0 , uid: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetBehalfList]  <Error> code: 1101, ( begin:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: -1 , uid: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetBehalfList]  <Error> code: 1101, ( tofetch:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: 0 , uid: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: false , bAdmin: false [0m
2017/05/14 16:37:51 [1;31m[E] [GetBehalfList]  <Error> code: 1106, ( uid:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: 0 , uid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: false , bAdmin: false [0m
2017/05/14 16:37:51 [1;31m[E] [GetBehalfList]  <Error> code: 1106, ( uid:2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: 0 , uid: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: false [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE agency_id='6'  AND for_rent=1]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  total: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  total: 3 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 3 , tofetch: 1 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  total: 3 [0m
2017/05/14 16:37:51 [1;31m[E] [GetBehalfList]  <Error> code: 1101, ( begin:3 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: 3 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  total: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT id FROM tbl_house WHERE  1 AND for_rent=1 LIMIT 0, 3]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 1 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1 AND rent_stat=1]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  total: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 1 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1 AND rent_stat=1]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  total: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 2 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1 AND rent_stat=2]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  total: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 2 , begin: 0 , tofetch: 1 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1 AND rent_stat=2]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  total: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT id FROM tbl_house WHERE  1 AND for_rent=1 AND rent_stat=2 LIMIT 0, 1]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 3 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_sale=1]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  total: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  typ: 3 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_sale=1]
2017/05/14 16:37:51 [1;34m[D] [GetBehalfList]  total: 0 [0m
--- PASS: Test_GetBehalfList_1 (0.03s)
	House_test.go:137: Test GetBehalfList, Invalid Arguments
	House_test.go:139: <Case> begin position < 0
	House_test.go:145: <Case> fetch count < 0
	House_test.go:151: <Case> login user has no right to access, neither agency nor administrator
	House_test.go:157: <Case> login user is house owner himself
	House_test.go:163: <Case> login user is a agency
	House_test.go:169: total: 1
	House_test.go:171: <Case> login user is a administrator
	House_test.go:177: total: 3
	House_test.go:179: <Case> begin position beyond total
	House_test.go:185: <Case> all behalfed houses
	House_test.go:187: fetched: 3 , houses: [3 4 6]
	House_test.go:193: <Case> all behalfed houses to rent
	House_test.go:199: total: 0
	House_test.go:201: fetched: 0 , houses: []
	House_test.go:207: <Case> all behalfed houses rented
	House_test.go:213: total: 1
	House_test.go:215: fetched: 1 , houses: [3]
	House_test.go:221: <Case> all behalfed houses to sale
	House_test.go:227: total: 0
	House_test.go:229: fetched: 0 , houses: []
=== RUN   Test_GetHouseDigestInfo
2017/05/14 16:37:51 [1;34m[D] [GetHouseDigestInfo]  hid: 10000000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT house.id AS id, prop.name AS property, address AS property_addr, bedrooms, 
								livingrooms, bathrooms, acreage, cover_img 
							FROM tbl_house AS house, tbl_property AS prop 
							WHERE house.property_id=prop.id AND house.id=10000000000]
2017/05/14 16:37:51 [1;31m[E] [GetHouseDigestInfo]  <Error> code: 1103, ( <QuerySeter> no row found )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseDigestInfo]  hid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT house.id AS id, prop.name AS property, address AS property_addr, bedrooms, 
								livingrooms, bathrooms, acreage, cover_img 
							FROM tbl_house AS house, tbl_property AS prop 
							WHERE house.property_id=prop.id AND house.id=2]
2017/05/14 16:37:51 [1;34m[D] [getHouseRental]  hid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`house_id`, T0.`rental_bid`, T0.`rental_bottom`, T0.`who`, T0.`when`, T0.`active` FROM `tbl_rental` T0 WHERE T0.`house_id` = ? AND T0.`active` = ? ORDER BY T0.`id` ASC LIMIT 1000] - `2`, `true`
2017/05/14 16:37:51 [1;34m[D] [getHouseRental]  rs: [{4 2 150000 140000 2 2017-01-22 13:49:10 +0000 UTC true} {5 2 140000 130000 2 2017-01-23 12:16:17 +0000 UTC true}] [0m
2017/05/14 16:37:51 [1;34m[D] [getHouseTags]  hid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT htags.tag AS tag_id, tags.tag AS tag_desc
							FROM tbl_house_tag AS htags, tbl_tag AS tags 
							WHERE htags.tag=tags.id AND house=2]
2017/05/14 16:37:51 [1;34m[D] [getHouseTags]  tags: [{2 Âú∞ÈìÅÊàø}] [0m
--- PASS: Test_GetHouseDigestInfo (0.00s)
	House_test.go:241: Test GetHouseDigestInfo
	House_test.go:243: <Case> house does not exist
	House_test.go:249: <Case> house actual exist
	House_test.go:255: house: {Id:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† PropertyAddr:ÈïøÊ±üÂçóË∑Ø 666Âè∑ Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 Rental:140000 Pricing:-10000 CoverImg:31 Tags:[{TagId:2 TagDesc:Âú∞ÈìÅÊàø}]}
=== RUN   Test_GetHouseInfo
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 10000000000 , login user: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `10000000000`
2017/05/14 16:37:51 [1;31m[E] [GetHouseInfo]  <Error> code: 1102, ( hid:10000000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 2 , login user: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: false [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: false [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 4 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
--- PASS: Test_GetHouseInfo (0.01s)
	House_test.go:263: Test GetHouseInfo
	House_test.go:265: <Case> house does not exist
	House_test.go:271: <Case> house exist, No private info, user not login
	House_test.go:277: house: {Id:2 Property:2 BuildingNo:0 FloorTotal:35 FloorThis:37 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false}
	House_test.go:283: <Case> house exist, No private info, login user do not have right to access
	House_test.go:289: house: {Id:2 Property:2 BuildingNo:0 FloorTotal:35 FloorThis:37 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false}
	House_test.go:295: <Case> house exist, with private info, login user is owner
	House_test.go:301: house: {Id:2 Property:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false}
	House_test.go:307: <Case> house exist, with private info, login user is agency
	House_test.go:313: house: {Id:4 Property:2 BuildingNo:56 FloorTotal:32 FloorThis:16 HouseNo:1605 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 ForSale:false ForRent:false}
	House_test.go:319: <Case> house exist, with private info, login user is administrator
	House_test.go:325: house: {Id:2 Property:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false}
=== RUN   Test_ModifyHouse
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:0 BuildingNo:0 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( property:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:-1 BuildingNo:0 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( property:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:0 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( building_no:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:-1 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( building_no:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( floor_total:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:-1 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( floor_total:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( floor_this:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:-1 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( floor_this:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:36 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( floor_this:36 > FloorTotal:35 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:-1 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( bedrooms:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:-1 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( livingrooms:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:-1 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( bathrooms:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( Bedrooms:0, Livingrooms:0, bathrooms:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:100 ForSale:false ForRent:false} , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( acreage:100 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:100000000 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false} , login user: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:200000000 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false} , login user: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 200000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `200000000`
2017/05/14 16:37:51 [1;31m[E] [GetPropertyInfo]  <Error> code: 1102, ( <QuerySeter> no row found )
 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( Property:200000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:1 BuildingNo:177 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false} , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `1`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `1`, `177`, `1505`
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  h.Id: 3 , hif.Id: 2 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1105, ( property:1, building:177, house:1505 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false} , login user: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false} , login user: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     2.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyHouse]  <Error> code: 1106, ( uid:2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:200 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false} , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `2`, `200`, `1505`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.2ms] - [UPDATE tbl_house SET property_id=2, building_no=200, floor_total=35, floor_this=15,
								house_no='1505', bedrooms=2, livingrooms=1, bathrooms=1, acreage=10000, 
								modify_time='2017-5-14 16:37:51', for_sale=false, for_rent=false WHERE id=2]
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:201 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false} , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `2`, `201`, `1505`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.2ms] - [UPDATE tbl_house SET property_id=2, building_no=201, floor_total=35, floor_this=15,
								house_no='1505', bedrooms=2, livingrooms=1, bathrooms=1, acreage=10000, 
								modify_time='2017-5-14 16:37:51', for_sale=false, for_rent=false WHERE id=2]
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     2.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false} , login user: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `2`, `199`, `1505`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.8ms] - [UPDATE tbl_house SET property_id=2, building_no=199, floor_total=35, floor_this=15,
								house_no='1505', bedrooms=2, livingrooms=1, bathrooms=1, acreage=10000, 
								modify_time='2017-5-14 16:37:51', for_sale=false, for_rent=false WHERE id=2]
2017/05/14 16:37:51 [1;34m[D] [ModifyHouse]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
--- PASS: Test_ModifyHouse (0.04s)
	House_test.go:337: Test ModifyHouse
	House_test.go:339: <Case> invalid arguments: property == 0
	House_test.go:346: <Case> invalid arguments: property < 0
	House_test.go:353: <Case> invalid arguments: building_no = 0
	House_test.go:360: <Case> invalid arguments: building_no < 0
	House_test.go:367: <Case> invalid arguments: FloorTotal = 0
	House_test.go:374: <Case> invalid arguments: FloorTotal < 0
	House_test.go:381: <Case> invalid arguments: FloorThis = 0
	House_test.go:388: <Case> invalid arguments: FloorThis < 0
	House_test.go:395: <Case> invalid arguments: FloorThis > FloorTotal
	House_test.go:402: <Case> invalid arguments: Bedrooms < 0
	House_test.go:409: <Case> invalid arguments: Livingrooms < 0
	House_test.go:416: <Case> invalid arguments: Bathrooms < 0
	House_test.go:424: <Case> invalid arguments: Bathrooms, livingrooms, bedrooms are all 0
	House_test.go:432: <Case> invalid arguments: Acreage <= 100
	House_test.go:440: <Case> house does not exist
	House_test.go:448: <Case> property does not exist
	House_test.go:456: <Case> house duplicated
	House_test.go:464: <Case> user not login
	House_test.go:472: <Case> login have no right to modify
	House_test.go:484: <Case> login user is Landlord
	House_test.go:490: house: {Id:2 Property:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false}
	House_test.go:497: house: {Id:2 Property:2 BuildingNo:200 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false}
	House_test.go:508: building no:(before) 199 , (after) 200
	House_test.go:484: <Case> login user is Agency
	House_test.go:490: house: {Id:2 Property:2 BuildingNo:200 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false}
	House_test.go:497: house: {Id:2 Property:2 BuildingNo:201 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false}
	House_test.go:508: building no:(before) 200 , (after) 201
	House_test.go:484: <Case> login user is Administrator
	House_test.go:490: house: {Id:2 Property:2 BuildingNo:201 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false}
	House_test.go:497: house: {Id:2 Property:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false}
	House_test.go:508: building no:(before) 201 , (after) 199
=== RUN   Test_SetHouseAgency
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  house: 100000000 , agency: -1 , login user: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [SetHouseAgency]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  house: 2 , agency: -1 , login user: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;31m[E] [SetHouseAgency]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 100000000 , login user: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [SetHouseAgency]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 5 , login user: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [SetHouseAgency]  <Error> code: 1106, ( luid:2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 5 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [SetHouseAgency]  <Error> code: 1106, ( luid:6 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 5 , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [UPDATE `tbl_house` T0 SET T0.`agency_id` = ? WHERE T0.`id` = ? ] - `5`, `2`
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 6 , login user: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.4ms] - [UPDATE `tbl_house` T0 SET T0.`agency_id` = ? WHERE T0.`id` = ? ] - `6`, `2`
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 5 , login user: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.7ms] - [UPDATE `tbl_house` T0 SET T0.`agency_id` = ? WHERE T0.`id` = ? ] - `5`, `2`
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 6 , login user: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.5ms] - [UPDATE `tbl_house` T0 SET T0.`agency_id` = ? WHERE T0.`id` = ? ] - `6`, `2`
2017/05/14 16:37:51 [1;34m[D] [SetHouseAgency]  numb: 1 [0m
--- PASS: Test_SetHouseAgency (0.02s)
	House_test.go:521: Test SetHouseAgency
	House_test.go:523: <Case> invalid arguments: house does not exist
	House_test.go:529: <Case> invalid arguments: agency < 0
	House_test.go:535: <Case> invalid arguments: agency does not exist
	House_test.go:542: <Case> permission: regular people have no right to set agency
	House_test.go:548: <Case> permission: agency have no right to set agency
	House_test.go:554: <Case> permission: landlord have right to set agency
	House_test.go:561: <Case> permission: administrator have right to set agency
=== RUN   Test_SetHouseCoverImage
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  hid: 100000000 , cid: -1 , uid: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 0 , uid: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1101, ( iid:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 100000000 , uid: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1102, ( iid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 30 , uid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `30`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1106, ( uid:2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 30 , uid: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `30`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `30`, `2`
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 31 , uid: 9 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `31`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `31`, `2`
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 30 , uid: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `30`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.8ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `30`, `2`
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 31 , uid: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `31`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.4ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `31`, `2`
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 30 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `30`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `30`, `2`
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 31 , uid: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `31`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.2ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `31`, `2`
2017/05/14 16:37:51 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
--- PASS: Test_SetHouseCoverImage (0.02s)
	House_test.go:574: Test SetHouseCoverImage
	House_test.go:576: <Case> invalid arguments: house does not exist
	House_test.go:582: <Case> invalid arguments: picture <= 0
	House_test.go:588: <Case> invalid arguments: picture does not exist
	House_test.go:595: <Case> permission: regular user can not set cover image
	House_test.go:601: <Case> permission: landload have right to set cover image
	House_test.go:608: <Case> permission: agency have right to set cover image
	House_test.go:615: <Case> permission: administrator have right to set cover image
=== RUN   Test_CertHouse
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  hid: 100000000 , uid: -1 , pass: false , comment: test [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [CertHouse]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  hid: 2 , uid: -1 , pass: false , comment:  [0m
2017/05/14 16:37:51 [1;31m[E] [CertHouse]  <Error> code: 1101, ( No comments )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  hid: 2 , uid: -1 , pass: true , comment: test pass [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;31m[E] [CertHouse]  <Error> code: 1101, ( already published )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  hid: 2 , uid: -1 , pass: false , comment: test pass [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [CertHouse]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  hid: 2 , uid: 9 , pass: false , comment: test pass [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CertHouse]  <Error> code: 1106, ( uid:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  hid: 2 , uid: 2 , pass: false , comment: test pass [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CertHouse]  <Error> code: 1106, ( uid:2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  hid: 2 , uid: 6 , pass: false , comment: test pass [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Begin /     0.0ms] - [START TRANSACTION]
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.4ms] - [INSERT INTO `tbl_house_cert` (`house`, `who`, `when`, `comment`, `pass`) VALUES (?, ?, ?, ?, ?)] - `2`, `6`, `2017-05-14 16:37:51.788561136 +0800 +0800`, `test pass`, `false`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.3ms] - [UPDATE tbl_house SET publish_time=NULL WHERE id=2]
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  affect 1 records [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /   tx.Commit /     0.8ms] - [COMMIT]
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  hid: 2 , uid: 6 , pass: true , comment: certification passed [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Begin /     0.0ms] - [START TRANSACTION]
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.6ms] - [INSERT INTO `tbl_house_cert` (`house`, `who`, `when`, `comment`, `pass`) VALUES (?, ?, ?, ?, ?)] - `2`, `6`, `2017-05-14 16:37:51.792097689 +0800 +0800`, `certification passed`, `true`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.2ms] - [UPDATE tbl_house SET publish_time='2017-5-14 16:37:51' WHERE id=2]
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  affect 1 records [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /   tx.Commit /     0.9ms] - [COMMIT]
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  hid: 2 , uid: 4 , pass: false , comment: test pass [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Begin /     0.1ms] - [START TRANSACTION]
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.5ms] - [INSERT INTO `tbl_house_cert` (`house`, `who`, `when`, `comment`, `pass`) VALUES (?, ?, ?, ?, ?)] - `2`, `4`, `2017-05-14 16:37:51.796061128 +0800 +0800`, `test pass`, `false`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.3ms] - [UPDATE tbl_house SET publish_time=NULL WHERE id=2]
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  affect 1 records [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /   tx.Commit /     1.3ms] - [COMMIT]
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  hid: 2 , uid: 4 , pass: true , comment: certification passed [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Begin /     0.4ms] - [START TRANSACTION]
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.4ms] - [INSERT INTO `tbl_house_cert` (`house`, `who`, `when`, `comment`, `pass`) VALUES (?, ?, ?, ?, ?)] - `2`, `4`, `2017-05-14 16:37:51.800919055 +0800 +0800`, `certification passed`, `true`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.3ms] - [UPDATE tbl_house SET publish_time='2017-5-14 16:37:51' WHERE id=2]
2017/05/14 16:37:51 [1;34m[D] [CertHouse]  affect 1 records [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /   tx.Commit /     0.9ms] - [COMMIT]
--- PASS: Test_CertHouse (0.02s)
	House_test.go:628: Test CertHouse
	House_test.go:630: <Case> invalid arguments: house does not exist
	House_test.go:636: <Case> invalid arguments: no comment
	House_test.go:642: <Case> invalid arguments: already published
	House_test.go:648: <Case> permission: user not login
	House_test.go:654: <Case> permission: login user is landlord
	House_test.go:660: <Case> permission: login user is nither agency nor administrator
	House_test.go:666: <Case> login user is agency, revoke certification
	House_test.go:671: <Case> login user is agency, pass certification
	House_test.go:677: <Case> login user is administrator, revoke certification
	House_test.go:683: <Case> login user is administrator, pass certification
=== RUN   Test_RecommendHouse
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 100000000 , act: 1 , login user: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [RecommendHouse]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;31m[E] [RecommendHouse]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [RecommendHouse]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 2 , act: 3 , login user: 9 [0m
2017/05/14 16:37:51 [1;31m[E] [RecommendHouse]  <Error> code: 1101, ( act:3 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 2 , act: 3 , login user: 2 [0m
2017/05/14 16:37:51 [1;31m[E] [RecommendHouse]  <Error> code: 1101, ( act:3 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 2 , act: 3 , login user: 6 [0m
2017/05/14 16:37:51 [1;31m[E] [RecommendHouse]  <Error> code: 1101, ( act:3 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 2 , act: 3 , login user: 4 [0m
2017/05/14 16:37:51 [1;31m[E] [RecommendHouse]  <Error> code: 1101, ( act:3 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 4 , act: 2 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [RecommendHouse]  <Error> code: 1106, ( house not published )
 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  Recommend house: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `who`, `when` FROM `tbl_house_recommend` WHERE `house` = ? ] - `2`
2017/05/14 16:37:51 [1;31m[E] [RecommendHouse]  <Error> code: 1105, ( hid:2 already been recommended )
 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 2 , act: 2 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  Unrecommend house: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `who`, `when` FROM `tbl_house_recommend` WHERE `house` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.1ms] - [DELETE FROM `tbl_house_recommend` WHERE `id` = ?] - `152`
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  Recommend house: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `who`, `when` FROM `tbl_house_recommend` WHERE `house` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.7ms] - [INSERT INTO `tbl_house_recommend` (`house`, `who`, `when`) VALUES (?, ?, ?)] - `2`, `6`, `2017-05-14 16:37:51.815173669 +0800 +0800`
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  house: 6 , act: 2 , login user: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [RecommendHouse]  Unrecommend house: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `who`, `when` FROM `tbl_house_recommend` WHERE `house` = ? ] - `6`
2017/05/14 16:37:51 [1;31m[E] [RecommendHouse]  <Error> code: 1101, ( hid:6 )
 [0m
--- PASS: Test_RecommendHouse (0.02s)
	House_test.go:695: Test RecommendHouse
	House_test.go:697: <Case> invalid arguments: house does not exist
	House_test.go:703: <Case> permission: no user login
	House_test.go:709: <Case> permission: login user does not exist
	House_test.go:715: <Case> permission: login user is landlord
	House_test.go:721: <Case> permission: login user is nither agency nor administrator
	House_test.go:727: <Case> invalid arguments: action
	House_test.go:737: <Case> permission: house not published
	House_test.go:743: <Case> invalid arguments: house has been recommended
	House_test.go:749: <Case> unrecommend house
	House_test.go:755: <Case> recommend house
	House_test.go:761: <Case> invalid arguments: house not been recommended
=== RUN   Test_CommitHouseByOwner
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:0 BuildingNo:0 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( property:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:-1 BuildingNo:0 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( property:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:0 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( building_no:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:-1 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( building_no:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( floor_total:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:-1 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( floor_total:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( floor_this:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:-2 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( floor_this:-2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:36 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( floor_this:36 > FloorTotal:35 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:-1 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( bedrooms:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:-1 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( livingrooms:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:-1 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( bathrooms:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( Bedrooms:0, Livingrooms:0, bathrooms:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:100 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( acreage:100 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:200000000 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false} , owner: 9 , agency: -1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 200000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `200000000`
2017/05/14 16:37:51 [1;31m[E] [GetPropertyInfo]  <Error> code: 1102, ( <QuerySeter> no row found )
 [0m
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( Property:200000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false} , owner: -1 , agency: -1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( owner:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false} , owner: 900000000 , agency: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `900000000`
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( owner:900000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false} , owner: 9 , agency: -1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( agency:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false} , owner: 9 , agency: 100000000 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( agency:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:56 FloorTotal:45 FloorThis:16 HouseNo:1605 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false} , owner: 9 , agency: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? ] - `2`, `56`, `1605`
2017/05/14 16:37:51 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1105, ( property:2, building:56, house:1605 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:7 BuildingNo:156 FloorTotal:45 FloorThis:26 HouseNo:2605 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12400 ForSale:false ForRent:false} , owner: 9 , agency: 6 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 7 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `7`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT COUNT(*) FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? ] - `7`, `156`, `2605`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.0ms] - [INSERT INTO tbl_house(property_id, building_no, house_no, floor_total, floor_this, bedrooms, livingrooms, 
									bathrooms, acreage, owner_id, agency_id, submit_time, for_sale, for_rent) 
							VALUES(7, 156, '2605', 45, 26, 2, 1, 1, 12400, 9, 6, '2017-5-14 16:37:51', false, false)]
2017/05/14 16:37:51 [1;33m[W] [CommitHouseByOwner]  post a message to house agency or administrator if no agency assigned [0m
2017/05/14 16:37:51 [1;34m[D] [delHouse]  house: 9 , login user: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;33m[W] [delHouse]  checking house relation or just delete all of them along with house [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     0.6ms] - [DELETE FROM `tbl_house` WHERE `id` = ?] - `9`
--- PASS: Test_CommitHouseByOwner (0.01s)
	House_test.go:773: Test CommitHouseByOwner
	House_test.go:775: <Case> invalid arguments: property == 0
	House_test.go:782: <Case> invalid arguments: property < 0
	House_test.go:789: <Case> invalid arguments: building_no = 0
	House_test.go:796: <Case> invalid arguments: building_no < 0
	House_test.go:803: <Case> invalid arguments: FloorTotal = 0
	House_test.go:810: <Case> invalid arguments: FloorTotal < 0
	House_test.go:817: <Case> invalid arguments: FloorThis = 0
	House_test.go:824: <Case> invalid arguments: FloorThis < 0
	House_test.go:831: <Case> invalid arguments: FloorThis > FloorTotal
	House_test.go:838: <Case> invalid arguments: Bedrooms < 0
	House_test.go:845: <Case> invalid arguments: Livingrooms < 0
	House_test.go:852: <Case> invalid arguments: Bathrooms < 0
	House_test.go:860: <Case> invalid arguments: Bathrooms, livingrooms, bedrooms are all 0
	House_test.go:868: <Case> invalid arguments: Acreage <= 100
	House_test.go:876: <Case> invalid arguments: property does not exist
	House_test.go:884: <Case> invalid arguments: house owner
	House_test.go:896: <Case> invalid arguments: house agency
	House_test.go:906: <Case> invalid arguments: house duplicated
	House_test.go:914: <Case> commit new house
	House_test.go:922: new house: 9
=== RUN   Test_AddPicture
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: -1 , user: -1 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 100000000 , user: -1 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: -1 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1106, ( user:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 100000000 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1106, ( user:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 9 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1106, ( user:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 6 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1106, ( user:6 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture base dir: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: -1 , desc:  , md5:  , pic file:  , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture file name: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: -1 , desc:  , md5:  , pic file: abc , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture file name:abc )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: -1 , desc:  , md5:  , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture desc: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: -1 , desc: picture desc , md5:  , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture md5: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 0 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picType:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 99 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[D] [checkPictureType]  Major: 0 , minor: 99 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101,  [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 100 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[D] [checkPictureType]  Major: 100 , minor: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1001,  [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 300 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[D] [checkPictureType]  Major: 300 , minor: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1001,  [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 301 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[D] [checkPictureType]  Major: 300 , minor: 1 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1001,  [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 200 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[D] [checkPictureType]  Major: 200 , minor: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101,  [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 204 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[D] [checkPictureType]  Major: 200 , minor: 4 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture(./pics/ab.c) does not exist )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 0 , user: 10 , picture type: 203 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
2017/05/14 16:37:51 [1;34m[D] [checkPictureType]  Major: 200 , minor: 3 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture(./pics/ab.c) does not exist )
 [0m
2017/05/14 16:37:51 [1;34m[D] src: ./test.jpg , new file: ./test_1494751071843584342.jpg [0m
2017/05/14 16:37:51 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 202 , desc: picture desc , md5: abcdefghijklmn , pic file: ./test_1494751071843584342.jpg , base dir: ./ [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[D] [checkPictureType]  Major: 200 , minor: 2 [0m
2017/05/14 16:37:51 [1;31m[E] [AddPicture]  <Error> code: 1001,  [0m
--- FAIL: Test_AddPicture (0.01s)
	pictures_test.go:17: Test AddPicture
	pictures_test.go:20: <Case 1> Invalid Argument: house < 0
	pictures_test.go:27: <Case 2> Invalid Argument: house does not exist
	pictures_test.go:34: <Case 3> Permission: user not login
	pictures_test.go:41: <Case 4> Permission: user does not exist
	pictures_test.go:48: <Case 5> Permission: user is a regular user
	pictures_test.go:55: <Case 6> Permission: user is an agency, but not for this house
	pictures_test.go:83: <Case 7> Invalid Argument: base dir not set
	pictures_test.go:90: <Case 8> Invalid Argument: picture file name not set
	pictures_test.go:92: picBaseDir: ./pics/
	pictures_test.go:99: <Case 9> Invalid Argument: picture file name do not include char '.'
	pictures_test.go:106: <Case 10> Invalid Argument: picture desc not set
	pictures_test.go:113: <Case 11> Invalid Argument: picture md5 not set
	pictures_test.go:124: <Case 12> Invalid Argument: <type> major: 0 , minor: 0
	pictures_test.go:132: <Case 13> Invalid Argument: <type> major: 99 , minor: 0
	pictures_test.go:140: <Case 14> Invalid Argument: <type> major: 100 , minor: 0
	pictures_test.go:148: <Case 15> Invalid Argument: <type> major: 300 , minor: 0
	pictures_test.go:156: <Case 16> Invalid Argument: <type> major: 301 , minor: 0
	pictures_test.go:165: <Case 17> Invalid Argument: <type> major: 200 , minor: 0
	pictures_test.go:174: <Case 18> Invalid Argument: <type> major: 200 , minor: 4
	pictures_test.go:181: <Case 19> Invalid Argument: PIC_TYPE_HOUSE but house is not set
	pictures_test.go:189: <Case 20> Add house picture
	pictures_test.go:197: new picture: ./test_1494751071843584342.jpg
	pictures_test.go:200: Failed, err:  <Error> code: 1001, 
=== RUN   Test_DelImage
2017/05/14 16:37:51 [1;34m[D] [DelImage]  image: -1 , login user: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [DelImage]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelImage]  image: -1 , login user: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/05/14 16:37:51 [1;31m[E] [DelImage]  <Error> code: 1102, ( uid:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelImage]  image: -1 , login user: 11 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
2017/05/14 16:37:51 [1;31m[E] [DelImage]  <Error> code: 1101, ( pic:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelImage]  image: 0 , login user: 11 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
2017/05/14 16:37:51 [1;31m[E] [DelImage]  <Error> code: 1101, ( pic:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelImage]  image: 100000000 , login user: 11 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [DelImage]  <Error> code: 1101, ( pic:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelImage]  image: 38 , login user: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `38`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:38 TypeMajor:200 TypeMiner:2 RefId:3 Desc:picture desc Md5: Submit:2017-05-08 13:07:08 +0000 UTC} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [DelImage]  <Error> code: 1106, ( login user:2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [DelImage]  image: 38 , login user: 6 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `38`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:38 TypeMajor:200 TypeMiner:2 RefId:3 Desc:picture desc Md5: Submit:2017-05-08 13:07:08 +0000 UTC} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [DelImage]  <Error> code: 1106, ( login user:6 )
 [0m
2017/05/14 16:37:51 [1;33m[W] [Test_DelImage] TODO: add cases for other picture type [0m
--- PASS: Test_DelImage (0.01s)
	pictures_test.go:273: Test DelImage
	pictures_test.go:277: <Case 1> Permission: user not login
	pictures_test.go:284: <Case 2> Permission: user is system
	pictures_test.go:291: <Case 3> Invalid Argument: pic < 0
	pictures_test.go:298: <Case 4> Invalid Argument: pic = 0
	pictures_test.go:305: <Case 5> Invalid Argument: pic does not exist
	pictures_test.go:312: <Case 6> Permission: user is a regular user
	pictures_test.go:319: <Case 7> Permission: user is an agency, but not for this house
	pictures_test.go:324: Please ref to Test_AddPicture for actual picture deleting
=== RUN   Test_GetPicUrl
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: -1 , login user: -1 , size: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetPicUrl]  <Error> code: 1101, ( pic:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 0 , login user: -1 , size: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetPicUrl]  <Error> code: 1101, ( pic:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 100000000 , login user: -1 , size: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [GetPicUrl]  <Error> code: 1101, ( pic:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 50 , login user: -1 , size: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `50`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:50 TypeMajor:200 TypeMiner:3 RefId:3 Desc:gjsg Md5: Submit:2017-05-11 14:11:34 +0000 UTC} [0m
2017/05/14 16:37:51 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/05/14 16:37:51 [1;31m[E] [GetPicUrl]  <Error> code: 1101, ( size:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 50 , login user: -1 , size: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `50`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:50 TypeMajor:200 TypeMiner:3 RefId:3 Desc:gjsg Md5: Submit:2017-05-11 14:11:34 +0000 UTC} [0m
2017/05/14 16:37:51 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/05/14 16:37:51 [1;31m[E] [GetPicUrl]  <Error> code: 1101, ( size:5 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 50 , login user: -1 , size: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `50`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:50 TypeMajor:200 TypeMiner:3 RefId:3 Desc:gjsg Md5: Submit:2017-05-11 14:11:34 +0000 UTC} [0m
2017/05/14 16:37:51 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='50' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='50']
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  numb: 3 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 1 201705/11221134007105.jpg} [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 2 201705/11221134007105_s.jpg} [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 4 201705/11221134007105_l.jpg} [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 39 , login user: -1 , size: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `39`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:39 TypeMajor:200 TypeMiner:1 RefId:3 Desc:testgG Md5: Submit:2017-05-09 12:50:43 +0000 UTC} [0m
2017/05/14 16:37:51 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=2]
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 2 201705/09205042333958_s.jpg} [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 39 , login user: -1 , size: 3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `39`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:39 TypeMajor:200 TypeMiner:1 RefId:3 Desc:testgG Md5: Submit:2017-05-09 12:50:43 +0000 UTC} [0m
2017/05/14 16:37:51 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=3 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=3]
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  numb: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 39 , login user: -1 , size: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `39`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:39 TypeMajor:200 TypeMiner:1 RefId:3 Desc:testgG Md5: Submit:2017-05-09 12:50:43 +0000 UTC} [0m
2017/05/14 16:37:51 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=4]
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 4 201705/09205042333958_l.jpg} [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 61 , login user: -1 , size: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMiner:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
2017/05/14 16:37:51 [1;31m[E] [GetPicUrl]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 61 , login user: 100000000 , size: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMiner:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [GetPicUrl]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 61 , login user: 9 , size: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMiner:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetPicUrl]  <Error> code: 1106, ( login user:9 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 61 , login user: 11 , size: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMiner:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetPicUrl]  <Error> code: 1106, ( login user:11 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 61 , login user: 4 , size: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMiner:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='61' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='61']
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  numb: 3 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 1 201705/13151958199739.jpg} [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 2 201705/13151958199739_s.jpg} [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 4 201705/13151958199739_l.jpg} [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 33 , login user: 4 , size: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `33`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:33 TypeMajor:200 TypeMiner:2 RefId:4 Desc:ÂÆ¢ÂéÖ Md5: Submit:2017-02-12 02:07:21 +0000 UTC} [0m
2017/05/14 16:37:51 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='33' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='33']
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  numb: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  picture: 61 , login user: 5 , size: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type_major`, `type_miner`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/05/14 16:37:51 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMiner:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.8ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='61' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='61']
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  numb: 3 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 1 201705/13151958199739.jpg} [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 2 201705/13151958199739_s.jpg} [0m
2017/05/14 16:37:51 [1;34m[D] [GetPicUrl]  v: {0 0 4 201705/13151958199739_l.jpg} [0m
--- PASS: Test_GetPicUrl (0.02s)
	pictures_test.go:336: Test GetPicUrl
	pictures_test.go:339: <Case 1> Invalid Argument: picture < 0
	pictures_test.go:346: <Case 2> Invalid Argument: picture = 0
	pictures_test.go:353: <Case 3> Invalid Argument: picture does not exist
	pictures_test.go:360: <Case 4> Invalid Argument: picture size < PIC_SIZE_ALL
	pictures_test.go:367: <Case 5> Invalid Argument: picture size > PIC_SIZE_LARGE
	pictures_test.go:374: <Case 6> Get urls of all size
	pictures_test.go:380: 
		small:	 201705/11221134007105_s.jpg 
		middle:	  
		large:	 201705/11221134007105_l.jpg
	pictures_test.go:383: <Case 7> Get url of small
	pictures_test.go:389: 
		small:	 201705/09205042333958_s.jpg 
		middle:	  
		large:	 
	pictures_test.go:396: <Case 8> Get url of middle
	pictures_test.go:402: 
		small:	  
		middle:	  
		large:	 
	pictures_test.go:409: <Case 9> Get url of large
	pictures_test.go:415: 
		small:	  
		middle:	  
		large:	 201705/09205042333958_l.jpg
	pictures_test.go:423: <Case 10> Permission: user not login
	pictures_test.go:430: <Case 11> Permission: user does not exist
	pictures_test.go:437: <Case 12> Permission: user is a regular user
	pictures_test.go:444: <Case 13> Permission: user is an agency, but not behalf this house
	pictures_test.go:451: <Case 14> Permission: user is an agency who stand for this house
	pictures_test.go:458: <Case 15> Permission: user is an landlord
	pictures_test.go:465: <Case 16> Permission: user is an administrator
	pictures_test.go:471: **** Check permission for other picture type ****
=== RUN   Test_GetHousePicList
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: -1 , login user: -1 , sub type: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetHousePicList]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 0 , login user: -1 , sub type: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetHousePicList]  <Error> code: 1101, ( hid:0 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 100000000 , login user: -1 , sub type: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [GetHousePicList]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 3 , login user: -1 , sub type: -1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     1.0ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [GetHousePicList]  <Error> code: 1101, ( subType:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 3 , login user: -1 , sub type: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;31m[E] [GetHousePicList]  <Error> code: 1101, ( subType:5 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 3 , login user: -1 , sub type: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420227680 ForSale:false ForRent:true RentStat:2 Owner:0xc42022e460 Agency:0xc42022e500 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: -1 , subType: 4 [0m
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [getHousePicSubtypes]  sub-type list: [] [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 3 , login user: 100000000 , sub type: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420227950 ForSale:false ForRent:true RentStat:2 Owner:0xc42022e5a0 Agency:0xc42022e640 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 100000000 , subType: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [getHousePicSubtypes]  sub-type list: [] [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 3 , login user: 9 , sub type: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420227c70 ForSale:false ForRent:true RentStat:2 Owner:0xc42022e820 Agency:0xc42022e8c0 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 9 , subType: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [getHousePicSubtypes]  sub-type list: [] [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 3 , login user: 6 , sub type: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420227ef0 ForSale:false ForRent:true RentStat:2 Owner:0xc42022eb40 Agency:0xc42022ebe0 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 6 , subType: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [getHousePicSubtypes]  sub-type list: [] [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 3 , login user: 4 , sub type: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc4201de190 ForSale:false ForRent:true RentStat:2 Owner:0xc42022ee60 Agency:0xc42022ef00 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 4 , subType: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [getHousePicSubtypes]  sub-type list: [4] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_miner`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_miner` IN (?) AND T0.`ref_id` = ? ORDER BY T0.`type_miner` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `4`, `3`
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]   1 pictures [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 3 , login user: 10 , sub type: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc4201de500 ForSale:false ForRent:true RentStat:2 Owner:0xc42022f180 Agency:0xc42022f220 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 10 , subType: 4 [0m
2017/05/14 16:37:51 [1;34m[D] [getHousePicSubtypes]  sub-type list: [4] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_miner`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_miner` IN (?) AND T0.`ref_id` = ? ORDER BY T0.`type_miner` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `4`, `3`
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]   1 pictures [0m
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]  house: 3 , login user: 5 , sub type: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/05/14 16:37:51 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc4201de870 ForSale:false ForRent:true RentStat:2 Owner:0xc42022f2c0 Agency:0xc42022f360 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 5 , subType: 4 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [getHousePicSubtypes]  sub-type list: [4] [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_miner`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_miner` IN (?) AND T0.`ref_id` = ? ORDER BY T0.`type_miner` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `4`, `3`
2017/05/14 16:37:51 [1;34m[D] [GetHousePicList]   1 pictures [0m
2017/05/14 16:37:51 [1;33m[W] TODO: Add code here to test other kind of house picture [0m
--- PASS: Test_GetHousePicList (0.01s)
	pictures_test.go:481: Test GetHousePicList
	pictures_test.go:485: <Case 1> Invalid Argument: house < 0
	pictures_test.go:492: <Case 2> Invalid Argument: house = 0
	pictures_test.go:499: <Case 3> Invalid Argument: house does not exist
	pictures_test.go:506: <Case 4> Invalid Argument: type < 0
	pictures_test.go:513: <Case 5> Invalid Argument: type > commdef.PIC_HOUSE_END
	pictures_test.go:520: <Case 6> Permission: user not login
	pictures_test.go:532: <Case 7> Permission: user does not exist
	pictures_test.go:544: <Case 8> Permission: user is a regular user
	pictures_test.go:556: <Case 9> Permission: user is an agency, but not behalf with this house
	pictures_test.go:568: <Case 10> Permission: user is an agency who behalf of this house
	pictures_test.go:580: <Case 11> Permission: user is landlord
	pictures_test.go:592: <Case 12> Permission: user is an administrator
=== RUN   Test_GetPropertyList
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn:  , begin: -1 , fetch: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [GetPropertyList]  <Error> code: 1101, ( begin position:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn:  , begin: 0 , fetch: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [GetPropertyList]  <Error> code: 1101, ( fetch number:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn:  , begin: 0 , fetch: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: 0 pn="" true [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_property]
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn:  , begin: 0 , fetch: 14 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: 0 pn="" true [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_property]
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  sql: SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p LIMIT 0, 14 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p LIMIT 0, 14]
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  ps_tmp: [{1 ‰∏ñËåÇ.Ëù∂ÊπñÊπæ  } {2 ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† ÈïøÊ±üÂçóË∑Ø 666Âè∑ 1234} {3 ÈïøÊ±üËä±Âõ≠  } {4 Èï∑Ê±üËä±Âúí  } {5 1234 abcd abcd1234} {6 -  } {7 ÊòåÂª∫Âõ≠ Â∞±ÊòØ KÊ≠å} {8 _  } {9 %E9%95%BF%E6%B1%9F%E8%8A%B1%E5%9B%AD  } {10 6ZW35rGf6Iqx5ZyS
  } {11 Èï∑Ê±üËä±  } {12 Èï∑Ê±üËä±Âúí2 Áè†Ê±üÂçóË∑Ø ÊÄ°ÊôØÁÅ£} {13 Èï∑Ê±üËä±Âúí21 Áè†Ê±üÂçóË∑Ø ÊÄ°ÊôØÁÅ£} {14 ‰∏äÊµ∑ÂÖ¨È¶Ü Âïä Âêß}] [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  numb: 14 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn:  , begin: 14 , fetch: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: 0 pn="" true [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_property]
2017/05/14 16:37:51 [1;31m[E] [GetPropertyList]  <Error> code: 1101, ( begin(14) >= total(14) )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: ÈïøÊ±ü , begin: 0 , fetch: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: 6 pn="" false [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%ÈïøÊ±ü%' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%ÈïøÊ±ü%']
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: ÈïøÊ±ü , begin: 0 , fetch: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: 6 pn="" false [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%ÈïøÊ±ü%' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%ÈïøÊ±ü%']
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  sql: SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p WHERE name LIKE '%ÈïøÊ±ü%' LIMIT 0, 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p WHERE name LIKE '%ÈïøÊ±ü%' LIMIT 0, 1]
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  ps_tmp: [{3 ÈïøÊ±üËä±Âõ≠  }] [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  numb: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: Ê±üËä± , begin: 0 , fetch: 0 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: 6 pn="" false [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%Ê±üËä±%' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%Ê±üËä±%']
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: Ê±üËä± , begin: 0 , fetch: 5 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  pn: 6 pn="" false [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%Ê±üËä±%' [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%Ê±üËä±%']
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  sql: SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p WHERE name LIKE '%Ê±üËä±%' LIMIT 0, 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p WHERE name LIKE '%Ê±üËä±%' LIMIT 0, 5]
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  ps_tmp: [{3 ÈïøÊ±üËä±Âõ≠  } {4 Èï∑Ê±üËä±Âúí  } {11 Èï∑Ê±üËä±  } {12 Èï∑Ê±üËä±Âúí2 Áè†Ê±üÂçóË∑Ø ÊÄ°ÊôØÁÅ£} {13 Èï∑Ê±üËä±Âúí21 Áè†Ê±üÂçóË∑Ø ÊÄ°ÊôØÁÅ£}] [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyList]  numb: 5 [0m
--- PASS: Test_GetPropertyList (0.00s)
	property_test.go:15: Test GetPropertyList
	property_test.go:17: <Case> invalid arguments: begin < 0
	property_test.go:23: <Case> invalid arguments: toFetch < 0
	property_test.go:29: <Case> get max count of whole property list
	property_test.go:35: total: 14
	property_test.go:41: fetchCnt: 14
	property_test.go:43:  0 : {Id:1 PropName:‰∏ñËåÇ.Ëù∂ÊπñÊπæ PropAddress: PropDesc:}
	property_test.go:43:  1 : {Id:2 PropName:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† PropAddress:ÈïøÊ±üÂçóË∑Ø 666Âè∑ PropDesc:1234}
	property_test.go:43:  2 : {Id:3 PropName:ÈïøÊ±üËä±Âõ≠ PropAddress: PropDesc:}
	property_test.go:43:  3 : {Id:4 PropName:Èï∑Ê±üËä±Âúí PropAddress: PropDesc:}
	property_test.go:43:  4 : {Id:5 PropName:1234 PropAddress:abcd PropDesc:abcd1234}
	property_test.go:43:  5 : {Id:6 PropName:- PropAddress: PropDesc:}
	property_test.go:43:  6 : {Id:7 PropName:ÊòåÂª∫Âõ≠ PropAddress:Â∞±ÊòØ PropDesc:KÊ≠å}
	property_test.go:43:  7 : {Id:8 PropName:_ PropAddress: PropDesc:}
	property_test.go:43:  8 : {Id:9 PropName:%E9%95%BF%E6%B1%9F%E8%8A%B1%E5%9B%AD PropAddress: PropDesc:}
	property_test.go:43:  9 : {Id:10 PropName:6ZW35rGf6Iqx5ZyS
		 PropAddress: PropDesc:}
	property_test.go:43:  10 : {Id:11 PropName:Èï∑Ê±üËä± PropAddress: PropDesc:}
	property_test.go:43:  11 : {Id:12 PropName:Èï∑Ê±üËä±Âúí2 PropAddress:Áè†Ê±üÂçóË∑Ø PropDesc:ÊÄ°ÊôØÁÅ£}
	property_test.go:43:  12 : {Id:13 PropName:Èï∑Ê±üËä±Âúí21 PropAddress:Áè†Ê±üÂçóË∑Ø PropDesc:ÊÄ°ÊôØÁÅ£}
	property_test.go:43:  13 : {Id:14 PropName:‰∏äÊµ∑ÂÖ¨È¶Ü PropAddress:Âïä PropDesc:Âêß}
	property_test.go:46: <Case> invalid arguments: begin > total
	property_test.go:53: <Case> get count of property list with search key word: ÈïøÊ±ü
	property_test.go:59: total: 1
	property_test.go:65: fetchCnt: 1
	property_test.go:67:  0 : {Id:3 PropName:ÈïøÊ±üËä±Âõ≠ PropAddress: PropDesc:}
	property_test.go:71: <Case> get count of property list with search key word: Ê±üËä±
	property_test.go:77: total: 5
	property_test.go:83: fetchCnt: 5
	property_test.go:85:  0 : {Id:3 PropName:ÈïøÊ±üËä±Âõ≠ PropAddress: PropDesc:}
	property_test.go:85:  1 : {Id:4 PropName:Èï∑Ê±üËä±Âúí PropAddress: PropDesc:}
	property_test.go:85:  2 : {Id:11 PropName:Èï∑Ê±üËä± PropAddress: PropDesc:}
	property_test.go:85:  3 : {Id:12 PropName:Èï∑Ê±üËä±Âúí2 PropAddress:Áè†Ê±üÂçóË∑Ø PropDesc:ÊÄ°ÊôØÁÅ£}
	property_test.go:85:  4 : {Id:13 PropName:Èï∑Ê±üËä±Âúí21 PropAddress:Áè†Ê±üÂçóË∑Ø PropDesc:ÊÄ°ÊôØÁÅ£}
=== RUN   Test_GetPropertyInfo
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: -1 [0m
2017/05/14 16:37:51 [1;31m[E] [GetPropertyInfo]  <Error> code: 1101, ( property id:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 100000000 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `100000000`
2017/05/14 16:37:51 [1;31m[E] [GetPropertyInfo]  <Error> code: 1102, ( <QuerySeter> no row found )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
--- PASS: Test_GetPropertyInfo (0.00s)
	property_test.go:94: Test GetPropertyInfo
	property_test.go:96: <Case> invalid arguments: pid <= 0
	property_test.go:102: <Case> invalid arguments: property doe's not exist
	property_test.go:108: <Case> get property by id
	property_test.go:114: property: {Id:2 PropName:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† PropAddress:ÈïøÊ±üÂçóË∑Ø 666Âè∑ PropDesc:1234}
=== RUN   Test_ModifyProperty
2017/05/14 16:37:51 [1;34m[D] [ModifyProperty]  login user: -1 , property: 5 , name:  , addr:  , desc:  [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;31m[E] [ModifyProperty]  <Error> code: 1101, ( property name: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyProperty]  login user: -1 , property: 5 , name: 1 , addr:  , desc:  [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;31m[E] [ModifyProperty]  <Error> code: 1101, ( address: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyProperty]  login user: -1 , property: 5 , name: 1 , addr: 1 , desc:  [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;31m[E] [ModifyProperty]  <Error> code: 1101, ( desc: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyProperty]  login user: -1 , property: 5 , name: 1 , addr: 1 , desc: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;31m[E] [isAgency]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyProperty]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyProperty]  login user: 2 , property: 5 , name: 1 , addr: 1 , desc: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 0 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/05/14 16:37:51 [1;31m[E] [ModifyProperty]  <Error> code: 1106, ( uid:2 )
 [0m
2017/05/14 16:37:51 [1;34m[D] [ModifyProperty]  login user: 6 , property: 5 , name: Ëä± , addr: 1 , desc: 1 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%Ëä±%`
2017/05/14 16:37:51 [1;31m[E] [ModifyProperty]  <Error> code: 1105, ( property name:Ëä± )
 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;34m[D] [ModifyProperty]  login user: 6 , property: 5 , name: test property , addr: test address , desc: test desc [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%test property%`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     2.8ms] - [UPDATE `tbl_property` SET `name` = ?, `address` = ?, `desc` = ? WHERE `id` = ?] - `test property`, `test address`, `test desc`, `5`
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;34m[D] [ModifyProperty]  login user: 6 , property: 5 , name: 1234 , addr: abcd , desc: abcd1234 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%1234%`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.5ms] - [UPDATE `tbl_property` SET `name` = ?, `address` = ?, `desc` = ? WHERE `id` = ?] - `1234`, `abcd`, `abcd1234`, `5`
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;34m[D] [ModifyProperty]  login user: 4 , property: 5 , name: test property , addr: test address , desc: test desc [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%test property%`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.1ms] - [UPDATE `tbl_property` SET `name` = ?, `address` = ?, `desc` = ? WHERE `id` = ?] - `test property`, `test address`, `test desc`, `5`
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/05/14 16:37:51 [1;34m[D] [ModifyProperty]  login user: 4 , property: 5 , name: 1234 , addr: abcd , desc: abcd1234 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%1234%`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.1ms] - [UPDATE `tbl_property` SET `name` = ?, `address` = ?, `desc` = ? WHERE `id` = ?] - `1234`, `abcd`, `abcd1234`, `5`
--- PASS: Test_ModifyProperty (0.02s)
	property_test.go:122: Test ModifyProperty
	property_test.go:124: <Case> invalid arguments: name is empty
	property_test.go:130: <Case> invalid arguments: address is empty
	property_test.go:136: <Case> invalid arguments: desc is empty
	property_test.go:142: <Case> permission: user not login
	property_test.go:148: <Case> permission: regular user have no right to modify
	property_test.go:154: <Case> invalid arguments: property already exist
	property_test.go:160: <Case> update by agency
	property_test.go:167: old property:  {Id:5 PropName:1234 PropAddress:abcd PropDesc:abcd1234}
	property_test.go:177: property:  {Id:5 PropName:test property PropAddress:test address PropDesc:test desc}
	property_test.go:188: <Case> update by administrator
	property_test.go:195: old property:  {Id:5 PropName:1234 PropAddress:abcd PropDesc:abcd1234}
	property_test.go:202: property:  {Id:5 PropName:test property PropAddress:test address PropDesc:test desc}
=== RUN   Test_AddProperty
2017/05/14 16:37:51 [1;34m[D] [AddProperty]  prop:  , addr:  , desc:  [0m
2017/05/14 16:37:51 [1;31m[E] [AddProperty]  <Error> code: 1101, ( property name: )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddProperty]  prop: Ëä±Âõ≠ , addr:  , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%Ëä±Âõ≠%`
2017/05/14 16:37:51 [1;31m[E] [AddProperty]  <Error> code: 1105, ( property name:Ëä±Âõ≠ )
 [0m
2017/05/14 16:37:51 [1;34m[D] [AddProperty]  prop: AddProperty , addr:  , desc:  [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%AddProperty%`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.2ms] - [INSERT INTO `tbl_property` (`name`, `address`, `desc`) VALUES (?, ?, ?)] - `AddProperty`, ``, ``
2017/05/14 16:37:51 [1;33m[W] [AddProperty]  Notify administrator or agency to complete the new property information [0m
2017/05/14 16:37:51 [1;34m[D] [delProperty]  property: 17 , login user: 4 [0m
2017/05/14 16:37:51 [1;34m[D] [GetPropertyInfo]  pid: 17 [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `17`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/05/14 16:37:51 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/05/14 16:37:51 [1;33m[W] [delProperty]  checking property relation or just delete all of them along with property [0m
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /     db.Exec /     1.7ms] - [DELETE FROM `tbl_property` WHERE `id` = ?] - `17`
[ORM]2017/05/14 16:37:51  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id` FROM `tbl_house` T0 WHERE T0.`property_id` IN (?) ] - `17`
--- PASS: Test_AddProperty (0.01s)
	property_test.go:219: Test AddProperty
	property_test.go:221: <Case> invalid arguments: name is empty
	property_test.go:227: <Case> invalid arguments: property already exist
	property_test.go:233: <Case> add property
	property_test.go:239: new property: 17
FAIL
exit status 1
FAIL	ApiServer/models	0.644s
