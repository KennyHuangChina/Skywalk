[newBConfig] SessionOn: false
[ORM]2017/06/05 21:57:39 unsupport orm tag not null
[ORM]2017/06/05 21:57:39 unsupport orm tag not null
[ORM]2017/06/05 21:57:39 unsupport orm tag not null
[ORM]2017/06/05 21:57:39 unsupport orm tag not null
[ORM]2017/06/05 21:57:39 unsupport orm tag not null
2017/06/05 21:57:39 [1;34m[D] root:root@tcp(localhost:3306)/rtdb?charset=utf8 [0m
2017/06/05 21:57:39 [1;34m[D] models.init [0m
table `tbl_user` already exists, skip
table `tbl_user_group` already exists, skip
table `tbl_user_group_member` already exists, skip
table `tbl_property` already exists, skip
table `tbl_house` already exists, skip
table `tbl_rental` already exists, skip
table `tbl_tag` already exists, skip
table `tbl_house_tag` already exists, skip
table `tbl_house_recommend` already exists, skip
table `tbl_deliverables` already exists, skip
table `tbl_house_deliverable` already exists, skip
table `tbl_house_cert` already exists, skip
table `tbl_facility_type` already exists, skip
table `tbl_facilitys` already exists, skip
table `tbl_house_facility` already exists, skip
table `tbl_house_event` already exists, skip
table `tbl_house_event_process` already exists, skip
table `tbl_pictures` already exists, skip
table `tbl_pic_set` already exists, skip
table `tbl_sms_code` already exists, skip
table `tbl_strings` already exists, skip
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_strings` T0 WHERE T0.`key` = ? ] - `KEY_HOUSE_EVENT_PROC_FOLLOW`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_strings` T0 WHERE T0.`key` = ? ] - `KEY_HOUSE_EVENT_PROC_CLOSE`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT COUNT(*) FROM `tbl_strings` T0 WHERE T0.`key` = ? ] - `KEY_USER_SYSTEM`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_strings` T0 WHERE T0.`key` = ? ] - `KEY_USER_NAME_NOT_SET`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_strings` T0 WHERE T0.`key` = ? ] - `KEY_LANDLORD_SUBMIT_NEW_HOUSE`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_strings` T0 WHERE T0.`key` = ? ] - `KEY_HOUSE_CERTIFICATE_PASS`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_strings` T0 WHERE T0.`key` = ? ] - `KEY_UNKNOWN`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT COUNT(*) FROM `tbl_strings` T0 WHERE T0.`key` = ? ] - `KEY_HOUSE_CERTIFICATE_BEGIN`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT COUNT(*) FROM `tbl_strings` T0 WHERE T0.`key` = ? ] - `KEY_HOUSE_CERTIFICATE_FAILED`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` = ? ] - `ÁîµË°®ÁÆ±Èí•Âåô`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` = ? ] - `‰ø°Êä•ÁÆ±Èí•Âåô`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` = ? ] - `‰øùÈô©ÊüúÈí•Âåô`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` = ? ] - `ÁáÉÊ∞îÂç°`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` = ? ] - `Èó®Á¶ÅÂç°`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` = ? ] - `Ê∞¥ÁîµÂç°/Â≠òÊäò`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     1.1ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` = ? ] - `Ê∞¥Ë°®ÁÆ±Èí•Âåô`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` = ? ] - `Â§ßÈó®Èí•Âåô`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` = ? ] - `ÊúâÁ∫øÁîµËßÜÁî®Êà∑ËØÅ`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` = ? ] - `ÂÆ∂ÂÖ∑`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` = ? ] - `Âé®ÊàøÁî®ÂìÅ`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` = ? ] - `ÂÖ∂ÂÆÉ`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` = ? ] - `ÂÆ∂Áî®ÁîµÂô®`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÁîµÁ£ÅÁÇâ`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÁîµÂÜ∞ÁÆ±`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Á´ãÂºèÁ©∫Ë∞É`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÂÆΩÂ∏¶ÁΩëÁªú/Ë∑ØÁî±Âô®`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Ë°£Êüú`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÁÅ∂ÂÖ∑`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÈÖíÊ∞¥Êüú`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Âç´ÊòüÁîµËßÜ`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Â£ÅÊåÇÁ©∫Ë∞É`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Ê¥óË°£Êú∫`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÁîµËßÜÊú∫`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `‰π¶Ê°å`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `‰π¶Êüú`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Ê¥óÁ¢óÊú∫`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÁîµËßÜÊüú`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÂæÆÊ≥¢ÁÇâ`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Ê∂àÊØíÊüú`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Ëä±Êû∂`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÁîµÈ£éÊâá`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÂèñÊöñÂô®`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Èü≥Âìç`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Â∫ä`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÈûãÊüú`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÁÉ§ÁÆ±`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÊúâÁ∫øÁîµËßÜ/Êú∫È°∂Áõí`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÁîµËÑë`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `ÁîµÁÜ®Êñó`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Ê≤ôÂèë+Ëå∂Âá†`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`name` = ? ] - `Ê≤πÁÉüÊú∫`
=== RUN   Test_GetHouseDeliverableList
2017/06/05 21:57:39 [1;34m[D] [GetHouseDeliverableList]  uid: -1 , hid 4 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT h.deliverable AS id, d.name, h.qty, h.desc
							FROM tbl_house_deliverable AS h, tbl_deliverables AS d 
							WHERE h.house=4 AND h.deliverable = d.Id]
--- PASS: Test_GetHouseDeliverableList (0.00s)
	AccessoryDeliverable_test.go:15: Test GetHouseDeliverableList
	AccessoryDeliverable_test.go:17: <Case>
	AccessoryDeliverable_test.go:24:  0 : {Id:2 Name:ÁîµË°®ÁÆ±Èí•Âåô Qty:2 Desc:1ÊääÈí•Âåô}
	AccessoryDeliverable_test.go:24:  1 : {Id:1 Name:Ê∞¥ÁîµÂç°/Â≠òÊäò Qty:3 Desc:2ÊääÈí•Âåô}
	AccessoryDeliverable_test.go:24:  2 : {Id:3 Name:‰øùÈô©ÊüúÈí•Âåô Qty:2 Desc:‰∏ÄÊääÈí•Âåô}
=== RUN   Test_GetDeliverables
2017/06/05 21:57:39 [1;34m[D] [GetDeliverables]  uid: -1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`name`, T0.`pic` FROM `tbl_deliverables` T0 LIMIT 1000]
--- PASS: Test_GetDeliverables (0.00s)
	AccessoryDeliverable_test.go:33: Test GetDeliverables
	AccessoryDeliverable_test.go:35: <Case>
	AccessoryDeliverable_test.go:42:  0 : {CommonListItem:{Id:1 Name:Ê∞¥ÁîµÂç°/Â≠òÊäò} Pic:3}
	AccessoryDeliverable_test.go:42:  1 : {CommonListItem:{Id:2 Name:ÁîµË°®ÁÆ±Èí•Âåô} Pic:6}
	AccessoryDeliverable_test.go:42:  2 : {CommonListItem:{Id:3 Name:‰øùÈô©ÊüúÈí•Âåô} Pic:8}
	AccessoryDeliverable_test.go:42:  3 : {CommonListItem:{Id:4 Name:ÁáÉÊ∞îÂç°} Pic:9}
	AccessoryDeliverable_test.go:42:  4 : {CommonListItem:{Id:5 Name:Â§ßÈó®Èí•Âåô} Pic:1}
	AccessoryDeliverable_test.go:42:  5 : {CommonListItem:{Id:6 Name:Èó®Á¶ÅÂç°} Pic:2}
	AccessoryDeliverable_test.go:42:  6 : {CommonListItem:{Id:7 Name:ÊúâÁ∫øÁîµËßÜÁî®Êà∑ËØÅ} Pic:4}
	AccessoryDeliverable_test.go:42:  7 : {CommonListItem:{Id:8 Name:Ê∞¥Ë°®ÁÆ±Èí•Âåô} Pic:5}
	AccessoryDeliverable_test.go:42:  8 : {CommonListItem:{Id:9 Name:‰ø°Êä•ÁÆ±Èí•Âåô} Pic:7}
=== RUN   Test_EditDeliverable
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: -1 , name:  , login user: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [EditDeliverable]  <Error> code: 1101, ( name: )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: -1 , name: 1 , login user: 0 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [getDeliverable]  <Error> code: 1101, ( deliverable:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [EditDeliverable]  <Error> code: 1101, ( deliverable:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: 0 , name: 1 , login user: 0 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [getDeliverable]  <Error> code: 1101, ( deliverable:0 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [EditDeliverable]  <Error> code: 1101, ( deliverable:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: 100000000 , name: 1 , login user: 0 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [getDeliverable]  <Error> code: 1102, ( did:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [EditDeliverable]  <Error> code: 1102, ( did:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: Èí•Âåô , login user: 4 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%Èí•Âåô%`, `3`
2017/06/05 21:57:39 [1;31m[E] [EditDeliverable]  <Error> code: 1105, ( name:Èí•Âåô )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: Èí•Âåô , login user: -1 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [EditDeliverable]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: Èí•Âåô , login user: 100000000 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [EditDeliverable]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: Èí•Âåô , login user: 2 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [EditDeliverable]  <Error> code: 1106, ( uid:2 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: Èí•Âåô , login user: 6 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [EditDeliverable]  <Error> code: 1106, ( uid:6 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: TestName , login user: 4 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%TestName%`, `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     2.7ms] - [UPDATE `tbl_deliverables` SET `name` = ? WHERE `id` = ?] - `TestName`, `3`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
2017/06/05 21:57:39 [1;34m[D] [EditDeliverable]  deliverable: 3 , name: ‰øùÈô©ÊüúÈí•Âåô , login user: 4 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%‰øùÈô©ÊüúÈí•Âåô%`, `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     1.5ms] - [UPDATE `tbl_deliverables` SET `name` = ? WHERE `id` = ?] - `‰øùÈô©ÊüúÈí•Âåô`, `3`
--- PASS: Test_EditDeliverable (0.02s)
	AccessoryDeliverable_test.go:51: Test EditDeliverable
	AccessoryDeliverable_test.go:53: <Case> Invalid argument: name not set
	AccessoryDeliverable_test.go:59: <Case> Invalid argument: did < 0
	AccessoryDeliverable_test.go:65: <Case> Invalid argument: did = 0
	AccessoryDeliverable_test.go:71: <Case> Invalid argument: deliverable not exist
	AccessoryDeliverable_test.go:77: <Case> Invalid argument: deliverable name already exist
	AccessoryDeliverable_test.go:84: <Case> permission: user not login
	AccessoryDeliverable_test.go:90: <Case> permission: user does not exist
	AccessoryDeliverable_test.go:96: <Case> permission: regular user
	AccessoryDeliverable_test.go:102: <Case> permission: user is agency
	AccessoryDeliverable_test.go:108: <Case> Modify
	AccessoryDeliverable_test.go:116: name, before: ‰øùÈô©ÊüúÈí•Âåô
	AccessoryDeliverable_test.go:124: name, to modify: TestName , modified: TestName
=== RUN   Test_AddDeliverable
2017/06/05 21:57:39 [1;34m[D] [AddDeliverable]  name:  , login user: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [AddDeliverable]  <Error> code: 1101, ( name: )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddDeliverable]  name: 11 , login user: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddDeliverable]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddDeliverable]  name: 11 , login user: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddDeliverable]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddDeliverable]  name: 11 , login user: 2 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [AddDeliverable]  <Error> code: 1106, ( uid:2 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddDeliverable]  name: 11 , login user: 6 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [AddDeliverable]  <Error> code: 1106, ( uid:6 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddDeliverable]  name: Èí•Âåô , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` LIKE BINARY ? ] - `%Èí•Âåô%`
2017/06/05 21:57:39 [1;31m[E] [AddDeliverable]  <Error> code: 1105, ( name:Èí•Âåô )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddDeliverable]  name: Ê∞¥ÁîµÂ≠òÊäòÊµãËØï_7 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_deliverables` T0 WHERE T0.`name` LIKE BINARY ? ] - `%Ê∞¥ÁîµÂ≠òÊäòÊµãËØï_7%`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT MAX(pic) AS max FROM tbl_deliverables]
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     1.7ms] - [INSERT INTO `tbl_deliverables` (`name`, `pic`) VALUES (?, ?)] - `Ê∞¥ÁîµÂ≠òÊäòÊµãËØï_7`, `10`
2017/06/05 21:57:39 [1;34m[D] [delDeliverable]  deliverable: 14 , login user: 5 [0m
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 14 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `14`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;33m[W] [delDeliverable]  checking deliverable relation or just delete all of them along with deliverable [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     2.7ms] - [DELETE FROM `tbl_deliverables` WHERE `id` = ?] - `14`
--- PASS: Test_AddDeliverable (0.01s)
	AccessoryDeliverable_test.go:141: Test AddDeliverable
	AccessoryDeliverable_test.go:145: <Case 1> Invalid argument: name not set
	AccessoryDeliverable_test.go:152: <Case 2> Permission: user not login
	AccessoryDeliverable_test.go:159: <Case 3> Permission: login user does not exist
	AccessoryDeliverable_test.go:166: <Case 4> Permission: login user is a regualr user
	AccessoryDeliverable_test.go:173: <Case 5> Permission: login user is a agency
	AccessoryDeliverable_test.go:180: <Case 6> Invalid argument: deliverable already exist
	AccessoryDeliverable_test.go:187: <Case 7> Add Deliverable
	AccessoryDeliverable_test.go:195: id: 14
=== RUN   Test_AddHouseDeliverable
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house -1 , deliverable: 0 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 0 , deliverable: 0 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 100000000 , deliverable: 0 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 2 , deliverable: -1 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [getDeliverable]  <Error> code: 1101, ( deliverable:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( deliverable:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 2 , deliverable: 0 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [getDeliverable]  <Error> code: 1101, ( deliverable:0 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( deliverable:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 2 , deliverable: 100000000 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [getDeliverable]  <Error> code: 1102, ( did:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1102, ( did:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 2 , deliverable: 5 , qty: -10 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( qty:-10 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 100000000 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 2 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:2 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 11 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 6 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:39 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `2`, `5`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  bExist: false [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( house:2, deliverable:5 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 9 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `2`, `5`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  bExist: false [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( house:2, deliverable:5 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 2 , deliverable: 5 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `2`, `5`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  bExist: false [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( house:2, deliverable:5 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 4 , deliverable: 3 , qty: 10 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 3 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `4`, `3`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  bExist: true [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1105, ( house:4, deliverable:3 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 4 , deliverable: 6 , qty: 10 , desc: Test AddHouseDeliverable [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 6 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.9ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `4`, `6`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  bExist: false [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     2.0ms] - [INSERT INTO `tbl_house_deliverable` (`house`, `deliverable`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `4`, `6`, `10`, `Test AddHouseDeliverable`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 4 , deliverable: 6 , qty: 10 , desc: Test AddHouseDeliverable [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 6 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     2.0ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `4`, `6`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  bExist: true [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1105, ( house:4, deliverable:6 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 4 , deliverable: 6 , qty: 0 , desc: AddHouseDeliverable [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 6 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `4`, `6`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  bExist: true [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id` FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `4`, `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     2.3ms] - [DELETE FROM `tbl_house_deliverable` WHERE `id` IN (?)] - `17`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  numb: 1 [0m
--- PASS: Test_AddHouseDeliverable (0.05s)
	AccessoryDeliverable_test.go:209: Test AddHouseDeliverable
	AccessoryDeliverable_test.go:211: <Case> Invalid argument: house < 0
	AccessoryDeliverable_test.go:217: <Case> Invalid argument: house = 0
	AccessoryDeliverable_test.go:223: <Case> Invalid argument: house does not exist
	AccessoryDeliverable_test.go:230: <Case> Invalid argument: deliverable < 0
	AccessoryDeliverable_test.go:236: <Case> Invalid argument: deliverable = 0
	AccessoryDeliverable_test.go:242: <Case> Invalid argument: deliverable does not exist
	AccessoryDeliverable_test.go:248: <Case> Invalid argument: qty < 0
	AccessoryDeliverable_test.go:254: <Case> Permission: user not login
	AccessoryDeliverable_test.go:260: <Case> Permission: user do not exist
	AccessoryDeliverable_test.go:266: <Case> Permission: regular user
	AccessoryDeliverable_test.go:272: <Case> Permission: agency, but not for this house
	AccessoryDeliverable_test.go:278: <Case> Permission: agency of this house, no record to delete
	AccessoryDeliverable_test.go:284: <Case> Permission: landlord of this house, no record to delete
	AccessoryDeliverable_test.go:290: <Case> Permission: administrator, no record to delete
	AccessoryDeliverable_test.go:296: <Case> Invalid Argument: administrator, house deliverable already exist
	AccessoryDeliverable_test.go:302: <Case> Add deliverable for house, success
	AccessoryDeliverable_test.go:308: new id: 17
	AccessoryDeliverable_test.go:309: <Case> Add same deliverable for house, rejected
	AccessoryDeliverable_test.go:314: <Case> remove the new house deliverable just add
=== RUN   Test_EditHouseDeliverable
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house deliverable: -1 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [getHouseDeliverable]  <Error> code: 1101, ( house deliverable:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( house deliverable:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house deliverable: 0 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [getHouseDeliverable]  <Error> code: 1101, ( house deliverable:0 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1101, ( house deliverable:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house deliverable: 100000000 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     1.4ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [getHouseDeliverable]  <Error> code: 1102, ( house deliverable:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1102, ( house deliverable:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: -1 , house deliverable: 7 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  3 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 9 , house deliverable: 7 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  3 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:9 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 11 , house deliverable: 7 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  3 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 2 , house deliverable: 7 , qty: 5 , desc: test deliverable [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     2.2ms] - [UPDATE `tbl_house_deliverable` SET `house` = ?, `deliverable` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `6`, `3`, `5`, `test deliverable`, `7`
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 2 , house deliverable: 7 , qty: 4 , desc: ‰∫§‰ªòÁâ©ËØ¥Êòé [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:5 Desc:test deliverable} [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     1.8ms] - [UPDATE `tbl_house_deliverable` SET `house` = ?, `deliverable` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `6`, `3`, `4`, `‰∫§‰ªòÁâ©ËØ¥Êòé`, `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 1 , house deliverable: 7 , qty: 5 , desc: test deliverable [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `1`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=1]
2017/06/05 21:57:39 [1;34m[D] [isAgency]  nCnt: 0 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `1`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=1]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  3 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseDeliverable]  <Error> code: 1106, ( login user:1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house deliverable: 7 , qty: 5 , desc: test deliverable [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé} [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     1.0ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.8ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  2 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     2.4ms] - [UPDATE `tbl_house_deliverable` SET `house` = ?, `deliverable` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `6`, `3`, `5`, `test deliverable`, `7`
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house deliverable: 7 , qty: 4 , desc: ‰∫§‰ªòÁâ©ËØ¥Êòé [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 7 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  {Id:7 House:6 Deliverable:3 Qty:5 Desc:test deliverable} [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  2 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     1.6ms] - [UPDATE `tbl_house_deliverable` SET `house` = ?, `deliverable` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `6`, `3`, `4`, `‰∫§‰ªòÁâ©ËØ¥Êòé`, `7`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house 6 , deliverable: 1 , qty: 2 , desc: new deliverable [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/06/05 21:57:39 [1;34m[D] [getDeliverable]  did: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `name`, `pic` FROM `tbl_deliverables` WHERE `id` = ? ] - `1`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_deliverable` T0 WHERE T0.`house` = ? AND T0.`deliverable` = ? ] - `6`, `1`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  bExist: false [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     1.2ms] - [INSERT INTO `tbl_house_deliverable` (`house`, `deliverable`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `6`, `1`, `2`, `new deliverable`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  login user: 5 , house deliverable: 18 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;34m[D] [getHouseDeliverable]  hdid: 18 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `house`, `deliverable`, `qty`, `desc` FROM `tbl_house_deliverable` WHERE `id` = ? ] - `18`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  {Id:18 House:6 Deliverable:1 Qty:2 Desc:new deliverable} [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  2 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id` FROM `tbl_house_deliverable` T0 WHERE T0.`id` = ? ] - `18`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     2.3ms] - [DELETE FROM `tbl_house_deliverable` WHERE `id` IN (?)] - `18`
2017/06/05 21:57:39 [1;34m[D] [AddHouseDeliverable]  numb: 1 [0m
--- PASS: Test_EditHouseDeliverable (0.04s)
	AccessoryDeliverable_test.go:326: Test EditHouseDeliverable
	AccessoryDeliverable_test.go:328: <Case> Invalid argument: house deliverable < 0
	AccessoryDeliverable_test.go:334: <Case> Invalid argument: house deliverable = 0
	AccessoryDeliverable_test.go:340: <Case> Invalid argument: house deliverable does not exist
	AccessoryDeliverable_test.go:346: <Case> Permission: user not login
	AccessoryDeliverable_test.go:352: <Case> Permission: login user is a regular user
	AccessoryDeliverable_test.go:358: <Case> Permission: login user is agency, but not for this house
	AccessoryDeliverable_test.go:370: before edit: {Id:7 House:6 Deliverable:3 Qty:4 Desc:‰∫§‰ªòÁâ©ËØ¥Êòé}
	AccessoryDeliverable_test.go:373: <Case> edit house deliverable by landlord
	AccessoryDeliverable_test.go:380: after edit: {Id:7 House:6 Deliverable:3 Qty:5 Desc:test deliverable}
	AccessoryDeliverable_test.go:392: <Case> edit house deliverable by agency
	AccessoryDeliverable_test.go:399: <Case> edit house deliverable by administrator
	AccessoryDeliverable_test.go:405: after edit: {Id:7 House:6 Deliverable:3 Qty:5 Desc:test deliverable}
	AccessoryDeliverable_test.go:416: <Case> delete the house deliver by editing qty = 0
	AccessoryDeliverable_test.go:423: new house deliverable: 18
=== RUN   Test_GetFacilityTypeList
2017/06/05 21:57:39 [1;34m[D] [GetFacilityTypeList]  uid: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [GetFacilityTypeList]  uid: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [GetFacilityTypeList]  uid: 4 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`name` FROM `tbl_facility_type` T0 LIMIT 1000]
--- PASS: Test_GetFacilityTypeList (0.00s)
	AccessoryFacility_test.go:15: Test GetFacilityTypeList
	AccessoryFacility_test.go:17: <Case> Invalid parameter: user not login
	AccessoryFacility_test.go:23: <Case> Invalid parameter: user does not exist
	AccessoryFacility_test.go:29: <Case> get facility type list
	AccessoryFacility_test.go:37:  0 : {Id:4 Name:ÂÖ∂ÂÆÉ}
	AccessoryFacility_test.go:37:  1 : {Id:3 Name:Âé®ÊàøÁî®ÂìÅ}
	AccessoryFacility_test.go:37:  2 : {Id:2 Name:ÂÆ∂ÂÖ∑}
	AccessoryFacility_test.go:37:  3 : {Id:1 Name:ÂÆ∂Áî®ÁîµÂô®}
	AccessoryFacility_test.go:37:  4 : {Id:5 Name:ËØïÁ±ª}
=== RUN   Test_EditFacilityType
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: 9 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:9 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: 11 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:11 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [EditFacilityType]  <Error> code: 1101, ( name: )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: 0 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name:  , facility type: -1 , login user: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [EditFacilityType]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name: ÂÆ∂ÂÖ∑ , facility type: 3 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%ÂÆ∂ÂÖ∑%`, `3`
2017/06/05 21:57:39 [1;31m[E] [EditFacilityType]  <Error> code: 1105, ( name:ÂÆ∂ÂÖ∑ )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name: ÂÆ∂ÂÖ∑1 , facility type: 2 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%ÂÆ∂ÂÖ∑1%`, `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     1.8ms] - [UPDATE `tbl_facility_type` SET `name` = ? WHERE `id` = ?] - `ÂÆ∂ÂÖ∑1`, `2`
2017/06/05 21:57:39 [1;34m[D] [EditFacilityType]  name: ÂÆ∂ÂÖ∑ , facility type: 2 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `%ÂÆ∂ÂÖ∑%`, `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     2.9ms] - [UPDATE `tbl_facility_type` SET `name` = ? WHERE `id` = ?] - `ÂÆ∂ÂÖ∑`, `2`
--- PASS: Test_EditFacilityType (0.02s)
	AccessoryFacility_test.go:46: Test EditFacilityType
	AccessoryFacility_test.go:53: <Case 1> Permission: user(-1) not login
	AccessoryFacility_test.go:53: <Case 2> Permission: user(100000000) does not exist
	AccessoryFacility_test.go:53: <Case 3> Permission: user(9) is a regular user
	AccessoryFacility_test.go:53: <Case 4> Permission: user(11) is an agency
	AccessoryFacility_test.go:61: <Case 5> Invalid parameter: type name is empty
	AccessoryFacility_test.go:71: <Case 6> Invalid parameter: type(-1) < 0
	AccessoryFacility_test.go:71: <Case 7> Invalid parameter: type(0) = 0
	AccessoryFacility_test.go:71: <Case 8> Invalid parameter: type(100000000) does not exist
	AccessoryFacility_test.go:79: <Case 9> Invalid parameter: type name already exist
	AccessoryFacility_test.go:87: <Case 10> Test: Modify
	AccessoryFacility_test.go:96: <Case 11> Test: restore
=== RUN   Test_DeleFacilityType
2017/06/05 21:57:39 [1;34m[D] [DeleFacilityType]  facility type: -1 , login user: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [DeleFacilityType]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DeleFacilityType]  facility type: -1 , login user: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [DeleFacilityType]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DeleFacilityType]  facility type: -1 , login user: 9 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [DeleFacilityType]  <Error> code: 1106, ( uid:9 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DeleFacilityType]  facility type: -1 , login user: 11 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [DeleFacilityType]  <Error> code: 1106, ( uid:11 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DeleFacilityType]  facility type: -1 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [DeleFacilityType]  <Error> code: 1101, ( facility type:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DeleFacilityType]  facility type: 0 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [DeleFacilityType]  <Error> code: 1101, ( facility type:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DeleFacilityType]  facility type: 100000000 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [DeleFacilityType]  <Error> code: 1102, ( facility type:100000000 )
 [0m
--- PASS: Test_DeleFacilityType (0.00s)
	AccessoryFacility_test.go:108: Test DeleFacilityType
	AccessoryFacility_test.go:110: <Case> Permission: user not login
	AccessoryFacility_test.go:116: <Case> Permission: login user does not exist
	AccessoryFacility_test.go:122: <Case> Permission: login user is a regular user
	AccessoryFacility_test.go:128: <Case> Permission: login user is a agency
	AccessoryFacility_test.go:134: <Case> Invalid parameter: type < 0
	AccessoryFacility_test.go:140: <Case> Invalid parameter: type = 0
	AccessoryFacility_test.go:146: <Case> Invalid parameter: type does not exist
	AccessoryFacility_test.go:151: The actual delete testing, please ref to Test_AddFacilityType
=== RUN   Test_AddFacilityType
2017/06/05 21:57:39 [1;34m[D] [AddFacilityType]  name:  , uid: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacilityType]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacilityType]  name:  , uid: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacilityType]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacilityType]  name:  , uid: 9 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacilityType]  <Error> code: 1106, ( uid:9 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacilityType]  name:  , uid: 11 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacilityType]  <Error> code: 1106, ( uid:11 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacilityType]  name:  , uid: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacilityType]  <Error> code: 1101, ( name: )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacilityType]  name: ËØïÁ±ª , uid: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` LIKE BINARY ? ] - `%ËØïÁ±ª%`
2017/06/05 21:57:39 [1;31m[E] [AddFacilityType]  <Error> code: 1105, ( name:ËØïÁ±ª )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacilityType]  name: test ÊµãËØï test , uid: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facility_type` T0 WHERE T0.`name` LIKE BINARY ? ] - `%test ÊµãËØï test%`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [INSERT INTO `tbl_facility_type` (`name`) VALUES (?)] - `test ÊµãËØï test`
2017/06/05 21:57:39 [1;34m[D] [DeleFacilityType]  facility type: 10 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `10`
2017/06/05 21:57:39 [1;33m[W] [DeleFacilityType]  Prevent deleting if this type has been used or delete cascaded [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     1.5ms] - [DELETE FROM `tbl_facility_type` WHERE `id` = ?] - `10`
--- PASS: Test_AddFacilityType (0.01s)
	AccessoryFacility_test.go:161: Test AddFacilityType
	AccessoryFacility_test.go:163: <Case> Permission: user not login
	AccessoryFacility_test.go:169: <Case> Permission: login user does not exist
	AccessoryFacility_test.go:175: <Case> Permission: login user is a regular user
	AccessoryFacility_test.go:181: <Case> Permission: login user is a agency
	AccessoryFacility_test.go:187: <Case> Invalid parameter: type name is empty
	AccessoryFacility_test.go:193: <Case> Invalid parameter: type name already exist
	AccessoryFacility_test.go:199: <Case> Add facility type
	AccessoryFacility_test.go:206: <Case> Delete facility type just added a second ago
=== RUN   Test_GetFacilityList
2017/06/05 21:57:39 [1;34m[D] [GetFacilityTypeList]  login user: -1 , facility type: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1101, ( facility type:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [GetFacilityTypeList]  login user: -1 , facility type: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1102, ( facility type:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [GetFacilityTypeList]  login user: -1 , facility type: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [GetFacilityTypeList]  login user: 100000000 , facility type: 0 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [GetFacilityTypeList]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [GetFacilityTypeList]  login user: 9 , facility type: 0 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT f.id, f.name, t.name AS type, pic AS icon FROM tbl_facilitys AS f, tbl_facility_type AS t WHERE f.type=t.id ORDER BY t.name, f.name]
2017/06/05 21:57:39 [1;34m[D] [GetFacilityTypeList]  login user: 9 , facility type: 2 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT f.id, f.name, t.name AS type, pic AS icon FROM tbl_facilitys AS f, tbl_facility_type AS t WHERE f.type=t.id AND type=2 ORDER BY t.name, f.name]
--- PASS: Test_GetFacilityList (0.00s)
	AccessoryFacility_test.go:220: Test GetFacilityList
	AccessoryFacility_test.go:222: <Case> Invalid argument: type < 0
	AccessoryFacility_test.go:228: <Case> Invalid argument: facility type does not exist
	AccessoryFacility_test.go:234: <Case> Permission: user not logined
	AccessoryFacility_test.go:240: <Case> Permission: user does not exist
	AccessoryFacility_test.go:246: <Case> fetch all facilities
	AccessoryFacility_test.go:253:  0 : {Id:37 Name:Â∞ΩÂø´ÂèëË¥ßÂêß Type:ÂÖ∂ÂÆÉ Icon:./pics/201706/03171537424596.png}
	AccessoryFacility_test.go:253:  1 : {Id:9 Name:Ëä±Êû∂ Type:ÂÖ∂ÂÆÉ Icon:}
	AccessoryFacility_test.go:253:  2 : {Id:24 Name:ÈûãÊüú Type:ÂÖ∂ÂÆÉ Icon:}
	AccessoryFacility_test.go:253:  3 : {Id:18 Name:ÂæÆÊ≥¢ÁÇâ Type:Âé®ÊàøÁî®ÂìÅ Icon:}
	AccessoryFacility_test.go:253:  4 : {Id:2 Name:Ê≤πÁÉüÊú∫ Type:Âé®ÊàøÁî®ÂìÅ Icon:}
	AccessoryFacility_test.go:253:  5 : {Id:19 Name:Ê¥óÁ¢óÊú∫ Type:Âé®ÊàøÁî®ÂìÅ Icon:}
	AccessoryFacility_test.go:253:  6 : {Id:5 Name:Ê∂àÊØíÊüú Type:Âé®ÊàøÁî®ÂìÅ Icon:}
	AccessoryFacility_test.go:253:  7 : {Id:8 Name:ÁÅ∂ÂÖ∑ Type:Âé®ÊàøÁî®ÂìÅ Icon:}
	AccessoryFacility_test.go:253:  8 : {Id:16 Name:ÁÉ§ÁÆ± Type:Âé®ÊàøÁî®ÂìÅ Icon:}
	AccessoryFacility_test.go:253:  9 : {Id:28 Name:ÁîµÁ£ÅÁÇâ Type:Âé®ÊàøÁî®ÂìÅ Icon:}
	AccessoryFacility_test.go:253:  10 : {Id:7 Name:‰π¶Êüú Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:253:  11 : {Id:4 Name:‰π¶Ê°å Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:253:  12 : {Id:10 Name:Â∫ä Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:253:  13 : {Id:27 Name:Ê≤ôÂèë+Ëå∂Âá† Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:253:  14 : {Id:23 Name:ÁîµËßÜÊüú Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:253:  15 : {Id:12 Name:Ë°£Êüú Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:253:  16 : {Id:14 Name:Âç´ÊòüÁîµËßÜ Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  17 : {Id:22 Name:ÂèñÊöñÂô® Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  18 : {Id:3 Name:Â£ÅÊåÇÁ©∫Ë∞É Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  19 : {Id:13 Name:ÂÆΩÂ∏¶ÁΩëÁªú/Ë∑ØÁî±Âô® Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  20 : {Id:21 Name:ÊúâÁ∫øÁîµËßÜ/Êú∫È°∂Áõí Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  21 : {Id:17 Name:Ê¥óË°£Êú∫ Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  22 : {Id:29 Name:ÁîµÂÜ∞ÁÆ± Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  23 : {Id:26 Name:ÁîµÁÜ®Êñó Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  24 : {Id:1 Name:ÁîµËÑë Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  25 : {Id:6 Name:ÁîµËßÜÊú∫ Type:ÂÆ∂Áî®ÁîµÂô® Icon:./pics/201706/03171537424596.png}
	AccessoryFacility_test.go:253:  26 : {Id:11 Name:ÁîµÈ£éÊâá Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  27 : {Id:20 Name:Á´ãÂºèÁ©∫Ë∞É Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  28 : {Id:25 Name:ÈÖíÊ∞¥Êüú Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:253:  29 : {Id:15 Name:Èü≥Âìç Type:ÂÆ∂Áî®ÁîµÂô® Icon:}
	AccessoryFacility_test.go:256: <Case> fetch a certain kind of facilities
	AccessoryFacility_test.go:263:  0 : {Id:7 Name:‰π¶Êüú Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:263:  1 : {Id:4 Name:‰π¶Ê°å Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:263:  2 : {Id:10 Name:Â∫ä Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:263:  3 : {Id:27 Name:Ê≤ôÂèë+Ëå∂Âá† Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:263:  4 : {Id:23 Name:ÁîµËßÜÊüú Type:ÂÆ∂ÂÖ∑ Icon:}
	AccessoryFacility_test.go:263:  5 : {Id:12 Name:Ë°£Êüú Type:ÂÆ∂ÂÖ∑ Icon:}
=== RUN   Test_EditFacility
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: -1 , type: -1 , name:  , login user: -1 , icon:  , dir:  [0m
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: -1 , type: -1 , name:  , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: 0 , type: -1 , name:  , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: 100000000 , type: -1 , name:  , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1102, ( facility:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: 3 , type: -1 , name:  , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.1ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1101, ( name: )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: 3 , type: -1 , name:  , login user: 5 , icon:  , dir: test [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1101, ( name: )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: 3 , type: 0 , name:  , login user: 5 , icon:  , dir: test [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1101, ( name: )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: 3 , type: 100000000 , name:  , login user: 5 , icon:  , dir: test [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1101, ( name: )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: 3 , type: 2 , name: ‰π¶Ê°å , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     1.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`type` = ? AND T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `2`, `%‰π¶Ê°å%`, `3`
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1105, ( facility type:2, name:‰π¶Ê°å )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: 4 , type: 2 , name: ‰π¶Ê°å1 , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`type` = ? AND T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `2`, `%‰π¶Ê°å1%`, `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Begin /     0.0ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     0.4ms] - [UPDATE `tbl_facilitys` SET `type` = ?, `name` = ? WHERE `id` = ?] - `2`, `‰π¶Ê°å1`, `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /   tx.Commit /     1.1ms] - [COMMIT]
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  Facility: 4 , type: 2 , name: ‰π¶Ê°å , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`type` = ? AND T0.`name` LIKE BINARY ? AND NOT T0.`id` = ? ] - `2`, `%‰π¶Ê°å%`, `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Begin /     0.3ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     0.5ms] - [UPDATE `tbl_facilitys` SET `type` = ?, `name` = ? WHERE `id` = ?] - `2`, `‰π¶Ê°å`, `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /   tx.Commit /     0.9ms] - [COMMIT]
--- PASS: Test_EditFacility (0.02s)
	AccessoryFacility_test.go:274: Test EditFacility
	AccessoryFacility_test.go:281: <Case 1> Permission: user(-1) not login
	AccessoryFacility_test.go:292: <Case 2> Invalid argument: facility(-1) < 0
	AccessoryFacility_test.go:292: <Case 3> Invalid argument: facility(0) = 0
	AccessoryFacility_test.go:292: <Case 4> Invalid argument: facility(100000000) does not exist
	AccessoryFacility_test.go:300: <Case 5> Invalid argument: name is empty
	AccessoryFacility_test.go:310: <Case 6> Invalid argument: facility type(-1) < 0
	AccessoryFacility_test.go:310: <Case 7> Invalid argument: facility type(0) = 0
	AccessoryFacility_test.go:310: <Case 8> Invalid argument: facility type(100000000) does not exist
	AccessoryFacility_test.go:318: <Case 9> Invalid argument: duplicated
	AccessoryFacility_test.go:325: <Case 10> Test: modify
	AccessoryFacility_test.go:332: <Case 11> Test: restore
=== RUN   Test_DelFacility
2017/06/05 21:57:39 [1;34m[D] [DelFacility]  Facility: -1 , login user: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [DelFacility]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DelFacility]  Facility: -1 , login user: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [DelFacility]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DelFacility]  Facility: -1 , login user: 9 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [DelFacility]  <Error> code: 1106, ( uid:9 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DelFacility]  Facility: -1 , login user: 6 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [DelFacility]  <Error> code: 1106, ( uid:6 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DelFacility]  Facility: -1 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [DelFacility]  <Error> code: 1101, ( facility:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DelFacility]  Facility: 0 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [DelFacility]  <Error> code: 1101, ( facility:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [DelFacility]  Facility: 100000000 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [DelFacility]  <Error> code: 1102, ( facility:100000000 )
 [0m
--- PASS: Test_DelFacility (0.01s)
	AccessoryFacility_test.go:346: Test DelFacility
	AccessoryFacility_test.go:348: <Case 1> Permission: user not login
	AccessoryFacility_test.go:354: <Case 2> Permission: user does not exist
	AccessoryFacility_test.go:360: <Case 3> Permission: user is a regualr user
	AccessoryFacility_test.go:366: <Case 4> Permission: user is a agency
	AccessoryFacility_test.go:372: <Case 5> Invalid argument: facility < 0
	AccessoryFacility_test.go:378: <Case 6> Invalid argument: facility = 0
	AccessoryFacility_test.go:384: <Case 7> Invalid argument: facility does not exist
	AccessoryFacility_test.go:390: The actual delete testing, please ref to Test_AddFacility
=== RUN   Test_AddFacility
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: -1 , icon:  , dir:  [0m
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: 0 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: 100000000 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: 9 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:9 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: 6 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1106, ( uid:6 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name:  , facility type: -1 , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1101, ( name: )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name: test , facility type: -1 , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility type:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name: test , facility type: -1 , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility type:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name: test , facility type: -1 , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     1.0ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1101, ( facility type:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name: ‰π¶Ê°å , facility type: 2 , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`type` = ? AND T0.`name` LIKE BINARY ? ] - `2`, `%‰π¶Ê°å%`
2017/06/05 21:57:39 [1;31m[E] [AddFacility]  <Error> code: 1105, ( facility type:2, name:‰π¶Ê°å )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddFacility]  name: ÂÆΩÂ∏¶ÁΩëÁªú , facility type: 4 , login user: 5 , icon:  , dir:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name` FROM `tbl_facility_type` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_facilitys` T0 WHERE T0.`type` = ? AND T0.`name` LIKE BINARY ? ] - `4`, `%ÂÆΩÂ∏¶ÁΩëÁªú%`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     1.0ms] - [INSERT INTO `tbl_facilitys` (`type`, `name`, `pic`) VALUES (?, ?, ?)] - `4`, `ÂÆΩÂ∏¶ÁΩëÁªú`, ``
2017/06/05 21:57:39 [1;34m[D] [DelFacility]  Facility: 42 , login user: 5 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:39 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `42`
2017/06/05 21:57:39 [1;33m[W] [DelFacility]  Prevent deleting if this facility has been used or delete cascaded [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /     db.Exec /     1.2ms] - [DELETE FROM `tbl_facilitys` WHERE `id` = ?] - `42`
2017/06/05 21:57:39 [1;33m[W] [DelFacility]  TODO: Delete the icon related [0m
--- PASS: Test_AddFacility (0.02s)
	AccessoryFacility_test.go:399: Test AddFacility
	AccessoryFacility_test.go:406: <Case 1> Permission: user(-1) not login
	AccessoryFacility_test.go:406: <Case 2> Permission: user(0) is SYSTEM
	AccessoryFacility_test.go:406: <Case 3> Permission: user(100000000) does not exist
	AccessoryFacility_test.go:406: <Case 4> Permission: user(9) is a regular user
	AccessoryFacility_test.go:406: <Case 5> Permission: user(6) is an agency
	AccessoryFacility_test.go:414: <Case 6> Invalid argument: name is empty
	AccessoryFacility_test.go:424: <Case 7> Invalid argument: type(-1) < 0
	AccessoryFacility_test.go:424: <Case 8> Invalid argument: type(0) = 0
	AccessoryFacility_test.go:424: <Case 9> Invalid argument: type(100000000) does not exist
	AccessoryFacility_test.go:432: <Case 10> Invalid argument: duplicated
	AccessoryFacility_test.go:439: <Case 11> Test: add facility
	AccessoryFacility_test.go:445: new facility: 42
	AccessoryFacility_test.go:448: <Case 12> Test: delete the new facility
=== RUN   Test_GetHouseFacilities
2017/06/05 21:57:39 [1;34m[D] [AddHouseFacilities]  hid: -1 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseFacilities]  hid: 0 [0m
2017/06/05 21:57:39 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseFacilities]  hid: 100000000 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [AddHouseFacilities]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseFacilities]  hid: 4 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT hf.id, f.name, t.name AS type, f.pic AS icon, hf.qty, hf.desc
							FROM tbl_house_facility AS hf, tbl_facilitys AS f, tbl_facility_type AS t 
							WHERE hf.house=4 AND hf.facility=f.id AND f.type=t.id]
2017/06/05 21:57:39 [1;31m[E] [AddHouseFacilities]  <Error> code: 1102, ( house:4 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [AddHouseFacilities]  hid: 6 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT hf.id, f.name, t.name AS type, f.pic AS icon, hf.qty, hf.desc
							FROM tbl_house_facility AS hf, tbl_facilitys AS f, tbl_facility_type AS t 
							WHERE hf.house=6 AND hf.facility=f.id AND f.type=t.id]
--- PASS: Test_GetHouseFacilities (0.00s)
	AccessoryFacility_test.go:462: Test GetHouseFacilities
	AccessoryFacility_test.go:465: <Case 1 > Invalid argument: house < 0
	AccessoryFacility_test.go:472: <Case 2 > Invalid argument: house = 0
	AccessoryFacility_test.go:479: <Case 3 > Invalid argument: house does not exist
	AccessoryFacility_test.go:486: <Case 4 > Invalid argument: house does not have any facility
	AccessoryFacility_test.go:493: <Case 5 > get house facility list
	AccessoryFacility_test.go:501:  0 : {Id:7 Name:ÁîµËßÜÊú∫ Type:ÂÆ∂Áî®ÁîµÂô® Icon:./pics/201706/03171537424596.png Qty:2 Desc:Ê≤ôÂèëËå∂Âá†ËØ¥Êòé}
	AccessoryFacility_test.go:501:  1 : {Id:8 Name:‰π¶Ê°å Type:ÂÆ∂ÂÖ∑ Icon: Qty:3 Desc:ÁîµËßÜÊú∫ËØ¥Êòé}
	AccessoryFacility_test.go:501:  2 : {Id:9 Name:Â£ÅÊåÇÁ©∫Ë∞É Type:ÂÆ∂Áî®ÁîµÂô® Icon: Qty:11 Desc:}
=== RUN   Test_EditHouseFacility
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: -1 , facility: -1 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( facility:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: -1 , facility: 0 , qty: 0 , desc:  [0m
2017/06/05 21:57:39 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( facility:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: -1 , facility: 100000000 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [EditHouseFacility]  <Error> code: 1102, ( facility:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: -1 , facility: 3 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/06/05 21:57:39 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( house facility:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 0 , facility: 3 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
2017/06/05 21:57:39 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( house facility:0 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 100000000 , facility: 3 , qty: 0 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:39 [1;31m[E] [EditHouseFacility]  <Error> code: 1102, ( facility:100000000 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 7 , facility: 3 , qty: -1 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  house: 6 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  landlord: 2 , agency: 1 [0m
2017/06/05 21:57:39 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( qty:-1 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 7 , facility: 3 , qty: 1 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  house: 6 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  landlord: 2 , agency: 1 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `6`, `3`, `7`
2017/06/05 21:57:39 [1;31m[E] [EditHouseFacility]  <Error> code: 1105, ( house:6, facility:3 )
 [0m
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  login user: 100000000 , house facility: 7 , facility: 3 , qty: 1 , desc:  [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.1ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `7`
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  house: 6 [0m
[ORM]2017/06/05 21:57:39  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/06/05 21:57:39 [1;34m[D] [EditHouseFacility]  landlord: 2 , agency: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `6`, `3`, `7`
2017/06/05 21:57:40 [1;31m[E] [EditHouseFacility]  <Error> code: 1105, ( house:6, facility:3 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: 9 , house facility: 7 , facility: 3 , qty: 1 , desc:  [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 2 , agency: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `6`, `3`, `7`
2017/06/05 21:57:40 [1;31m[E] [EditHouseFacility]  <Error> code: 1105, ( house:6, facility:3 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: 11 , house facility: 5 , facility: 4 , qty: 1 , desc:  [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `2`, `4`, `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.1ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [EditHouseFacility]  <Error> code: 1106, ( uid:11 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: 4 , house facility: 5 , facility: 7 , qty: 10 , desc: ÊµãËØïËØ¥Êòé [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `7`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `2`, `7`, `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.6ms] - [UPDATE `tbl_house_facility` SET `facility` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `7`, `10`, `ÊµãËØïËØ¥Êòé`, `5`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: 6 , house facility: 5 , facility: 4 , qty: 333 , desc: fdesc_1111 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `2`, `4`, `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.6ms] - [UPDATE `tbl_house_facility` SET `facility` = ?, `qty` = ?, `desc` = ? WHERE `id` = ?] - `4`, `333`, `fdesc_1111`, `5`
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: 9 , house: 2 , fl: [{Id:0 Facility:7 Qty:3 Desc:add desc}] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `7`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`house`, T0.`facility`, T0.`qty`, T0.`desc` FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? LIMIT 1] - `2`, `7`
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  errT: <QuerySeter> no row found [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Begin /     0.2ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /  db.Prepare /     0.2ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  0 : {0 7 3 add desc} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     st.Exec /     0.4ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `2`, `7`, `3`, `add desc`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    st.Close /     0.0ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  Commit [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /   tx.Commit /     1.7ms] - [COMMIT]
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: 9 , house facility: 26 , facility: 7 , qty: 0 , desc: fdesc_1111 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `7`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `26`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? AND NOT T0.`id` = ? ] - `2`, `7`, `26`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.7ms] - [DELETE FROM `tbl_house_facility` WHERE `id` = ?] - `26`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  Delete 1 records [0m
--- PASS: Test_EditHouseFacility (0.04s)
	AccessoryFacility_test.go:512: Test EditHouseFacility
	AccessoryFacility_test.go:515: <Case 1 > Invalid argument: facility < 0
	AccessoryFacility_test.go:522: <Case 2 > Invalid argument: facility = 0
	AccessoryFacility_test.go:529: <Case 3 > Invalid argument: facility does not exist
	AccessoryFacility_test.go:536: <Case 4 > Invalid argument: house facility < 0
	AccessoryFacility_test.go:543: <Case 5 > Invalid argument: house facility = 0
	AccessoryFacility_test.go:550: <Case 6 > Invalid argument: house facility does not exist
	AccessoryFacility_test.go:557: <Case 7 > Invalid argument: qty < 0
	AccessoryFacility_test.go:564: <Case 8 > Permission: user not login
	AccessoryFacility_test.go:571: <Case 9 > Permission: user does not exist
	AccessoryFacility_test.go:578: <Case 10 > Permission: user is a regular user
	AccessoryFacility_test.go:585: <Case 11 > Permission: user is a agency, but not for this house
	AccessoryFacility_test.go:592: <Case 12 > Update by administrator
	AccessoryFacility_test.go:599: <Case 13 > Restore by house agency
	AccessoryFacility_test.go:606: <Case 14 > Add new facility by landlord
	AccessoryFacility_test.go:615: <Case 15 > remove the new facility by landlord
=== RUN   Test_DeleteHouseFacility
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( house facility:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [EditHouseFacility]  <Error> code: 1101, ( house facility:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 100000000 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [EditHouseFacility]  <Error> code: 1102, ( facility:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: -1 , house facility: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
2017/06/05 21:57:40 [1;31m[E] [EditHouseFacility]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: 11 , house facility: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [EditHouseFacility]  <Error> code: 1106, ( uid:11 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: 2 , house facility: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `5`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 9 , agency: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [EditHouseFacility]  <Error> code: 1106, ( uid:2 )
 [0m
--- PASS: Test_DeleteHouseFacility (0.01s)
	AccessoryFacility_test.go:630: Test DeleteHouseFacility
	AccessoryFacility_test.go:633: <Case 1 > Invalid argument: house facility < 0
	AccessoryFacility_test.go:640: <Case 2 > Invalid argument: house facility = 0
	AccessoryFacility_test.go:647: <Case 3 > Invalid argument: house facility does not exist
	AccessoryFacility_test.go:654: <Case 4 > Permission: user not login
	AccessoryFacility_test.go:661: <Case 5 > Permission: user is a regular user
	AccessoryFacility_test.go:668: <Case 6 > Permission: user is an agency, but not for this house
	AccessoryFacility_test.go:675: Please ref to API Test_AddHouseFacilities for actual processing of DeleteHouseFacility
=== RUN   Test_AddHouseFacilities
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: -1 , house: -1 , fl: [] [0m
2017/06/05 21:57:40 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: -1 , house: 0 , fl: [] [0m
2017/06/05 21:57:40 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: -1 , house: 100000000 , fl: [] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [AddHouseFacilities]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: -1 , house: 4 , fl: [] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;31m[E] [AddHouseFacilities]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: 100000000 , house: 4 , fl: [] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [AddHouseFacilities]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: 9 , house: 4 , fl: [] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [AddHouseFacilities]  <Error> code: 1106, ( user:9 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: 11 , house: 4 , fl: [] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [AddHouseFacilities]  <Error> code: 1106, ( user:11 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: 5 , house: 4 , fl: [] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( no facility found )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: 5 , house: 4 , fl: [] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;31m[E] [AddHouseFacilities]  <Error> code: 1101, ( no facility found )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: 5 , house: 4 , fl: [{Id:0 Facility:100000000 Qty:3 Desc:add desc}] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [AddHouseFacilities]  <Error> code: 1102, ( facility:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: 5 , house: 4 , fl: [{Id:0 Facility:7 Qty:3 Desc:add desc}] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `7`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`house`, T0.`facility`, T0.`qty`, T0.`desc` FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? LIMIT 1] - `4`, `7`
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  errT: <QuerySeter> no row found [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Begin /     0.0ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /  db.Prepare /     0.1ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  0 : {0 7 3 add desc} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     st.Exec /     0.2ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `4`, `7`, `3`, `add desc`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    st.Close /     0.0ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  Commit [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /   tx.Commit /     0.8ms] - [COMMIT]
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  user: 5 , house: 4 , fl: [{Id:0 Facility:3 Qty:33 Desc:add desc 3} {Id:0 Facility:7 Qty:77 Desc:add desc 7} {Id:0 Facility:8 Qty:88 Desc:add desc 8}] [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `7`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `type`, `name`, `pic` FROM `tbl_facilitys` WHERE `id` = ? ] - `8`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`house`, T0.`facility`, T0.`qty`, T0.`desc` FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? LIMIT 1] - `4`, `3`
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  errT: <QuerySeter> no row found [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`house`, T0.`facility`, T0.`qty`, T0.`desc` FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? LIMIT 1] - `4`, `7`
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  errT: <nil> [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`house`, T0.`facility`, T0.`qty`, T0.`desc` FROM `tbl_house_facility` T0 WHERE T0.`house` = ? AND T0.`facility` = ? LIMIT 1] - `4`, `8`
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  errT: <QuerySeter> no row found [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Begin /     0.0ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /  db.Prepare /     0.1ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  0 : {0 3 33 add desc 3} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     st.Exec /     0.1ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `4`, `3`, `33`, `add desc 3`
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  1 : {0 8 88 add desc 8} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     st.Exec /     0.1ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)] - `4`, `8`, `88`, `add desc 8`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.2ms] - [UPDATE `tbl_house_facility` SET `qty` = ?, `desc` = ? WHERE `id` = ?] - `77`, `add desc 7`, `27`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    st.Close /     0.0ms] - [INSERT INTO `tbl_house_facility` (`house`, `facility`, `qty`, `desc`) VALUES (?, ?, ?, ?)]
2017/06/05 21:57:40 [1;34m[D] [AddHouseFacilities]  Commit [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /   tx.Commit /     0.7ms] - [COMMIT]
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: 5 , house facility: 27 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `27`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 4 , agency: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.5ms] - [DELETE FROM `tbl_house_facility` WHERE `id` = ?] - `27`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  Delete 1 records [0m
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: 5 , house facility: 28 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `28`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 4 , agency: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.1ms] - [DELETE FROM `tbl_house_facility` WHERE `id` = ?] - `28`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  Delete 1 records [0m
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  login user: 5 , house facility: 29 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `facility`, `qty`, `desc` FROM `tbl_house_facility` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  house: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  landlord: 4 , agency: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.2ms] - [DELETE FROM `tbl_house_facility` WHERE `id` = ?] - `29`
2017/06/05 21:57:40 [1;34m[D] [EditHouseFacility]  Delete 1 records [0m
--- PASS: Test_AddHouseFacilities (0.04s)
	AccessoryFacility_test.go:690: Test AddHouseFacilities
	AccessoryFacility_test.go:693: <Case 1> Invalid argument: house < 0
	AccessoryFacility_test.go:700: <Case 2> Invalid argument: house = 0
	AccessoryFacility_test.go:707: <Case 3> Invalid argument: house does not exist
	AccessoryFacility_test.go:714: <Case 4> Invalid argument: user not login
	AccessoryFacility_test.go:721: <Case 5> Invalid argument: user does not exist
	AccessoryFacility_test.go:728: <Case 6> Permission Checking: user is a regular user
	AccessoryFacility_test.go:735: <Case 7> Permission Checking: user is an agency, but not for this house
	AccessoryFacility_test.go:763: <Case 8> Invalid argument: no facility list assigned, nil
	AccessoryFacility_test.go:770: <Case 9> Invalid argument: no facility list assigned, empty
	AccessoryFacility_test.go:778: <Case 10> Invalid argument: facility not found
	AccessoryFacility_test.go:786: <Case 11> add facility to house that don't have any facility
	AccessoryFacility_test.go:794: new house facility ids: [27]
	AccessoryFacility_test.go:796: <Case 12> add facility to house that already have facility
	AccessoryFacility_test.go:806: new house facility ids: [28 29]
	AccessoryFacility_test.go:808: <Case 13> Remove all house facilities added above
	AccessoryFacility_test.go:811: Delete new house facility: 27
	AccessoryFacility_test.go:818: Delete new house facility: 28
	AccessoryFacility_test.go:818: Delete new house facility: 29
=== RUN   Test_GetUserInfo_1
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 10000000 , ln: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10000000`
2017/06/05 21:57:40 [1;31m[E] [GetUserInfo]  <Error> code: 1102, ( uid:10000000 )
 [0m
--- PASS: Test_GetUserInfo_1 (0.00s)
	Admin_test.go:13: Test GetUserInfo, user does not exist
	Admin_test.go:18: Pass, user: {0     0 }
=== RUN   Test_GetUserInfo_2
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 4 , ln: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  landlord himself [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:4 Name:Êú™ËÆæÁΩÆ IdNo: Phone:15306261804 HeadPortrait: Role:0 RoleDesc:Manager} [0m
--- PASS: Test_GetUserInfo_2 (0.00s)
	Admin_test.go:23: Test GetUserInfo, user exist, login user is landload
	Admin_test.go:29: Pass, user: {4 Êú™ËÆæÁΩÆ  15306261804  0 Manager}
=== RUN   Test_GetUserInfo_3
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 4 , ln: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  admin [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:4 Name:Êú™ËÆæÁΩÆ IdNo: Phone:15306261804 HeadPortrait: Role:0 RoleDesc:Manager} [0m
--- PASS: Test_GetUserInfo_3 (0.00s)
	Admin_test.go:34: Test GetUserInfo, user exist, login user is administrator
	Admin_test.go:40: Pass, user: {4 Êú™ËÆæÁΩÆ  15306261804  0 Manager}
=== RUN   Test_GetUserInfo_4
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 4 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  uid: 4 , aid: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getHouseListByOwner]  oid: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_user` T1 ON T1.`id` = T0.`owner_id` WHERE T1.`id` = ? LIMIT 1000] - `4`
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  house count: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  agency [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:4 Name:Êú™ËÆæÁΩÆ IdNo: Phone:15306261804 HeadPortrait: Role:0 RoleDesc:Manager} [0m
--- PASS: Test_GetUserInfo_4 (0.01s)
	Admin_test.go:45: Test GetUserInfo, user exist, login user is landlord's agency
	Admin_test.go:51: Pass, user: {4 Êú™ËÆæÁΩÆ  15306261804  0 Manager}
=== RUN   Test_GetUserInfo_5
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 4 , ln: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:7 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  uid: 4 , aid: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;31m[E] [isAgency]  err: <Error> code: 1102, ( uid:7 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [isOwnerAgency]  err: <Error> code: 1102, ( uid:7 )
 , is agency: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:4 Name:Êú™ËÆæÁΩÆ IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
--- PASS: Test_GetUserInfo_5 (0.00s)
	Admin_test.go:56: Test GetUserInfo, user exist, login user is nothing
	Admin_test.go:62: Pass, user: {4 Êú™ËÆæÁΩÆ    0 Manager}
=== RUN   Test_GetSaltByName_1
2017/06/05 21:57:40 [1;34m[D] [GetSaltByName]  login user: unknown [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `login_name` = ? ] - `unknown`
2017/06/05 21:57:40 [1;31m[E] [GetSaltByName]  <Error> code: 1102, ( <QuerySeter> no row found )
 [0m
--- PASS: Test_GetSaltByName_1 (0.00s)
	Admin_test.go:78: Test GetSaltByName, user not exist
	Admin_test.go:83: salt:  , rand: 
=== RUN   Test_GetSaltByName_2
2017/06/05 21:57:40 [1;34m[D] [GetSaltByName]  login user: 15306261804 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `login_name` = ? ] - `15306261804`
2017/06/05 21:57:40 [1;34m[D] [newUserSalt]  new salt: 842dae46282b0875b746437eefbe77c1 , [132 45 174 70 40 43 8 117 183 70 67 126 239 190 119 193] [0m
--- PASS: Test_GetSaltByName_2 (0.00s)
	Admin_test.go:88: Test GetSaltByName, user exist
	Admin_test.go:93: salt: f1c0fb8578e356746e0f98ce07b7a27f , rand: 842dae46282b0875b746437eefbe77c1
=== RUN   Test_Logout_1
2017/06/05 21:57:40 [1;34m[D] [Logout]  uid: 100000 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000`
2017/06/05 21:57:40 [1;31m[E] [Logout]  <Error> code: 1102, ( uid:100000 )
 [0m
--- PASS: Test_Logout_1 (0.00s)
	Admin_test.go:109: Test Logout, user not exist
=== RUN   Test_Logout_2
2017/06/05 21:57:40 [1;34m[D] [Logout]  uid: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.1ms] - [UPDATE `tbl_user` SET `session` = ? WHERE `id` = ?] - ``, `6`
--- PASS: Test_Logout_2 (0.00s)
	Admin_test.go:117: Test Logout, user exist
=== RUN   Test_FetchSms_1
2017/06/05 21:57:40 [1;34m[D] [FetchSms]  login user:  [0m
2017/06/05 21:57:40 [1;34m[D] [checkPhoneNo]  phone:  [0m
2017/06/05 21:57:40 [1;31m[E] [FetchSms]  <Error> code: 1301,  [0m
2017/06/05 21:57:40 [1;34m[D] [FetchSms]  login user: 12345678 [0m
2017/06/05 21:57:40 [1;34m[D] [checkPhoneNo]  phone: 12345678 [0m
2017/06/05 21:57:40 [1;31m[E] [FetchSms]  <Error> code: 1302,  [0m
2017/06/05 21:57:40 [1;34m[D] [FetchSms]  login user: 12345678901234 [0m
2017/06/05 21:57:40 [1;34m[D] [checkPhoneNo]  phone: 12345678901234 [0m
2017/06/05 21:57:40 [1;31m[E] [FetchSms]  <Error> code: 1302,  [0m
2017/06/05 21:57:40 [1;34m[D] [FetchSms]  login user: 1234567xyz9 [0m
2017/06/05 21:57:40 [1;34m[D] [checkPhoneNo]  phone: 1234567xyz9 [0m
2017/06/05 21:57:40 [1;31m[E] [FetchSms]  <Error> code: 1303, ( strconv.ParseInt: parsing "1234567xyz9": invalid syntax )
 [0m
2017/06/05 21:57:40 [1;34m[D] [FetchSms]  login user: 05306261804 [0m
2017/06/05 21:57:40 [1;34m[D] [checkPhoneNo]  phone: 05306261804 [0m
2017/06/05 21:57:40 [1;31m[E] [FetchSms]  <Error> code: 1304,  [0m
2017/06/05 21:57:40 [1;34m[D] [FetchSms]  login user: 25306261804 [0m
2017/06/05 21:57:40 [1;34m[D] [checkPhoneNo]  phone: 25306261804 [0m
2017/06/05 21:57:40 [1;31m[E] [FetchSms]  <Error> code: 1304,  [0m
--- PASS: Test_FetchSms_1 (0.00s)
	Admin_test.go:129: Test FetchSms, phone number incorrect
=== RUN   Test_FetchSms_2
--- PASS: Test_FetchSms_2 (0.00s)
	Admin_test.go:173: Test FetchSms, fail to post sms_code
=== RUN   Test_FetchSms_3
2017/06/05 21:57:40 [1;34m[D] [FetchSms]  login user: 15306261804 [0m
2017/06/05 21:57:40 [1;34m[D] [checkPhoneNo]  phone: 15306261804 [0m
2017/06/05 21:57:40 [1;34m[D] [generateSmsCode]  smsCode: 530156 [0m
2017/06/05 21:57:40 [1;33m[W] [postSms]  NOT Implement, please modify test code once it get implements [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `phone`, `sms_code`, `expire` FROM `tbl_sms_code` WHERE `phone` = ? ] - `15306261804`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.9ms] - [UPDATE `tbl_sms_code` SET `sms_code` = ?, `expire` = ? WHERE `id` = ?] - `530156`, `2017-06-05 22:07:40.096880132 +0800 +0800`, `1`
--- PASS: Test_FetchSms_3 (0.00s)
	Admin_test.go:185: Test FetchSms
	Admin_test.go:190: sms: 530156
=== RUN   Test_GetHouseListByType_1
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: -1 , begin: 0 , count: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( Invalid list type:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 4 , begin: 0 , count: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( Invalid list type:4 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 3 , begin: -1 , count: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( Invalid begin position:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 3 , begin: 0 , count: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( Invalid count:-1 )
 [0m
--- PASS: Test_GetHouseListByType_1 (0.00s)
	House_test.go:16: Test GetHouseListByType, Invalid Arguments
=== RUN   Test_getRecommendHouseList_1
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 1 , begin: 0 , count: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [getRecommendHouseList]  begin: 0 , count: 0 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_house_recommend` T0 ]
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 1 , begin: 2 , count: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getRecommendHouseList]  begin: 2 , count: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_house_recommend` T0 ]
2017/06/05 21:57:40 [1;31m[E] [getRecommendHouseList]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 1 , begin: 0 , count: 2 [0m
2017/06/05 21:57:40 [1;34m[D] [getRecommendHouseList]  begin: 0 , count: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_house_recommend` T0 ]
2017/06/05 21:57:40 [1;33m[W] [getRecommendHouseList]  TODO: all() will be restricted by limit, and return max 1000 records [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`house`, T0.`who`, T0.`when` FROM `tbl_house_recommend` T0 ORDER BY T0.`when` ASC LIMIT 2]
--- PASS: Test_getRecommendHouseList_1 (0.00s)
	House_test.go:47: Test getRecommendHouseList
	House_test.go:55: total: 2
	House_test.go:72: IDs: [1 2]
=== RUN   Test_getDeductedHouseList_1
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 2 , begin: 0 , count: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [getDeductedHouseList]  begin: 0 , fetch_numb: 0 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     1.1ms] - [SELECT COUNT(*) AS count FROM (SELECT p0.id as p0_id, p1.id as p1_id, p0.house_id, p0.rental_bid as p0_bid, p1.rental_bid as p1_bid 
							FROM (SELECT t0.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT min(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t0 
								ON rental.id=t0.id WHERE t0.id IS NOT NULL) AS p0, (SELECT t1.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT  max(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t1 
								ON rental.id=t1.id WHERE t1.id IS NOT NULL) AS p1 
							WHERE p0.house_id=p1.house_id 
							HAVING (p1_bid - p0_bid) < 0) AS tmp]
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 2 , begin: 1 , count: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getDeductedHouseList]  begin: 1 , fetch_numb: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     1.0ms] - [SELECT COUNT(*) AS count FROM (SELECT p0.id as p0_id, p1.id as p1_id, p0.house_id, p0.rental_bid as p0_bid, p1.rental_bid as p1_bid 
							FROM (SELECT t0.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT min(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t0 
								ON rental.id=t0.id WHERE t0.id IS NOT NULL) AS p0, (SELECT t1.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT  max(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t1 
								ON rental.id=t1.id WHERE t1.id IS NOT NULL) AS p1 
							WHERE p0.house_id=p1.house_id 
							HAVING (p1_bid - p0_bid) < 0) AS tmp]
2017/06/05 21:57:40 [1;31m[E] [getDeductedHouseList]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 2 , begin: 0 , count: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getDeductedHouseList]  begin: 0 , fetch_numb: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) AS count FROM (SELECT p0.id as p0_id, p1.id as p1_id, p0.house_id, p0.rental_bid as p0_bid, p1.rental_bid as p1_bid 
							FROM (SELECT t0.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT min(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t0 
								ON rental.id=t0.id WHERE t0.id IS NOT NULL) AS p0, (SELECT t1.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT  max(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t1 
								ON rental.id=t1.id WHERE t1.id IS NOT NULL) AS p1 
							WHERE p0.house_id=p1.house_id 
							HAVING (p1_bid - p0_bid) < 0) AS tmp]
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT p0.id as p0_id, p1.id as p1_id, p0.house_id, p0.rental_bid as p0_bid, p1.rental_bid as p1_bid 
							FROM (SELECT t0.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT min(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t0 
								ON rental.id=t0.id WHERE t0.id IS NOT NULL) AS p0, (SELECT t1.id, house_id, rental_bid 
								FROM tbl_rental AS rental LEFT JOIN (SELECT  max(id) AS id FROM tbl_rental WHERE active=true GROUP BY house_id) AS t1 
								ON rental.id=t1.id WHERE t1.id IS NOT NULL) AS p1 
							WHERE p0.house_id=p1.house_id 
							HAVING (p1_bid - p0_bid) < 0 LIMIT 0, 1]
--- PASS: Test_getDeductedHouseList_1 (0.00s)
	House_test.go:76: Test getDeductedHouseList
	House_test.go:84: total: 1
	House_test.go:101: IDs: [2]
=== RUN   Test_getNewHouseList_1
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 3 , begin: 0 , count: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  begin: 0 , fetch_numb: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  tNow: 2017-06-05 21:57:40.104109143 +0800 CST , UTC: 2017-06-05 13:57:40.104109143 +0000 UTC [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  tBegin: 2017-05-29 13:57:40.104109143 +0000 UTC [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  t0: 2017-05-29 00:00:00 +0000 UTC [0m
2017/06/05 21:57:40 [1;33m[W] [getNewHouseList]  TODO: need to check the real submit_time, UTC or Local? [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  sql: SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-29 00:00:00 +0000 UTC' [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) AS count FROM (SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-29 00:00:00 +0000 UTC') AS tmp]
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 3 , begin: 1 , count: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  begin: 1 , fetch_numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  tNow: 2017-06-05 21:57:40.10452011 +0800 CST , UTC: 2017-06-05 13:57:40.10452011 +0000 UTC [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  tBegin: 2017-05-29 13:57:40.10452011 +0000 UTC [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  t0: 2017-05-29 00:00:00 +0000 UTC [0m
2017/06/05 21:57:40 [1;33m[W] [getNewHouseList]  TODO: need to check the real submit_time, UTC or Local? [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  sql: SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-29 00:00:00 +0000 UTC' [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) AS count FROM (SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-29 00:00:00 +0000 UTC') AS tmp]
2017/06/05 21:57:40 [1;31m[E] [getNewHouseList]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseListByType]  <Error> code: 1101, ( begin position out of range )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseListByType]  type: 3 , begin: 0 , count: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  begin: 0 , fetch_numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  tNow: 2017-06-05 21:57:40.105181573 +0800 CST , UTC: 2017-06-05 13:57:40.105181573 +0000 UTC [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  tBegin: 2017-05-29 13:57:40.105181573 +0000 UTC [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  t0: 2017-05-29 00:00:00 +0000 UTC [0m
2017/06/05 21:57:40 [1;33m[W] [getNewHouseList]  TODO: need to check the real submit_time, UTC or Local? [0m
2017/06/05 21:57:40 [1;34m[D] [getNewHouseList]  sql: SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-29 00:00:00 +0000 UTC' [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) AS count FROM (SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-29 00:00:00 +0000 UTC') AS tmp]
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT Id FROM tbl_house WHERE publish_time IS NOT NULL AND publish_time>='2017-05-29 00:00:00 +0000 UTC' LIMIT 0, 1]
--- PASS: Test_getNewHouseList_1 (0.00s)
	House_test.go:105: Test getNewHouseList
	House_test.go:113: total: 1
	House_test.go:130: IDs: [2]
=== RUN   Test_GetBehalfList_1
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 0 , begin: -1 , tofetch: 0 , uid: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetBehalfList]  <Error> code: 1101, ( begin:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: -1 , uid: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetBehalfList]  <Error> code: 1101, ( tofetch:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: 0 , uid: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 0 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: false , bAdmin: false [0m
2017/06/05 21:57:40 [1;31m[E] [GetBehalfList]  <Error> code: 1106, ( login user:9 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: 0 , uid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=2]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 0 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: false , bAdmin: false [0m
2017/06/05 21:57:40 [1;31m[E] [GetBehalfList]  <Error> code: 1106, ( login user:2 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: 0 , uid: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE agency_id='6'  AND for_rent=1]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  total: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  total: 3 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 3 , tofetch: 1 , uid: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  total: 3 [0m
2017/06/05 21:57:40 [1;31m[E] [GetBehalfList]  <Error> code: 1101, ( begin:3 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 0 , begin: 0 , tofetch: 3 , uid: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     1.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  total: 3 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT id FROM tbl_house WHERE  1 AND for_rent=1 LIMIT 0, 3]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 1 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1 AND rent_stat=1]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  total: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 1 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1 AND rent_stat=1]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  total: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 2 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1 AND rent_stat=2]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  total: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 2 , begin: 0 , tofetch: 1 , uid: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_rent=1 AND rent_stat=2]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  total: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT id FROM tbl_house WHERE  1 AND for_rent=1 AND rent_stat=2 LIMIT 0, 1]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 3 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.1ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_sale=1]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  total: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  typ: 3 , begin: 0 , tofetch: 0 , uid: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  bAgency: true , bAdmin: true [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) AS count FROM tbl_house WHERE 1 AND for_sale=1]
2017/06/05 21:57:40 [1;34m[D] [GetBehalfList]  total: 0 [0m
--- PASS: Test_GetBehalfList_1 (0.03s)
	House_test.go:138: Test GetBehalfList, Invalid Arguments
	House_test.go:140: <Case> begin position < 0
	House_test.go:146: <Case> fetch count < 0
	House_test.go:152: <Case> login user has no right to access, neither agency nor administrator
	House_test.go:158: <Case> login user is house owner himself
	House_test.go:164: <Case> login user is a agency
	House_test.go:170: total: 1
	House_test.go:172: <Case> login user is a administrator
	House_test.go:178: total: 3
	House_test.go:180: <Case> begin position beyond total
	House_test.go:186: <Case> all behalfed houses
	House_test.go:188: fetched: 3 , houses: [3 4 6]
	House_test.go:194: <Case> all behalfed houses to rent
	House_test.go:200: total: 0
	House_test.go:202: fetched: 0 , houses: []
	House_test.go:208: <Case> all behalfed houses rented
	House_test.go:214: total: 1
	House_test.go:216: fetched: 1 , houses: [3]
	House_test.go:222: <Case> all behalfed houses to sale
	House_test.go:228: total: 0
	House_test.go:230: fetched: 0 , houses: []
=== RUN   Test_GetHouseDigestInfo
2017/06/05 21:57:40 [1;34m[D] [GetHouseDigestInfo]  hid: 10000000000 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT house.id AS id, prop.name AS property, address AS property_addr, bedrooms, 
								livingrooms, bathrooms, acreage, cover_img 
							FROM tbl_house AS house, tbl_property AS prop 
							WHERE house.property_id=prop.id AND house.id=10000000000]
2017/06/05 21:57:40 [1;31m[E] [GetHouseDigestInfo]  <Error> code: 1103, ( <QuerySeter> no row found )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseDigestInfo]  hid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT house.id AS id, prop.name AS property, address AS property_addr, bedrooms, 
								livingrooms, bathrooms, acreage, cover_img 
							FROM tbl_house AS house, tbl_property AS prop 
							WHERE house.property_id=prop.id AND house.id=2]
2017/06/05 21:57:40 [1;34m[D] [getHouseRental]  hid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`house_id`, T0.`rental_bid`, T0.`rental_bottom`, T0.`who`, T0.`when`, T0.`active` FROM `tbl_rental` T0 WHERE T0.`house_id` = ? AND T0.`active` = ? ORDER BY T0.`id` ASC LIMIT 1000] - `2`, `true`
2017/06/05 21:57:40 [1;34m[D] [getHouseRental]  rs: [{4 2 150000 140000 2 2017-01-22 13:49:10 +0000 UTC true} {5 2 140000 130000 2 2017-01-23 12:16:17 +0000 UTC true}] [0m
2017/06/05 21:57:40 [1;34m[D] [getHouseTags]  hid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT htags.tag AS tag_id, tags.tag AS tag_desc
							FROM tbl_house_tag AS htags, tbl_tag AS tags 
							WHERE htags.tag=tags.id AND house=2]
2017/06/05 21:57:40 [1;34m[D] [getHouseTags]  tags: [{1 Êª°‰∫åÂîØ‰∏Ä} {2 Âú∞ÈìÅÊàø} {3 Ê±üÊôØÊàø}] [0m
--- PASS: Test_GetHouseDigestInfo (0.00s)
	House_test.go:242: Test GetHouseDigestInfo
	House_test.go:244: <Case> house does not exist
	House_test.go:250: <Case> house actual exist
	House_test.go:256: house: {Id:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† PropertyAddr:ÈïøÊ±üÂçóË∑Ø 666Âè∑ Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 Rental:140000 Pricing:-10000 CoverImg:31 Tags:[{TagId:1 TagDesc:Êª°‰∫åÂîØ‰∏Ä} {TagId:2 TagDesc:Âú∞ÈìÅÊàø} {TagId:3 TagDesc:Ê±üÊôØÊàø}]}
=== RUN   Test_GetHouseInfo
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  house: -1 , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseInfo]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  house: 0 , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseInfo]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  house: 100000000 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [GetHouseInfo]  <Error> code: 1102, ( hid:100000000 )
 [0m
--- PASS: Test_GetHouseInfo (0.00s)
	House_test.go:264: Test GetHouseInfo
	House_test.go:271: <Case 1> Invalid Arguments: house(-1) < 0
	House_test.go:271: <Case 2> Invalid Arguments: house(0) = 0
	House_test.go:271: <Case 3> Invalid Arguments: house(100000000) does not exist
=== RUN   Test_ModifyHouseInfo
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:-1 BuildingNo: FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( property:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:0 BuildingNo: FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( property:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo: FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( building_no: )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:-1 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( building_no:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:0 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( building_no:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:-1 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( floor_total:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( floor_total:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:-1 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( floor_this:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( floor_this:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:36 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( floor_this:36 > FloorTotal:35 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:-1 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( bedrooms:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:-1 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( livingrooms:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:-1 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( bathrooms:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( Bedrooms:0, Livingrooms:0, bathrooms:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:100 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( acreage:100 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10300 ForSale:false ForRent:false Decoration:-1} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( decoration:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10300 ForSale:false ForRent:false Decoration:5} , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( decoration:5 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:100000000 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:200000000 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 200000000 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `200000000`
2017/06/05 21:57:40 [1;31m[E] [GetPropertyInfo]  <Error> code: 1102, ( <QuerySeter> no row found )
 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1101, ( Property:200000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:1 BuildingNo:177 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0} , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `1`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `1`, `177`, `1505`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  h.Id: 3 , hif.Id: 2 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1105, ( property:1, building:%!d(string=177), house:1505 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0} , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `2`, `175`, ``
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1106, ( login user:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1106, ( login user:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0} , login user: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `2`, `175`, ``
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.1ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1106, ( login user:2 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1106, ( login user:2 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0} , login user: 11 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     1.2ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `2`, `175`, ``
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 11 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouse]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [canAccessHouse]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.1ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:200 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0} , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.8ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `2`, `200`, `1505`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     2.8ms] - [UPDATE tbl_house SET property_id=2, building_no=200, floor_total=35, floor_this=15,
								house_no='1505', bedrooms=2, livingrooms=1, bathrooms=1, acreage=10000, 
								modify_time='2017-6-5 21:57:40', for_sale=false, for_rent=false, decoration=0 WHERE id=2]
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [canAccessHouse]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [canAccessHouse]  house: 2 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:201 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0} , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     1.2ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `2`, `201`, `1505`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     3.1ms] - [UPDATE tbl_house SET property_id=2, building_no=201, floor_total=35, floor_this=15,
								house_no='1505', bedrooms=2, livingrooms=1, bathrooms=1, acreage=10000, 
								modify_time='2017-6-5 21:57:40', for_sale=false, for_rent=false, decoration=0 WHERE id=2]
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [canAccessHouse]  house: 2 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [canAccessHouse]  house: 2 , login user: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  input house info: &{Id:2 Property:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0} , login user: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? LIMIT 1] - `2`, `199`, `1505`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.1ms] - [UPDATE tbl_house SET property_id=2, building_no=199, floor_total=35, floor_this=15,
								house_no='1505', bedrooms=2, livingrooms=1, bathrooms=1, acreage=10000, 
								modify_time='2017-6-5 21:57:40', for_sale=false, for_rent=false, decoration=0 WHERE id=2]
2017/06/05 21:57:40 [1;34m[D] [ModifyHouse]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  house: 2 , login user: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [canAccessHouse]  house: 2 , login user: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseInfo]  bPriv: true [0m
--- PASS: Test_ModifyHouseInfo (0.05s)
	House_test.go:396: Test ModifyHouse
	House_test.go:403: <Case 1> Invalid Arguments: property (-1) < 0
	House_test.go:403: <Case 2> Invalid Arguments: property (0) = 0
	House_test.go:415: <Case 3> Invalid Arguments: building no () not set
	House_test.go:415: <Case 4> Invalid Arguments: building no (-1) < 0
	House_test.go:415: <Case 5> Invalid Arguments: building no (0) = 0
	House_test.go:426: <Case 6> Invalid Arguments: Total floor (-1) < 0
	House_test.go:426: <Case 7> Invalid Arguments: Total floor (0) = 0
	House_test.go:436: <Case 8> Invalid Arguments: House floor (-1) < 0
	House_test.go:436: <Case 9> Invalid Arguments: House floor (0) = 0
	House_test.go:445: <Case 10> Invalid Arguments: FloorThis > FloorTotal
	House_test.go:453: <Case 11> Invalid Arguments: Bedrooms < 0
	House_test.go:461: <Case 12> Invalid Arguments: Livingrooms < 0
	House_test.go:469: <Case 13> Invalid Arguments: Bathrooms < 0
	House_test.go:478: <Case 14> Invalid Arguments: Bathrooms, livingrooms, bedrooms are all 0
	House_test.go:487: <Case 15> Invalid Arguments: Acreage <= 100
	House_test.go:499: <Case 16> Invalid Arguments: Decoration (-1) < commdef.DECORATION_Workblank
	House_test.go:499: <Case 17> Invalid Arguments: Decoration (5) > commdef.DECORATION_Luxury
	House_test.go:509: <Case 18> Invalid Arguments: house does not exist
	House_test.go:518: <Case 19> Invalid Arguments: property does not exist
	House_test.go:527: <Case 20> Invalid Arguments: house duplicated
	House_test.go:536: <Case 21> Permission: user not login
	House_test.go:545: <Case 22> Permission: login user is a regular user, have no right to modify house
	House_test.go:554: <Case 23> Permission: login user is an agency, but not behalf this house, have no right to modify house
	House_test.go:567: <Case 24> Landlord (9) modify the house info
	House_test.go:573: house: {Id:2 Property:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0}
	House_test.go:596: building no:(before) 199 , (after) 200
	House_test.go:567: <Case 25> Agency (6) modify the house info
	House_test.go:573: house: {Id:2 Property:2 BuildingNo:200 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0}
	House_test.go:596: building no:(before) 200 , (after) 201
	House_test.go:567: <Case 26> Administrator (4) modify the house info
	House_test.go:573: house: {Id:2 Property:2 BuildingNo:201 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 ForSale:false ForRent:false Decoration:0}
	House_test.go:596: building no:(before) 201 , (after) 199
=== RUN   Test_SetHouseAgency
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: -1 , agency: -1 , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [isAgency]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseAgency]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: -1 , agency: 0 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [isAgency]  err: <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseAgency]  <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: -1 , agency: 100000000 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [isAgency]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseAgency]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: -1 , agency: 2 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=2]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: -1 , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseAgency]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: -1 , agency: 11 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: -1 , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseAgency]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: 0 , agency: 11 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 0 , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseAgency]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: 100000000 , agency: 11 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 100000000 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseAgency]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 11 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1106, ( login user:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseAgency]  <Error> code: 1106, ( login user:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 11 , login user: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1106, ( login user:2 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseAgency]  <Error> code: 1106, ( login user:2 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 11 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [UPDATE `tbl_house` T0 SET T0.`agency_id` = ? WHERE T0.`id` = ? ] - `11`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 6 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     2.0ms] - [UPDATE `tbl_house` T0 SET T0.`agency_id` = ? WHERE T0.`id` = ? ] - `6`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 11 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     3.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     1.9ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     5.7ms] - [UPDATE `tbl_house` T0 SET T0.`agency_id` = ? WHERE T0.`id` = ? ] - `11`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 6 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     3.5ms] - [UPDATE `tbl_house` T0 SET T0.`agency_id` = ? WHERE T0.`id` = ? ] - `6`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 11 , login user: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.0ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     1.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.5ms] - [UPDATE `tbl_house` T0 SET T0.`agency_id` = ? WHERE T0.`id` = ? ] - `11`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  house: 2 , agency: 6 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.7ms] - [UPDATE `tbl_house` T0 SET T0.`agency_id` = ? WHERE T0.`id` = ? ] - `6`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseAgency]  numb: 1 [0m
--- PASS: Test_SetHouseAgency (0.05s)
	House_test.go:611: Test SetHouseAgency
	House_test.go:619: <Case 1> invalid arguments: agency (-1) < 0
	House_test.go:619: <Case 2> invalid arguments: agency (0) = 0
	House_test.go:619: <Case 3> invalid arguments: agency (100000000) does not exist
	House_test.go:619: <Case 4> invalid arguments: agency (2) is not an agency
	House_test.go:631: <Case 5> invalid arguments: house (-1) < 0
	House_test.go:631: <Case 6> invalid arguments: house (0) = 0
	House_test.go:631: <Case 7> invalid arguments: house (100000000) does not exist
	House_test.go:643: <Case 8> Permission denied: user (-1) not login
	House_test.go:643: <Case 9> Permission denied: user (2) is a regualr user
	House_test.go:655: <Case 10> Landlord(9) set house agency
	House_test.go:655: <Case 11> House agency(6) set house agency
	House_test.go:655: <Case 12> Administrator(5) set house agency
=== RUN   Test_SetHouseCoverImage
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: -1 , uid: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1101, ( iid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 0 , uid: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1101, ( iid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 100000000 , uid: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1102, ( iid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: -1 , cid: 29 , uid: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: -1 , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 0 , cid: 29 , uid: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 0 , login user: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 100000000 , cid: 29 , uid: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 100000000 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 29 , uid: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1106, ( login user:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1106, ( login user:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 29 , uid: 0 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 0 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1106, ( login user:0 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1106, ( login user:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 29 , uid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1106, ( login user:2 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1106, ( login user:2 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 29 , uid: 11 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 11 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [canModifyHouse]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [SetHouseCoverImage]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 29 , uid: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.1ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `29`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 31 , uid: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `31`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.6ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `31`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 29 , uid: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.6ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `29`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 31 , uid: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `31`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.7ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `31`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 29 , uid: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `29`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.0ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `29`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  hid: 2 , cid: 31 , uid: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `31`
2017/06/05 21:57:40 [1;34m[D] [canModifyHouse]  house: 2 , login user: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.7ms] - [UPDATE `tbl_house` SET `cover_img` = ? WHERE `id` = ?] - `31`, `2`
2017/06/05 21:57:40 [1;34m[D] [SetHouseCoverImage]  numb: 1 [0m
--- PASS: Test_SetHouseCoverImage (0.03s)
	House_test.go:669: Test SetHouseCoverImage
	House_test.go:677: <Case 1> Invalid Argument: image (-1) < 0
	House_test.go:677: <Case 2> Invalid Argument: image (0) = 0
	House_test.go:677: <Case 3> Invalid Argument: image (100000000) does not exist
	House_test.go:689: <Case 4> Invalid Argument: house (-1) < 0
	House_test.go:689: <Case 5> Invalid Argument: house (0) = 0
	House_test.go:689: <Case 6> Invalid Argument: house (100000000) does not exist
	House_test.go:701: <Case 7> Permission: user (-1) not login
	House_test.go:701: <Case 8> Permission: user (0) is SYSTEM
	House_test.go:701: <Case 9> Permission: user (2) is a regular user
	House_test.go:701: <Case 10> Permission: user (11) is an agency, but not for this house
	House_test.go:713: <Case 11> landlord (9) set house cover image
	House_test.go:713: <Case 12> agency (6) set house cover image
	House_test.go:713: <Case 13> administrator (5) set house cover image
=== RUN   Test_CertHouse
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: -1 , pass: false , comment:  [0m
2017/06/05 21:57:40 [1;31m[E] [CertHouse]  <Error> code: 1101, ( No comments )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: -1 , uid: -1 , pass: false , comment: test [0m
2017/06/05 21:57:40 [1;31m[E] [CertHouse]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 0 , uid: -1 , pass: false , comment: test [0m
2017/06/05 21:57:40 [1;31m[E] [CertHouse]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 100000000 , uid: -1 , pass: false , comment: test [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [CertHouse]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: -1 , pass: true , comment: test pass [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;31m[E] [CertHouse]  <Error> code: 1101, ( already published )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: -1 , pass: false , comment: test [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [CertHouse]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: 0 , pass: false , comment: test [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [CertHouse]  <Error> code: 1106, ( uid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: 100000000 , pass: false , comment: test [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [CertHouse]  <Error> code: 1106, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: 2 , pass: false , comment: test [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CertHouse]  <Error> code: 1106, ( uid:2 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: 9 , pass: false , comment: test [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CertHouse]  <Error> code: 1106, ( uid:9 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: 6 , pass: false , comment: cancel the certification [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Begin /     0.1ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.5ms] - [INSERT INTO `tbl_house_cert` (`house`, `who`, `when`, `comment`, `pass`) VALUES (?, ?, ?, ?, ?)] - `2`, `6`, `2017-06-05 21:57:40.284379222 +0800 +0800`, `cancel the certification`, `false`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.3ms] - [UPDATE tbl_house SET publish_time=NULL WHERE id=2]
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  affect 1 records [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /   tx.Commit /     1.2ms] - [COMMIT]
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: 6 , pass: true , comment: certification passed [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Begin /     0.1ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.4ms] - [INSERT INTO `tbl_house_cert` (`house`, `who`, `when`, `comment`, `pass`) VALUES (?, ?, ?, ?, ?)] - `2`, `6`, `2017-06-05 21:57:40.288512679 +0800 +0800`, `certification passed`, `true`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.2ms] - [UPDATE tbl_house SET publish_time='2017-6-5 21:57:40' WHERE id=2]
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  affect 1 records [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /   tx.Commit /     0.4ms] - [COMMIT]
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: 5 , pass: false , comment: cancel the certification [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Begin /     0.1ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.3ms] - [INSERT INTO `tbl_house_cert` (`house`, `who`, `when`, `comment`, `pass`) VALUES (?, ?, ?, ?, ?)] - `2`, `5`, `2017-06-05 21:57:40.29149514 +0800 +0800`, `cancel the certification`, `false`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.2ms] - [UPDATE tbl_house SET publish_time=NULL WHERE id=2]
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  affect 1 records [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /   tx.Commit /     1.2ms] - [COMMIT]
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  hid: 2 , uid: 5 , pass: true , comment: certification passed [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Begin /     0.0ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.3ms] - [INSERT INTO `tbl_house_cert` (`house`, `who`, `when`, `comment`, `pass`) VALUES (?, ?, ?, ?, ?)] - `2`, `5`, `2017-06-05 21:57:40.294990337 +0800 +0800`, `certification passed`, `true`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.3ms] - [UPDATE tbl_house SET publish_time='2017-6-5 21:57:40' WHERE id=2]
2017/06/05 21:57:40 [1;34m[D] [CertHouse]  affect 1 records [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /   tx.Commit /     1.0ms] - [COMMIT]
--- PASS: Test_CertHouse (0.02s)
	House_test.go:727: Test CertHouse
	House_test.go:731: <Case 0> Invalid argument: no comment
	House_test.go:742: <Case 1> Invalid argument: house (-1) < 0
	House_test.go:742: <Case 2> Invalid argument: house (0) = 0
	House_test.go:742: <Case 3> Invalid argument: house (100000000) does not exist
	House_test.go:751: <Case 4> Invalid argument: already published
	House_test.go:762: <Case 5> Permission checking: user (-1) not login
	House_test.go:762: <Case 6> Permission checking: user (0) is SYSTEM
	House_test.go:762: <Case 7> Permission checking: user (100000000) does not exist
	House_test.go:762: <Case 8> Permission checking: user (2) is a regular user
	House_test.go:762: <Case 9> Permission checking: user (9) is landlord
	House_test.go:774: <Case 10> House Agency (6) revoke the certification
	House_test.go:781: <Case 11> House Agency (6) pass certification
	House_test.go:774: <Case 12> Administrator (5) revoke the certification
	House_test.go:781: <Case 13> Administrator (5) pass certification
=== RUN   Test_RecommendHouse
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: -1 , act: 1 , login user: 6 [0m
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 0 , act: 1 , login user: 6 [0m
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 100000000 , act: 1 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 4 , act: 1 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1106, ( house not published )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  Recommend house: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `who`, `when` FROM `tbl_house_recommend` WHERE `house` = ? ] - `2`
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1105, ( hid:2 already been recommended )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: -1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: 0 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: 100000000 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1106, ( uid:2 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1106, ( uid:9 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: 11 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1106, ( uid:11 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 0 , login user: -2 [0m
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1101, ( act:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 3 , login user: -2 [0m
2017/06/05 21:57:40 [1;31m[E] [RecommendHouse]  <Error> code: 1101, ( act:3 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 2 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  Unrecommend house: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `house`, `who`, `when` FROM `tbl_house_recommend` WHERE `house` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.4ms] - [DELETE FROM `tbl_house_recommend` WHERE `id` = ?] - `187`
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  house: 2 , act: 1 , login user: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [RecommendHouse]  Recommend house: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `who`, `when` FROM `tbl_house_recommend` WHERE `house` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     2.8ms] - [INSERT INTO `tbl_house_recommend` (`house`, `who`, `when`) VALUES (?, ?, ?)] - `2`, `6`, `2017-06-05 21:57:40.327716074 +0800 +0800`
--- PASS: Test_RecommendHouse (0.03s)
	House_test.go:794: Test RecommendHouse
	House_test.go:802: <Case 1> Invalid argument: House (-1) < 0
	House_test.go:802: <Case 2> Invalid argument: House (0) = 0
	House_test.go:802: <Case 3> Invalid argument: House (100000000) does not exist
	House_test.go:802: <Case 4> Invalid argument: House (4) not been published
	House_test.go:802: <Case 5> Invalid argument: House (2) already recommended
	House_test.go:814: <Case 6> Invalid argument: User (-1) not login
	House_test.go:814: <Case 7> Invalid argument: User (0) is SYSTEM
	House_test.go:814: <Case 8> Invalid argument: User (100000000) does not exist
	House_test.go:826: <Case 9> Permission: User (2) is a regular user
	House_test.go:826: <Case 10> Permission: User (9) is landlord
	House_test.go:826: <Case 11> Permission: User (11) is an agency, but not for this house
	House_test.go:836: <Case 12> Invalid argument: action (0)
	House_test.go:836: <Case 13> Invalid argument: action (3)
	House_test.go:848: <Case 14> Operation: unrecommend house
	House_test.go:848: <Case 15> Operation: recommend house
=== RUN   Test_CommitHouseByOwner
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:0 BuildingNo: FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( property:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:-1 BuildingNo: FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( property:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:0 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( building_no:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:-1 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( building_no:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:0 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( floor_total:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:-1 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( floor_total:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:0 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( floor_this:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:-2 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( floor_this:-2 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:36 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( floor_this:36 > FloorTotal:35 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:-1 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( bedrooms:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:-1 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( livingrooms:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:-1 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( bathrooms:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:0 Livingrooms:0 Bathrooms:0 Acreage:0 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( Bedrooms:0, Livingrooms:0, bathrooms:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:100 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( acreage:100 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:200000000 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: -1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 200000000 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `200000000`
2017/06/05 21:57:40 [1;31m[E] [GetPropertyInfo]  <Error> code: 1102, ( <QuerySeter> no row found )
 [0m
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( Property:200000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false Decoration:0} , landlord: -1 , agency: -1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( owner:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false Decoration:0} , landlord: 100000000 , agency: -1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( owner:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: -1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( agency:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:175 FloorTotal:35 FloorThis:15 HouseNo: Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 100000000 [0m
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1101, ( agency:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:2 BuildingNo:56 FloorTotal:45 FloorThis:16 HouseNo:1605 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12300 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? ] - `2`, `56`, `1605`
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1105, ( property:2, building:%!d(string=56), house:1605 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [CommitHouseByOwner]  house: &{Id:0 Property:7 BuildingNo:156 FloorTotal:45 FloorThis:26 HouseNo:2605 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:12400 ForSale:false ForRent:false Decoration:0} , landlord: 9 , agency: 6 [0m
2017/06/05 21:57:40 [1;34m[D] [GetPropertyInfo]  pid: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `7`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house` T0 INNER JOIN `tbl_property` T1 ON T1.`id` = T0.`property_id` WHERE T1.`id` = ? AND T0.`building_no` = ? AND T0.`house_no` = ? ] - `7`, `156`, `2605`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [FAIL /     db.Exec /     0.1ms] - [INSERT INTO tbl_house(property_id, building_no, house_no, floor_total, floor_this, bedrooms, livingrooms, 
									bathrooms, acreage, decoration, owner_id, agency_id, submit_time, for_sale, for_rent) 
							VALUES(7, %!d(string=156), '2605', 45, 26, 2, 1, 1, 12400, 0, 9, 6, '2017-6-5 21:57:40', false, false)] - Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%!d(string=156), '2605', 45, 26, 2, 1, 1, 12400, 0, 9, 6, '2017-6-5 21:57:40', f' at line 3
2017/06/05 21:57:40 [1;31m[E] [CommitHouseByOwner]  <Error> code: 1103, ( Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%!d(string=156), '2605', 45, 26, 2, 1, 1, 12400, 0, 9, 6, '2017-6-5 21:57:40', f' at line 3 )
 [0m
--- FAIL: Test_CommitHouseByOwner (0.01s)
	House_test.go:861: Test CommitHouseByOwner
	House_test.go:865: <Case 1> invalid arguments: property = 0
	House_test.go:873: <Case 2> invalid arguments: property < 0
	House_test.go:881: <Case 3> invalid arguments: building_no = 0
	House_test.go:889: <Case 4> invalid arguments: building_no < 0
	House_test.go:897: <Case 5> invalid arguments: FloorTotal = 0
	House_test.go:905: <Case 6> invalid arguments: FloorTotal < 0
	House_test.go:913: <Case 7> invalid arguments: FloorThis = 0
	House_test.go:921: <Case 8> Invalid arguments: FloorThis < 0
	House_test.go:929: <Case 9> Invalid arguments: FloorThis > FloorTotal
	House_test.go:937: <Case 10> Invalid arguments: Bedrooms < 0
	House_test.go:945: <Case 11> Invalid arguments: Livingrooms < 0
	House_test.go:953: <Case 12> Invalid arguments: Bathrooms < 0
	House_test.go:962: <Case 13> Invalid arguments: Bathrooms, livingrooms, bedrooms are all 0
	House_test.go:971: <Case 14> Invalid arguments: Acreage <= 100
	House_test.go:980: <Case 15> Invalid arguments: property does not exist
	House_test.go:992: <Case 16> Invalid arguments: house owner (-1) not login
	House_test.go:992: <Case 17> Invalid arguments: house owner (100000000) does not exist
	House_test.go:1003: <Case 18> Invalid arguments: house agency (-1) not login
	House_test.go:1003: <Case 19> Invalid arguments: house agency (100000000) does not exist
	House_test.go:1013: <Case 20> Invalid arguments: house duplicated
	House_test.go:1022: <Case 21> commit new house
	House_test.go:1027: Failed, err:  <Error> code: 1103, ( Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%!d(string=156), '2605', 45, 26, 2, 1, 1, 12400, 0, 9, 6, '2017-6-5 21:57:40', f' at line 3 )
		
=== RUN   Test_NewEventRead
2017/06/05 21:57:40 [1;34m[D] [NewEventRead]  login user: -1 , event: -1 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [NewEventRead]  <Error> code: 1101, ( event:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [NewEventRead]  login user: -1 , event: 0 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [NewEventRead]  <Error> code: 1101, ( event:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [NewEventRead]  login user: -1 , event: 100000000 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 100000000 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [NewEventRead]  <Error> code: 1102, ( event:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [NewEventRead]  login user: -1 , event: 7 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;31m[E] [NewEventRead]  <Error> code: 1101, ( event:7 already read )
 [0m
2017/06/05 21:57:40 [1;34m[D] [NewEventRead]  login user: -1 , event: 5 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `5`
2017/06/05 21:57:40 [1;31m[E] [NewEventRead]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [NewEventRead]  login user: 0 , event: 5 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [NewEventRead]  <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [NewEventRead]  login user: 100000000 , event: 5 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [NewEventRead]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [NewEventRead]  login user: 11 , event: 5 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
2017/06/05 21:57:40 [1;31m[E] [NewEventRead]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [NewEventRead]  login user: 4 , event: 5 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.4ms] - [UPDATE `tbl_house_event` SET `read_time` = ? WHERE `id` = ?] - `2017-06-05 21:57:40.347734355 +0800 +0800`, `5`
2017/06/05 21:57:40 [1;34m[D] [newEventUnread]  login user: 4 , event: 5 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.3ms] - [UPDATE `tbl_house_event` SET `read_time` = ? WHERE `id` = ?] - `<nil>`, `5`
--- PASS: Test_NewEventRead (0.01s)
	event_test.go:17: Test NewEventRead
	event_test.go:21: <Case 1> Invalid Argument: event < 0
	event_test.go:28: <Case 2> Invalid Argument: event = 0
	event_test.go:35: <Case 3> Invalid Argument: event does not exist
	event_test.go:42: <Case 4> Invalid Argument: event has readed
	event_test.go:49: <Case 5> Permission: user not login
	event_test.go:56: <Case 6> Permission: user is SYSTEM
	event_test.go:63: <Case 7> Permission: user does not exist
	event_test.go:70: <Case 8> Permission: user is not a event receiver
	event_test.go:77: <Case 9> READ the new event
	event_test.go:84: <Case 10> Recover to UnRead the new event
=== RUN   Test_GetEventInfo
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  login user: -1 , event: -1 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [GetEventInfo]  <Error> code: 1101, ( event:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  login user: -1 , event: 0 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetEventInfo]  <Error> code: 1101, ( event:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  login user: -1 , event: 100000000 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 100000000 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [GetEventInfo]  <Error> code: 1102, ( event:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  login user: -1 , event: 1 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  he: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
2017/06/05 21:57:40 [1;31m[E] [GetEventInfo]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  login user: 0 , event: 1 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  he: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [GetEventInfo]  <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  login user: 100000000 , event: 1 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  he: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [GetEventInfo]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  login user: 11 , event: 1 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  he: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetEventInfo]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  login user: 10 , event: 1 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  he: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  landlord [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_house_event_process` T0 INNER JOIN `tbl_house_event` T1 ON T1.`id` = T0.`event_id` WHERE T1.`id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [getHouseProperty]  hid: 3 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT name FROM tbl_house AS house, tbl_property AS prop WHERE house.id=3 AND house.property_id=prop.id]
2017/06/05 21:57:40 [1;34m[D] [getHouseProperty]  hid: 3 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 2 , ln: 10 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=10]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  uid: 2 , aid: 10 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=10]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [isOwnerAgency]  err: <nil> , is agency: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:2 Name:Êú™ËÆæÁΩÆ IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  sender: {Id:2 Name:Êú™ËÆæÁΩÆ IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 10 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=10]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  uid: 6 , aid: 10 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=10]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [isOwnerAgency]  err: <nil> , is agency: false [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  receiver: {Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_CERTIFICATE_BEGIN`
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  login user: 4 , event: 1 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  he: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  house agency [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_house_event_process` T0 INNER JOIN `tbl_house_event` T1 ON T1.`id` = T0.`event_id` WHERE T1.`id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [getHouseProperty]  hid: 3 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT name FROM tbl_house AS house, tbl_property AS prop WHERE house.id=3 AND house.property_id=prop.id]
2017/06/05 21:57:40 [1;34m[D] [getHouseProperty]  hid: 3 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 2 , ln: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  admin [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:2 Name:Êú™ËÆæÁΩÆ IdNo: Phone:15300000000 HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  sender: {Id:2 Name:Êú™ËÆæÁΩÆ IdNo: Phone:15300000000 HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 4 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  admin [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone:13888888888 HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  receiver: {Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone:13888888888 HeadPortrait: Role:0 RoleDesc:Manager} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_CERTIFICATE_BEGIN`
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  login user: 5 , event: 1 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  he: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  administrator [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT COUNT(*) FROM `tbl_house_event_process` T0 INNER JOIN `tbl_house_event` T1 ON T1.`id` = T0.`event_id` WHERE T1.`id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [getHouseProperty]  hid: 3 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT name FROM tbl_house AS house, tbl_property AS prop WHERE house.id=3 AND house.property_id=prop.id]
2017/06/05 21:57:40 [1;34m[D] [getHouseProperty]  hid: 3 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 2 , ln: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  admin [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:2 Name:Êú™ËÆæÁΩÆ IdNo: Phone:15300000000 HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  sender: {Id:2 Name:Êú™ËÆæÁΩÆ IdNo: Phone:15300000000 HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  admin [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone:13888888888 HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventInfo]  receiver: {Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone:13888888888 HeadPortrait: Role:0 RoleDesc:Manager} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_CERTIFICATE_BEGIN`
--- PASS: Test_GetEventInfo (0.04s)
	event_test.go:97: Test GetEventInfo
	event_test.go:101: <Case 1> Invalid Argument: event < 0
	event_test.go:108: <Case 2> Invalid Argument: event = 0
	event_test.go:115: <Case 3> Invalid Argument: event does not exist
	event_test.go:122: <Case 4> Permission: user not log in
	event_test.go:129: <Case 5> Permission: user is SYSTEM
	event_test.go:136: <Case 6> Permission: user does not exist
	event_test.go:143: <Case 7> Permission: user is not one of: sender, receiver, landlord, agency, administrator
	event_test.go:164: <Case 8> Permission: user is landloard
	event_test.go:171: <Case 9> Permission: user is house agency
	event_test.go:178: <Case 10> Permission: user is administrator
	event_test.go:184: event: {Id:1 HouseId:3 Property:‰∏ñËåÇ.Ëù∂ÊπñÊπæ Building:177 HouseNo:1505 Sender:Êú™ËÆæÁΩÆ Receiver:Âº†ÂÖàÁîü CreateTime:2017-01-22 12:06:10 ReadTime: Type:ÊàøÊ∫êÂÆ°Ê†∏‰∏≠ Desc:ÊµãËØï 1st ËÆ°Âàí ProcCount:0}
=== RUN   Test_GetEventProcList
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  login user: -1 , event: -1 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [GetEventProcList]  <Error> code: 1101, ( event:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  login user: -1 , event: 0 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetEventProcList]  <Error> code: 1101, ( event:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  login user: -1 , event: 100000000 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 100000000 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [GetEventProcList]  <Error> code: 1102, ( event:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  login user: -1 , event: 7 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  he: {Id:7 House:2 Sender:0 Receiver:2 CreateTime:2017-01-22 07:16:34 +0000 UTC ReadTime:2017-01-23 12:55:52 +0000 UTC Type:2 Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
2017/06/05 21:57:40 [1;31m[E] [GetEventProcList]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  login user: 100000000 , event: 7 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  he: {Id:7 House:2 Sender:0 Receiver:2 CreateTime:2017-01-22 07:16:34 +0000 UTC ReadTime:2017-01-23 12:55:52 +0000 UTC Type:2 Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [GetEventProcList]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  login user: 10 , event: 7 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  he: {Id:7 House:2 Sender:0 Receiver:2 CreateTime:2017-01-22 07:16:34 +0000 UTC ReadTime:2017-01-23 12:55:52 +0000 UTC Type:2 Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=10]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetEventProcList]  <Error> code: 1106, ( login user:10 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  login user: 11 , event: 7 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  he: {Id:7 House:2 Sender:0 Receiver:2 CreateTime:2017-01-22 07:16:34 +0000 UTC ReadTime:2017-01-23 12:55:52 +0000 UTC Type:2 Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetEventProcList]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  login user: 9 , event: 7 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  he: {Id:7 House:2 Sender:0 Receiver:2 CreateTime:2017-01-22 07:16:34 +0000 UTC ReadTime:2017-01-23 12:55:52 +0000 UTC Type:2 Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  landlord [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`who`, T0.`when`, T0.`type`, T0.`desc`, T0.`event_id`, T1.`id`, T1.`house`, T1.`sender`, T1.`receiver`, T1.`create_time`, T1.`read_time`, T1.`type`, T1.`desc`, T1.`close_time` FROM `tbl_house_event_process` T0 INNER JOIN `tbl_house_event` T1 ON T1.`id` = T0.`event_id` WHERE T1.`id` = ? ORDER BY T1.`id` ASC, T0.`when` DESC LIMIT 1000] - `7`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_EVENT_PROC_FOLLOW`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  uid: 6 , aid: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [isOwnerAgency]  err: <nil> , is agency: false [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  0: {Id:2 User:Âº†ÂÖàÁîü Time:2017-01-22 12:28:51 Op:Ë∑üËøõ Desc:ÊµãËØï} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_EVENT_PROC_FOLLOW`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  uid: 6 , aid: 9 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [isOwnerAgency]  err: <nil> , is agency: false [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  1: {Id:1 User:Âº†ÂÖàÁîü Time:2017-01-22 11:50:06 Op:Ë∑üËøõ Desc:test} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  login user: 6 , event: 7 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  he: {Id:7 House:2 Sender:0 Receiver:2 CreateTime:2017-01-22 07:16:34 +0000 UTC ReadTime:2017-01-23 12:55:52 +0000 UTC Type:2 Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  house agency [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`who`, T0.`when`, T0.`type`, T0.`desc`, T0.`event_id`, T1.`id`, T1.`house`, T1.`sender`, T1.`receiver`, T1.`create_time`, T1.`read_time`, T1.`type`, T1.`desc`, T1.`close_time` FROM `tbl_house_event_process` T0 INNER JOIN `tbl_house_event` T1 ON T1.`id` = T0.`event_id` WHERE T1.`id` = ? ORDER BY T1.`id` ASC, T0.`when` DESC LIMIT 1000] - `7`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_EVENT_PROC_FOLLOW`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  landlord himself [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone:13888888888 HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  0: {Id:2 User:Âº†ÂÖàÁîü Time:2017-01-22 12:28:51 Op:Ë∑üËøõ Desc:ÊµãËØï} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_EVENT_PROC_FOLLOW`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  landlord himself [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone:13888888888 HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  1: {Id:1 User:Âº†ÂÖàÁîü Time:2017-01-22 11:50:06 Op:Ë∑üËøõ Desc:test} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  login user: 5 , event: 7 [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 7 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `7`
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  he: {Id:7 House:2 Sender:0 Receiver:2 CreateTime:2017-01-22 07:16:34 +0000 UTC ReadTime:2017-01-23 12:55:52 +0000 UTC Type:2 Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  administrator [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`who`, T0.`when`, T0.`type`, T0.`desc`, T0.`event_id`, T1.`id`, T1.`house`, T1.`sender`, T1.`receiver`, T1.`create_time`, T1.`read_time`, T1.`type`, T1.`desc`, T1.`close_time` FROM `tbl_house_event_process` T0 INNER JOIN `tbl_house_event` T1 ON T1.`id` = T0.`event_id` WHERE T1.`id` = ? ORDER BY T1.`id` ASC, T0.`when` DESC LIMIT 1000] - `7`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_EVENT_PROC_FOLLOW`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  admin [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone:13888888888 HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  0: {Id:2 User:Âº†ÂÖàÁîü Time:2017-01-22 12:28:51 Op:Ë∑üËøõ Desc:ÊµãËØï} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_EVENT_PROC_FOLLOW`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 5 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  admin [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone:13888888888 HeadPortrait: Role:0 RoleDesc:Manager} [0m
2017/06/05 21:57:40 [1;34m[D] [GetEventProcList]  1: {Id:1 User:Âº†ÂÖàÁîü Time:2017-01-22 11:50:06 Op:Ë∑üËøõ Desc:test} [0m
--- PASS: Test_GetEventProcList (0.03s)
	event_test.go:194: Test GetEventProcList
	event_test.go:198: <Case 1> Invalid Argument: event id < 0
	event_test.go:205: <Case 2> Invalid Argument: event id = 0
	event_test.go:212: <Case 3> Invalid Argument: event does not exist
	event_test.go:219: <Case 4> Permission: user not log in
	event_test.go:226: <Case 5> Permission: user does not exist
	event_test.go:233: <Case 6> Permission: user is a regular user
	event_test.go:240: <Case 7> Permission: user is an agency, but not behalf this house
	event_test.go:247: <Case 8> Permission: user is landlord
	event_test.go:254: <Case 9> Permission: user is agency of this house
	event_test.go:261: <Case 10> Permission: user is administrator
=== RUN   Test_GetHouseEventList
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: -1 , house: -1 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 0 , id only: false [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: -1 , house: 0 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 0 , id only: false [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: -1 , house: 100000000 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: -1 , house: 2 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc42039f950 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4203939a0 Agency:0xc420393a40 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 0 , house: 2 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc42039fae0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc420393b80 Agency:0xc420393c20 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 100000000 , house: 2 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc42039fc70 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc420393e00 Agency:0xc420393ea0 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 4 , house: 2 , fetch begin: -1 , fetch count: 10 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc42039fe00 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204ac140 Agency:0xc4204ac1e0 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1101, ( begin position:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 4 , house: 2 , fetch begin: 0 , fetch count: -1 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b2000 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204ac500 Agency:0xc4204ac5a0 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1101, ( begin cnt:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 4 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: -1 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b21e0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204ac8c0 Agency:0xc4204ac960 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1101, ( stat:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 4 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 4 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b23c0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204acc80 Agency:0xc4204acd20 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1101, ( stat:4 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 4 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 0 , type: -1 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b2550 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204ad040 Agency:0xc4204ad0e0 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1101, ( event type:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 4 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 0 , type: 5 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b2730 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204ad400 Agency:0xc4204ad4a0 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1101, ( event type:5 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 10 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b2910 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204ad7c0 Agency:0xc4204ad860 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `10`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=10]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1106, ( login user:10 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 11 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b2af0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204add60 Agency:0xc4204ade00 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 2 , house: 6 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `6`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:6 BuildingNo:56 FloorTotal:35 FloorThis:16 HouseNo:1606 Bedrooms:4 Livingrooms:2 Bathrooms:3 Acreage:17788 CoverImg:30 Property:0xc4204b2cd0 Decoration:3 Public:true ForSale:false ForRent:true RentStat:0 Owner:0xc4204c8320 Agency:0xc4204c83c0 SubmitTime:2017-03-04 12:10:03 +0000 UTC PublishTime:2017-04-18 16:00:00 +0000 UTC ModifyTime:2017-05-30 03:17:25 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? ] - `6`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 9 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b2e60 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204c86e0 Agency:0xc4204c8780 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  3 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 6 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b2ff0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204c8aa0 Agency:0xc4204c8b40 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  3 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 5 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b31d0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204c9040 Agency:0xc4204c90e0 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  3 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 6 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b33b0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204c95e0 Agency:0xc4204c9680 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  3 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 6 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 1 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b3590 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204c9b80 Agency:0xc4204c9c20 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? AND T0.`read_time` IS NULL ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 6 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 2 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.0ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b3770 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204ee320 Agency:0xc4204ee3c0 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? AND T0.`read_time` IS NOT NULL AND T0.`close_time` IS NULL ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 6 , house: 2 , fetch begin: 0 , fetch count: 0 , stat: 3 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b39f0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204ee8c0 Agency:0xc4204ee960 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? AND T0.`close_time` IS NOT NULL ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 4 , house: 2 , fetch begin: 3 , fetch count: 10 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b3c20 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204eefa0 Agency:0xc4204ef040 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     1.1ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  3 events found [0m
2017/06/05 21:57:40 [1;31m[E] [GetHouseEventList]  <Error> code: 1101, ( begin position:3 >= total:3 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 6 , house: 2 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 0 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4204b3ef0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4204ef540 Agency:0xc4204ef5e0 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  3 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  sql_proc: SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  sql: SELECT event.*, proc.count AS proc_count FROM (SELECT event.id, event.house AS house_id, prop.name AS property, building_no AS building,
										house_no, sender, receiver, create_time, read_time, type, event.desc
									FROM tbl_house_event AS event, tbl_house AS house, tbl_property AS prop
									WHERE event.house=2 AND event.house=house.id AND house.property_id = prop.id ORDER BY read_time DESC, close_time DESC) AS event, (SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id) AS proc 
							WHERE event.id=proc.id LIMIT 0, 10 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     1.1ms] - [SELECT event.*, proc.count AS proc_count FROM (SELECT event.id, event.house AS house_id, prop.name AS property, building_no AS building,
										house_no, sender, receiver, create_time, read_time, type, event.desc
									FROM tbl_house_event AS event, tbl_house AS house, tbl_property AS prop
									WHERE event.house=2 AND event.house=house.id AND house.property_id = prop.id ORDER BY read_time DESC, close_time DESC) AS event, (SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id) AS proc 
							WHERE event.id=proc.id LIMIT 0, 10]
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  3 records [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0:{Id:7 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:0 Receiver:2 CreateTime:2017-01-22 15:16:34 ReadTime:2017-01-23 20:55:52 Type:2 Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ ProcCount:2} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_SYSTEM`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 2 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  uid: 2 , aid: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getHouseListByOwner]  oid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_user` T1 ON T1.`id` = T0.`owner_id` WHERE T1.`id` = ? LIMIT 1000] - `2`
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  house count: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:2 Name:Êú™ËÆæÁΩÆ IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_CERTIFICATE_BEGIN`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0:{Id:7 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Êú™ËÆæÁΩÆ CreateTime:2017-01-22 15:16:34 ReadTime:2017-01-23 20:55:52 Type:ÊàøÊ∫êÂÆ°Ê†∏‰∏≠ Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ ProcCount:2} [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1:{Id:8 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:0 Receiver:1 CreateTime:2017-01-23 20:37:53 ReadTime: Type:1 Desc:ÊµãËØï ProcCount:0} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_SYSTEM`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 1 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `1`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  uid: 1 , aid: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getHouseListByOwner]  oid: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_user` T1 ON T1.`id` = T0.`owner_id` WHERE T1.`id` = ? LIMIT 1000] - `1`
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  house count: 0 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:1 Name:Êú™ËÆæÁΩÆ IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_LANDLORD_SUBMIT_NEW_HOUSE`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1:{Id:8 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Êú™ËÆæÁΩÆ CreateTime:2017-01-23 20:37:53 ReadTime: Type:‰∏ö‰∏ªÂßîÊâòÊñ∞ÊàøÊ∫ê Desc:ÊµãËØï ProcCount:0} [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  2:{Id:9 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:0 Receiver:6 CreateTime:2017-05-20 16:00:00 ReadTime:2017-05-20 17:01:02 Type:3 Desc:test closed event ProcCount:0} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_SYSTEM`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  landlord himself [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone:13888888888 HeadPortrait: Role:0 RoleDesc:Manager} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_CERTIFICATE_FAILED`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  2:{Id:9 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Âº†ÂÖàÁîü CreateTime:2017-05-20 16:00:00 ReadTime:2017-05-20 17:01:02 Type:ÊàøÊ∫êÂÆ°Ê†∏Â§±Ë¥• Desc:test closed event ProcCount:0} [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 6 , house: 2 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 1 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc42024acd0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc42025c960 Agency:0xc42025ca00 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.1ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.1ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? AND T0.`type` = ? ] - `2`, `1`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  sql_proc: SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  sql: SELECT event.*, proc.count AS proc_count FROM (SELECT event.id, event.house AS house_id, prop.name AS property, building_no AS building,
										house_no, sender, receiver, create_time, read_time, type, event.desc
									FROM tbl_house_event AS event, tbl_house AS house, tbl_property AS prop
									WHERE event.house=2 AND event.house=house.id AND house.property_id = prop.id AND type=1 ORDER BY read_time DESC, close_time DESC) AS event, (SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id) AS proc 
							WHERE event.id=proc.id LIMIT 0, 10 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT event.*, proc.count AS proc_count FROM (SELECT event.id, event.house AS house_id, prop.name AS property, building_no AS building,
										house_no, sender, receiver, create_time, read_time, type, event.desc
									FROM tbl_house_event AS event, tbl_house AS house, tbl_property AS prop
									WHERE event.house=2 AND event.house=house.id AND house.property_id = prop.id AND type=1 ORDER BY read_time DESC, close_time DESC) AS event, (SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id) AS proc 
							WHERE event.id=proc.id LIMIT 0, 10]
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1 records [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0:{Id:8 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:0 Receiver:1 CreateTime:2017-01-23 20:37:53 ReadTime: Type:1 Desc:ÊµãËØï ProcCount:0} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_SYSTEM`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 1 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `1`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  uid: 1 , aid: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getHouseListByOwner]  oid: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_user` T1 ON T1.`id` = T0.`owner_id` WHERE T1.`id` = ? LIMIT 1000] - `1`
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  house count: 0 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:1 Name:Êú™ËÆæÁΩÆ IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_LANDLORD_SUBMIT_NEW_HOUSE`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0:{Id:8 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Êú™ËÆæÁΩÆ CreateTime:2017-01-23 20:37:53 ReadTime: Type:‰∏ö‰∏ªÂßîÊâòÊñ∞ÊàøÊ∫ê Desc:ÊµãËØï ProcCount:0} [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 6 , house: 2 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 2 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc42024b3b0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc42025d5e0 Agency:0xc42025d680 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? AND T0.`type` = ? ] - `2`, `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  sql_proc: SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  sql: SELECT event.*, proc.count AS proc_count FROM (SELECT event.id, event.house AS house_id, prop.name AS property, building_no AS building,
										house_no, sender, receiver, create_time, read_time, type, event.desc
									FROM tbl_house_event AS event, tbl_house AS house, tbl_property AS prop
									WHERE event.house=2 AND event.house=house.id AND house.property_id = prop.id AND type=2 ORDER BY read_time DESC, close_time DESC) AS event, (SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id) AS proc 
							WHERE event.id=proc.id LIMIT 0, 10 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.9ms] - [SELECT event.*, proc.count AS proc_count FROM (SELECT event.id, event.house AS house_id, prop.name AS property, building_no AS building,
										house_no, sender, receiver, create_time, read_time, type, event.desc
									FROM tbl_house_event AS event, tbl_house AS house, tbl_property AS prop
									WHERE event.house=2 AND event.house=house.id AND house.property_id = prop.id AND type=2 ORDER BY read_time DESC, close_time DESC) AS event, (SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id) AS proc 
							WHERE event.id=proc.id LIMIT 0, 10]
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1 records [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0:{Id:7 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:0 Receiver:2 CreateTime:2017-01-22 15:16:34 ReadTime:2017-01-23 20:55:52 Type:2 Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ ProcCount:2} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_SYSTEM`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 2 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  uid: 2 , aid: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:40 [1;34m[D] [getHouseListByOwner]  oid: 2 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`building_no`, T0.`floor_total`, T0.`floor_this`, T0.`house_no`, T0.`bedrooms`, T0.`livingrooms`, T0.`bathrooms`, T0.`acreage`, T0.`cover_img`, T0.`property_id`, T0.`decoration`, T0.`public`, T0.`for_sale`, T0.`for_rent`, T0.`rent_stat`, T0.`owner_id`, T0.`agency_id`, T0.`submit_time`, T0.`publish_time`, T0.`modify_time` FROM `tbl_house` T0 INNER JOIN `tbl_user` T1 ON T1.`id` = T0.`owner_id` WHERE T1.`id` = ? LIMIT 1000] - `2`
2017/06/05 21:57:40 [1;34m[D] [isOwnerAgency]  house count: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_NAME_NOT_SET`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:2 Name:Êú™ËÆæÁΩÆ IdNo: Phone: HeadPortrait: Role:0 RoleDesc:Manager} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_CERTIFICATE_BEGIN`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0:{Id:7 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Êú™ËÆæÁΩÆ CreateTime:2017-01-22 15:16:34 ReadTime:2017-01-23 20:55:52 Type:ÊàøÊ∫êÂÆ°Ê†∏‰∏≠ Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ ProcCount:2} [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 6 , house: 2 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 3 , id only: false [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc42024bae0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc4202963c0 Agency:0xc420296460 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? AND T0.`type` = ? ] - `2`, `3`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  sql_proc: SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  sql: SELECT event.*, proc.count AS proc_count FROM (SELECT event.id, event.house AS house_id, prop.name AS property, building_no AS building,
										house_no, sender, receiver, create_time, read_time, type, event.desc
									FROM tbl_house_event AS event, tbl_house AS house, tbl_property AS prop
									WHERE event.house=2 AND event.house=house.id AND house.property_id = prop.id AND type=3 ORDER BY read_time DESC, close_time DESC) AS event, (SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id) AS proc 
							WHERE event.id=proc.id LIMIT 0, 10 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.9ms] - [SELECT event.*, proc.count AS proc_count FROM (SELECT event.id, event.house AS house_id, prop.name AS property, building_no AS building,
										house_no, sender, receiver, create_time, read_time, type, event.desc
									FROM tbl_house_event AS event, tbl_house AS house, tbl_property AS prop
									WHERE event.house=2 AND event.house=house.id AND house.property_id = prop.id AND type=3 ORDER BY read_time DESC, close_time DESC) AS event, (SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id) AS proc 
							WHERE event.id=proc.id LIMIT 0, 10]
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1 records [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0:{Id:9 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:0 Receiver:6 CreateTime:2017-05-20 16:00:00 ReadTime:2017-05-20 17:01:02 Type:3 Desc:test closed event ProcCount:0} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.8ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_SYSTEM`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 6 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  landlord himself [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  bPrivacy: true [0m
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  user info:{Id:6 Name:Âº†ÂÖàÁîü IdNo: Phone:13888888888 HeadPortrait: Role:0 RoleDesc:Manager} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_HOUSE_CERTIFICATE_FAILED`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0:{Id:9 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Âº†ÂÖàÁîü CreateTime:2017-05-20 16:00:00 ReadTime:2017-05-20 17:01:02 Type:ÊàøÊ∫êÂÆ°Ê†∏Â§±Ë¥• Desc:test closed event ProcCount:0} [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  login user: 6 , house: 2 , fetch begin: 0 , fetch count: 10 , stat: 0 , type: 0 , id only: true [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  house: {Id:2 BuildingNo:199 FloorTotal:35 FloorThis:15 HouseNo:1505 Bedrooms:2 Livingrooms:1 Bathrooms:1 Acreage:10000 CoverImg:31 Property:0xc4202aa0a0 Decoration:0 Public:true ForSale:false ForRent:false RentStat:1 Owner:0xc420296c80 Agency:0xc420296d20 SubmitTime:2017-01-25 23:39:04 +0000 UTC PublishTime:2017-06-05 13:57:40 +0000 UTC ModifyTime:2017-06-05 13:57:40 +0000 UTC} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.9ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_house_event` T0 WHERE T0.`house` = ? ] - `2`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  3 events found [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  sql_proc: SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  sql: SELECT event.*, proc.count AS proc_count FROM (SELECT id FROM tbl_house_event WHERE house=2 ORDER BY read_time DESC, close_time DESC) AS event, (SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id) AS proc 
							WHERE event.id=proc.id LIMIT 0, 10 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT event.*, proc.count AS proc_count FROM (SELECT id FROM tbl_house_event WHERE house=2 ORDER BY read_time DESC, close_time DESC) AS event, (SELECT el.id, CASE WHEN ISNULL(proc.event_id) then 0 ELSE COUNT(*) END AS count 
								FROM (SELECT id FROM tbl_house_event WHERE house=2) AS el LEFT JOIN tbl_house_event_process AS proc
								ON el.id = proc.event_id GROUP BY el.id) AS proc 
							WHERE event.id=proc.id LIMIT 0, 10]
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  3 records [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0:{Id:7 HouseId:0 Property: Building: HouseNo: Sender: Receiver: CreateTime: ReadTime: Type: Desc: ProcCount:2} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_SYSTEM`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 0 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [GetUserInfo]  <Error> code: 1102, ( uid:0 )
 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_UNKNOWN`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  0:{Id:7 HouseId:0 Property: Building: HouseNo: Sender:Á≥ªÁªü Receiver: CreateTime: ReadTime: Type:Êú™Áü• Desc: ProcCount:2} [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1:{Id:8 HouseId:0 Property: Building: HouseNo: Sender: Receiver: CreateTime: ReadTime: Type: Desc: ProcCount:0} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_SYSTEM`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 0 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [GetUserInfo]  <Error> code: 1102, ( uid:0 )
 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_UNKNOWN`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  1:{Id:8 HouseId:0 Property: Building: HouseNo: Sender:Á≥ªÁªü Receiver: CreateTime: ReadTime: Type:Êú™Áü• Desc: ProcCount:0} [0m
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  2:{Id:9 HouseId:0 Property: Building: HouseNo: Sender: Receiver: CreateTime: ReadTime: Type: Desc: ProcCount:0} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_USER_SYSTEM`
2017/06/05 21:57:40 [1;34m[D] [GetUserInfo]  id: 0 , ln: 6 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [GetUserInfo]  <Error> code: 1102, ( uid:0 )
 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT T0.`id`, T0.`key`, T0.`value` FROM `tbl_strings` T0 WHERE T0.`key` = ? LIMIT 1] - `KEY_UNKNOWN`
2017/06/05 21:57:40 [1;34m[D] [GetHouseEventList]  2:{Id:9 HouseId:0 Property: Building: HouseNo: Sender:Á≥ªÁªü Receiver: CreateTime: ReadTime: Type:Êú™Áü• Desc: ProcCount:0} [0m
--- PASS: Test_GetHouseEventList (0.10s)
	event_test.go:284: Test GetHouseEventList
	event_test.go:288: <Case 1> Invalid Arguments: house < 0
	event_test.go:295: <Case 2> Invalid Arguments: house = 0
	event_test.go:302: <Case 3> Invalid Arguments: house does not exist
	event_test.go:309: <Case 4> Permission: user not login
	event_test.go:316: <Case 5> Permission: user is SYSTEM
	event_test.go:323: <Case 6> Permission: user does not exist
	event_test.go:330: <Case 7> Invalid Arguments: bgn < 0
	event_test.go:337: <Case 8> Invalid Arguments: cnt < 0
	event_test.go:344: <Case 9> Invalid Arguments: stat < EVENT_STAT_Begin
	event_test.go:351: <Case 10> Invalid Arguments: stat > EVENT_STAT_End
	event_test.go:358: <Case 11> Invalid Arguments: et < 0
	event_test.go:365: <Case 12> Invalid Arguments: et > commdef.HOUSE_EVENT_End
	event_test.go:372: <Case 13> Permission: user is a regular user
	event_test.go:379: <Case 14> Permission: user is an agency, but not for this house
	event_test.go:386: <Case 15> house do not have event
	event_test.go:395: <Case 16> Landlord get event list
	event_test.go:402: <Case 17> house agency get event list
	event_test.go:409: <Case 18> administrator get event list
	event_test.go:416: <Case 19> get all events
	event_test.go:428: <Case 20> get new events
	event_test.go:440: <Case 21> get ongoing events
	event_test.go:452: <Case 22> get closed events
	event_test.go:464: <Case 23> Invalid Arguments: begin position over the total number
	event_test.go:471: <Case 24> get all events, whole info
	event_test.go:478: 	0 : {Id:7 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Êú™ËÆæÁΩÆ CreateTime:2017-01-22 15:16:34 ReadTime:2017-01-23 20:55:52 Type:ÊàøÊ∫êÂÆ°Ê†∏‰∏≠ Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ ProcCount:2}
	event_test.go:478: 	1 : {Id:8 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Êú™ËÆæÁΩÆ CreateTime:2017-01-23 20:37:53 ReadTime: Type:‰∏ö‰∏ªÂßîÊâòÊñ∞ÊàøÊ∫ê Desc:ÊµãËØï ProcCount:0}
	event_test.go:478: 	2 : {Id:9 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Âº†ÂÖàÁîü CreateTime:2017-05-20 16:00:00 ReadTime:2017-05-20 17:01:02 Type:ÊàøÊ∫êÂÆ°Ê†∏Â§±Ë¥• Desc:test closed event ProcCount:0}
	event_test.go:482: <Case 25> get all events with type 1
	event_test.go:493: 	0 : {Id:8 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Êú™ËÆæÁΩÆ CreateTime:2017-01-23 20:37:53 ReadTime: Type:‰∏ö‰∏ªÂßîÊâòÊñ∞ÊàøÊ∫ê Desc:ÊµãËØï ProcCount:0}
	event_test.go:497: <Case 26> get all events with type 2
	event_test.go:508: 	0 : {Id:7 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Êú™ËÆæÁΩÆ CreateTime:2017-01-22 15:16:34 ReadTime:2017-01-23 20:55:52 Type:ÊàøÊ∫êÂÆ°Ê†∏‰∏≠ Desc:Êî∂ÂèñÁ¨¨‰∏ÄÊúüÊàøÁßüÔºåÂÖ±ËÆ° 1000ÂÖÉ ProcCount:2}
	event_test.go:512: <Case 27> get all events with type 3
	event_test.go:523: 	0 : {Id:9 HouseId:2 Property:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† Building:199 HouseNo:1505 Sender:Á≥ªÁªü Receiver:Âº†ÂÖàÁîü CreateTime:2017-05-20 16:00:00 ReadTime:2017-05-20 17:01:02 Type:ÊàøÊ∫êÂÆ°Ê†∏Â§±Ë¥• Desc:test closed event ProcCount:0}
	event_test.go:527: <Case 28> get all events, event id only
	event_test.go:534: 	0 : {Id:7 HouseId:0 Property: Building: HouseNo: Sender:Á≥ªÁªü Receiver: CreateTime: ReadTime: Type:Êú™Áü• Desc: ProcCount:2}
	event_test.go:534: 	1 : {Id:8 HouseId:0 Property: Building: HouseNo: Sender:Á≥ªÁªü Receiver: CreateTime: ReadTime: Type:Êú™Áü• Desc: ProcCount:0}
	event_test.go:534: 	2 : {Id:9 HouseId:0 Property: Building: HouseNo: Sender:Á≥ªÁªü Receiver: CreateTime: ReadTime: Type:Êú™Áü• Desc: ProcCount:0}
=== RUN   Test_ModifyHouseEvent
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: -1 , event: -1 , desc:  [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouseEvent]  <Error> code: 1101, ( desc not set )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: -1 , event: -1 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: -1 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouseEvent]  <Error> code: 1101, ( event:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: -1 , event: 0 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouseEvent]  <Error> code: 1101, ( event:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: -1 , event: 100000000 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 100000000 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [ModifyHouseEvent]  <Error> code: 1102, ( event:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: -1 , event: 1 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  event: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouseEvent]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: 0 , event: 1 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  event: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:40 [1;31m[E] [ModifyHouseEvent]  <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: 100000000 , event: 1 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  event: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [ModifyHouseEvent]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: 9 , event: 1 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  event: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [ModifyHouseEvent]  <Error> code: 1106, ( login user:9 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: 2 , event: 1 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  event: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     2.3ms] - [UPDATE `tbl_house_event` SET `desc` = ? WHERE `id` = ?] - `ÊµãËØï 1st ËÆ°Âàí`, `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: 6 , event: 1 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  event: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.6ms] - [UPDATE `tbl_house_event` SET `desc` = ? WHERE `id` = ?] - `ÊµãËØï 1st ËÆ°Âàí`, `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: 4 , event: 1 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  event: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:40 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.2ms] - [UPDATE `tbl_house_event` SET `desc` = ? WHERE `id` = ?] - `ÊµãËØï 1st ËÆ°Âàí`, `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  login user: 5 , event: 1 , desc: ÊµãËØï 1st ËÆ°Âàí [0m
2017/06/05 21:57:40 [1;34m[I] [getEvent]  event: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `house`, `sender`, `receiver`, `create_time`, `read_time`, `type`, `desc`, `close_time` FROM `tbl_house_event` WHERE `id` = ? ] - `1`
2017/06/05 21:57:40 [1;34m[D] [ModifyHouseEvent]  event: {Id:1 House:3 Sender:2 Receiver:6 CreateTime:2017-01-22 04:06:10 +0000 UTC ReadTime:0001-01-01 00:00:00 +0000 UTC Type:2 Desc:ÊµãËØï 1st ËÆ°Âàí CloseTime:0001-01-01 00:00:00 +0000 UTC Process:[]} [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     1.0ms] - [UPDATE `tbl_house_event` SET `desc` = ? WHERE `id` = ?] - `ÊµãËØï 1st ËÆ°Âàí`, `1`
--- PASS: Test_ModifyHouseEvent (0.03s)
	event_test.go:545: Test ModifyHouseEvent
	event_test.go:549: <Case 1> Invalid Arguments: desc not set
	event_test.go:556: <Case 2> Invalid Arguments: event < 0
	event_test.go:563: <Case 3> Invalid Arguments: event = 0
	event_test.go:570: <Case 4> Invalid Arguments: event does not exist
	event_test.go:577: <Case 5> Permission: user not login
	event_test.go:584: <Case 6> Permission: user is SYSTEM
	event_test.go:591: <Case 7> Permission: user does not exist
	event_test.go:598: <Case 8> Permission: user is not event sender, receiver and administraot
	event_test.go:605: <Case 9> Event Sender modify event
	event_test.go:612: <Case 10> Event Receiver modify event
	event_test.go:619: <Case 11> House agency modify event
	event_test.go:626: <Case 12> administrator agency modify event
=== RUN   Test_AddPicture
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: -1 , user: -1 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 100000000 , user: -1 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: -1 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1106, ( user:-1 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 100000000 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:40 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1106, ( user:100000000 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 9 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1106, ( user:9 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 6 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:40 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1106, ( user:6 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: -1 , desc:  , md5:  , pic file:  , base dir:  [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture base dir: )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: -1 , desc:  , md5:  , pic file:  , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture file name: )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: -1 , desc:  , md5:  , pic file: abc , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture file name:abc )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: -1 , desc:  , md5:  , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture desc: )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: -1 , desc: picture desc , md5:  , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picture md5: )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 0 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101, ( picType:0 )
 [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 99 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [checkPictureType]  Major: 0 , minor: 99 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101,  [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 100 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [checkPictureType]  Major: 100 , minor: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1001,  [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 300 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [checkPictureType]  Major: 300 , minor: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1001,  [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 301 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [checkPictureType]  Major: 300 , minor: 1 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1001,  [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 200 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [checkPictureType]  Major: 200 , minor: 0 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101,  [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 205 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [checkPictureType]  Major: 200 , minor: 5 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101,  [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 0 , user: 10 , picture type: 203 , desc: picture desc , md5: abcdefghijklmn , pic file: ab.c , base dir: ./pics/ [0m
2017/06/05 21:57:40 [1;34m[D] [checkPictureType]  Major: 200 , minor: 3 [0m
2017/06/05 21:57:40 [1;31m[E] [AddPicture]  <Error> code: 1101, ( house:0 for PIC_TYPE_HOUSE )
 [0m
2017/06/05 21:57:40 [1;34m[D] src: ./test.jpg , new file: ./test_1496671060558737650.jpg [0m
2017/06/05 21:57:40 [1;34m[D] [AddPicture]  house: 3 , user: 10 , picture type: 202 , desc: picture desc , md5: abcdefghijklmn , pic file: ./test_1496671060558737650.jpg , base dir: ./ [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:40 [1;34m[D] [checkPictureType]  Major: 200 , minor: 2 [0m
2017/06/05 21:57:40 [1;34m[D] [addPicHouse]  house: 3 , minor type: 2 , desc: picture desc , md5: abcdefghijklmn , pic file: ./test_1496671060558737650.jpg , base dir: ./ [0m
2017/06/05 21:57:40 [1;34m[D] [addPicHouse]  pic: ./test_1496671060558737650 , ext: .jpg [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /    db.Begin /     0.1ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.6ms] - [INSERT INTO `tbl_pictures` (`type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit`) VALUES (?, ?, ?, ?, ?, ?)] - `200`, `2`, `3`, `picture desc`, `abcdefghijklmn`, `2017-06-05 21:57:40.560426893 +0800 +0800`
2017/06/05 21:57:40 [1;34m[D] [addPicHouse]  new pic: 66 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.4ms] - [INSERT INTO `tbl_pic_set` (`pic_id`, `size`, `url`) VALUES (?, ?, ?)] - `66`, `1`, `./test_1496671060558737650.jpg`
2017/06/05 21:57:40 [1;34m[D] [loadImage]  image: ././test_1496671060558737650.jpg [0m
2017/06/05 21:57:40 [1;34m[D] [addPicHouse]  original pic: 1024 x 768 [0m
2017/06/05 21:57:40 [1;34m[D] [addPicHouse]  small pic: 400 x 400 [0m
2017/06/05 21:57:40 [1;34m[I] [resizeImage]  tip: ././test_1496671060558737650_s.jpg , tx: 400 , ty: 400 [0m
2017/06/05 21:57:40 [1;34m[D] [resizeImage]  dx: 1024 , dy: 768 [0m
2017/06/05 21:57:40 [1;34m[D] [resizeImage]  nx: 400 , ny: 300 [0m
[ORM]2017/06/05 21:57:40  -[Queries/default] - [  OK /     db.Exec /     0.4ms] - [INSERT INTO `tbl_pic_set` (`pic_id`, `size`, `url`) VALUES (?, ?, ?)] - `66`, `2`, `./test_1496671060558737650_s.jpg`
2017/06/05 21:57:40 [1;34m[D] [addPicHouse]  large size: 1200 x 1200 [0m
2017/06/05 21:57:40 [1;34m[D] [addPicHouse]  large size: 1024 x 768 [0m
2017/06/05 21:57:40 [1;34m[I] [resizeImage]  tip: ././test_1496671060558737650_l.jpg , tx: 1024 , ty: 768 [0m
2017/06/05 21:57:40 [1;34m[D] [resizeImage]  dx: 1024 , dy: 768 [0m
2017/06/05 21:57:40 [1;34m[D] [resizeImage]  nx: 1024 , ny: 768 [0m
2017/06/05 21:57:40 [1;33m[W] [watermarking]  this is just for testing by "go test" [0m
2017/06/05 21:57:40 [1;34m[D] [loadImage]  image: ../pics/watermark.png [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /     db.Exec /     0.3ms] - [INSERT INTO `tbl_pic_set` (`pic_id`, `size`, `url`) VALUES (?, ?, ?)] - `66`, `4`, `./test_1496671060558737650_l.jpg`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /   tx.Commit /     2.4ms] - [COMMIT]
2017/06/05 21:57:41 [1;34m[D] [DelImage]  image: 66 , login user: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `66`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:66 TypeMajor:200 TypeMinor:2 RefId:3 Desc:picture desc Md5:abcdefghijklmn Submit:2017-06-05 13:57:41 +0000 UTC} [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:41 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:41 [1;33m[W] [DelImage]  TODO: check if this picture has been used by some other object [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id`, T0.`pic_id`, T0.`size`, T0.`url` FROM `tbl_pic_set` T0 WHERE T0.`pic_id` = ? LIMIT 1000] - `66`
2017/06/05 21:57:41 [1;34m[D] [DelImage]  3 record in database [0m
2017/06/05 21:57:41 [1;34m[D] [DelImageFile]  image: ./test_1496671060558737650.jpg [0m
2017/06/05 21:57:41 [1;34m[D] [DelImageFile]  image: ./test_1496671060558737650_s.jpg [0m
2017/06/05 21:57:41 [1;34m[D] [DelImageFile]  image: ./test_1496671060558737650_l.jpg [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Begin /     0.0ms] - [START TRANSACTION]
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT T0.`id` FROM `tbl_pic_set` T0 WHERE T0.`pic_id` = ? ] - `66`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /     db.Exec /     0.4ms] - [DELETE FROM `tbl_pic_set` WHERE `id` IN (?, ?, ?)] - `83`, `84`, `85`
2017/06/05 21:57:41 [1;34m[D] [DelImage]  delete 3 records from picture set [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /     db.Exec /     0.2ms] - [DELETE FROM `tbl_pictures` WHERE `id` = ?] - `66`
2017/06/05 21:57:41 [1;34m[D] [DelImage]  delete 1 records from picture [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /   tx.Commit /     0.9ms] - [COMMIT]
2017/06/05 21:57:41 [1;33m[W] [Test_AddPicture] TODO: adding picture for other types [0m
--- PASS: Test_AddPicture (0.47s)
	pictures_test.go:17: Test AddPicture
	pictures_test.go:20: <Case 1> Invalid Argument: house < 0
	pictures_test.go:27: <Case 2> Invalid Argument: house does not exist
	pictures_test.go:34: <Case 3> Permission: user not login
	pictures_test.go:41: <Case 4> Permission: user does not exist
	pictures_test.go:48: <Case 5> Permission: user is a regular user
	pictures_test.go:55: <Case 6> Permission: user is an agency, but not for this house
	pictures_test.go:83: <Case 7> Invalid Argument: base dir not set
	pictures_test.go:90: <Case 8> Invalid Argument: picture file name not set
	pictures_test.go:92: picBaseDir: ./pics/
	pictures_test.go:99: <Case 9> Invalid Argument: picture file name do not include char '.'
	pictures_test.go:106: <Case 10> Invalid Argument: picture desc not set
	pictures_test.go:113: <Case 11> Invalid Argument: picture md5 not set
	pictures_test.go:124: <Case 12> Invalid Argument: <type> major: 0 , minor: 0
	pictures_test.go:132: <Case 13> Invalid Argument: <type> major: 99 , minor: 0
	pictures_test.go:140: <Case 14> Invalid Argument: <type> major: 100 , minor: 0
	pictures_test.go:148: <Case 15> Invalid Argument: <type> major: 300 , minor: 0
	pictures_test.go:156: <Case 16> Invalid Argument: <type> major: 301 , minor: 0
	pictures_test.go:165: <Case 17> Invalid Argument: <type> major: 200 , minor: 0
	pictures_test.go:174: <Case 18> Invalid Argument: <type> major: 200 , minor: 5
	pictures_test.go:181: <Case 19> Invalid Argument: PIC_TYPE_HOUSE but house is not set
	pictures_test.go:189: <Case 20> Add house picture
	pictures_test.go:197: new picture: ./test_1496671060558737650.jpg
	pictures_test.go:204: new picture: 66
	pictures_test.go:215: <Case 21> Clean test, remove picture just added
=== RUN   Test_DelImage
2017/06/05 21:57:41 [1;34m[D] [DelImage]  image: -1 , login user: -1 [0m
2017/06/05 21:57:41 [1;31m[E] [DelImage]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [DelImage]  image: -1 , login user: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `0`
2017/06/05 21:57:41 [1;31m[E] [DelImage]  <Error> code: 1102, ( uid:0 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [DelImage]  image: -1 , login user: 11 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
2017/06/05 21:57:41 [1;31m[E] [DelImage]  <Error> code: 1101, ( pic:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [DelImage]  image: 0 , login user: 11 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
2017/06/05 21:57:41 [1;31m[E] [DelImage]  <Error> code: 1101, ( pic:0 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [DelImage]  image: 100000000 , login user: 11 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:41 [1;31m[E] [DelImage]  <Error> code: 1101, ( pic:100000000 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [DelImage]  image: 38 , login user: 2 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `38`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:38 TypeMajor:200 TypeMinor:2 RefId:3 Desc:picture desc Md5: Submit:2017-05-08 13:07:08 +0000 UTC} [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [DelImage]  <Error> code: 1106, ( login user:2 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [DelImage]  image: 38 , login user: 6 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `38`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:38 TypeMajor:200 TypeMinor:2 RefId:3 Desc:picture desc Md5: Submit:2017-05-08 13:07:08 +0000 UTC} [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [DelImage]  <Error> code: 1106, ( login user:6 )
 [0m
2017/06/05 21:57:41 [1;33m[W] [Test_DelImage] TODO: add cases for other picture type [0m
--- PASS: Test_DelImage (0.01s)
	pictures_test.go:274: Test DelImage
	pictures_test.go:278: <Case 1> Permission: user not login
	pictures_test.go:285: <Case 2> Permission: user is system
	pictures_test.go:292: <Case 3> Invalid Argument: pic < 0
	pictures_test.go:299: <Case 4> Invalid Argument: pic = 0
	pictures_test.go:306: <Case 5> Invalid Argument: pic does not exist
	pictures_test.go:313: <Case 6> Permission: user is a regular user
	pictures_test.go:320: <Case 7> Permission: user is an agency, but not for this house
	pictures_test.go:325: Please ref to Test_AddPicture for actual picture deleting
=== RUN   Test_GetPicUrl
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: -1 , login user: -1 , size: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [GetPicUrl]  <Error> code: 1101, ( pic:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 0 , login user: -1 , size: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [GetPicUrl]  <Error> code: 1101, ( pic:0 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 100000000 , login user: -1 , size: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:41 [1;31m[E] [GetPicUrl]  <Error> code: 1101, ( pic:100000000 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 50 , login user: -1 , size: -1 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `50`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:50 TypeMajor:200 TypeMinor:3 RefId:3 Desc:gjsg Md5: Submit:2017-05-11 14:11:34 +0000 UTC} [0m
2017/06/05 21:57:41 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/06/05 21:57:41 [1;31m[E] [GetPicUrl]  <Error> code: 1101, ( size:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 50 , login user: -1 , size: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `50`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:50 TypeMajor:200 TypeMinor:3 RefId:3 Desc:gjsg Md5: Submit:2017-05-11 14:11:34 +0000 UTC} [0m
2017/06/05 21:57:41 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/06/05 21:57:41 [1;31m[E] [GetPicUrl]  <Error> code: 1101, ( size:5 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 50 , login user: -1 , size: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `50`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:50 TypeMajor:200 TypeMinor:3 RefId:3 Desc:gjsg Md5: Submit:2017-05-11 14:11:34 +0000 UTC} [0m
2017/06/05 21:57:41 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='50' [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='50']
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  numb: 3 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 1 201705/11221134007105.jpg} [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 2 201705/11221134007105_s.jpg} [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 4 201705/11221134007105_l.jpg} [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 39 , login user: -1 , size: 2 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `39`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:39 TypeMajor:200 TypeMinor:1 RefId:3 Desc:testgG Md5: Submit:2017-05-09 12:50:43 +0000 UTC} [0m
2017/06/05 21:57:41 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=2 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=2]
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  numb: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 2 201705/09205042333958_s.jpg} [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 39 , login user: -1 , size: 3 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `39`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:39 TypeMajor:200 TypeMinor:1 RefId:3 Desc:testgG Md5: Submit:2017-05-09 12:50:43 +0000 UTC} [0m
2017/06/05 21:57:41 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=3 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=3]
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  numb: 0 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 39 , login user: -1 , size: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `39`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:39 TypeMajor:200 TypeMinor:1 RefId:3 Desc:testgG Md5: Submit:2017-05-09 12:50:43 +0000 UTC} [0m
2017/06/05 21:57:41 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='39' AND size=4]
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  numb: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 4 201705/09205042333958_l.jpg} [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 61 , login user: -1 , size: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMinor:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
2017/06/05 21:57:41 [1;31m[E] [GetPicUrl]  <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 61 , login user: 100000000 , size: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMinor:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:41 [1;31m[E] [GetPicUrl]  <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 61 , login user: 9 , size: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMinor:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.6ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [GetPicUrl]  <Error> code: 1106, ( login user:9 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 61 , login user: 11 , size: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMinor:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `11`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=11]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [GetPicUrl]  <Error> code: 1106, ( login user:11 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 61 , login user: 4 , size: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMinor:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.6ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:41 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='61' [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='61']
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  numb: 3 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 1 201705/13151958199739.jpg} [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 2 201705/13151958199739_s.jpg} [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 4 201705/13151958199739_l.jpg} [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 33 , login user: 4 , size: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `33`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:33 TypeMajor:200 TypeMinor:2 RefId:4 Desc:ÂÆ¢ÂéÖ Md5: Submit:2017-02-12 02:07:21 +0000 UTC} [0m
2017/06/05 21:57:41 [1;33m[W] TODO: Check piture permission here by picture type [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='33' [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='33']
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  numb: 0 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  picture: 61 , login user: 5 , size: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `type_major`, `type_minor`, `ref_id`, `desc`, `md5`, `submit` FROM `tbl_pictures` WHERE `id` = ? ] - `61`
2017/06/05 21:57:41 [1;34m[D] [getPicture]  {Id:61 TypeMajor:200 TypeMinor:4 RefId:3 Desc:Êàø‰∫ßËØÅ Md5:4ab504fe0cfda5438847028af363e97f Submit:2017-05-13 07:19:59 +0000 UTC} [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  sql: SELECT size, url FROM tbl_pic_set WHERE pic_id='61' [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT size, url FROM tbl_pic_set WHERE pic_id='61']
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  numb: 3 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 1 201705/13151958199739.jpg} [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 2 201705/13151958199739_s.jpg} [0m
2017/06/05 21:57:41 [1;34m[D] [GetPicUrl]  v: {0 0 4 201705/13151958199739_l.jpg} [0m
--- PASS: Test_GetPicUrl (0.02s)
	pictures_test.go:337: Test GetPicUrl
	pictures_test.go:340: <Case 1> Invalid Argument: picture < 0
	pictures_test.go:347: <Case 2> Invalid Argument: picture = 0
	pictures_test.go:354: <Case 3> Invalid Argument: picture does not exist
	pictures_test.go:361: <Case 4> Invalid Argument: picture size < PIC_SIZE_ALL
	pictures_test.go:368: <Case 5> Invalid Argument: picture size > PIC_SIZE_LARGE
	pictures_test.go:375: <Case 6> Get urls of all size
	pictures_test.go:381: 
		small:	 201705/11221134007105_s.jpg 
		middle:	  
		large:	 201705/11221134007105_l.jpg
	pictures_test.go:384: <Case 7> Get url of small
	pictures_test.go:390: 
		small:	 201705/09205042333958_s.jpg 
		middle:	  
		large:	 
	pictures_test.go:397: <Case 8> Get url of middle
	pictures_test.go:403: 
		small:	  
		middle:	  
		large:	 
	pictures_test.go:410: <Case 9> Get url of large
	pictures_test.go:416: 
		small:	  
		middle:	  
		large:	 201705/09205042333958_l.jpg
	pictures_test.go:424: <Case 10> Permission: user not login
	pictures_test.go:431: <Case 11> Permission: user does not exist
	pictures_test.go:438: <Case 12> Permission: user is a regular user
	pictures_test.go:445: <Case 13> Permission: user is an agency, but not behalf this house
	pictures_test.go:452: <Case 14> Permission: user is an agency who stand for this house
	pictures_test.go:459: <Case 15> Permission: user is an landlord
	pictures_test.go:466: <Case 16> Permission: user is an administrator
	pictures_test.go:472: **** Check permission for other picture type ****
=== RUN   Test_GetHousePicList
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: -1 , login user: -1 , sub type: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [GetHousePicList]  <Error> code: 1101, ( hid:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 0 , login user: -1 , sub type: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [GetHousePicList]  <Error> code: 1101, ( hid:0 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 100000000 , login user: -1 , sub type: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:41 [1;31m[E] [GetHousePicList]  <Error> code: 1102, ( hid:100000000 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: -1 , sub type: -1 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;31m[E] [GetHousePicList]  <Error> code: 1101, ( subType:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: -1 , sub type: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;31m[E] [GetHousePicList]  <Error> code: 1101, ( subType:5 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: -1 , sub type: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc4201afef0 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc42035c960 Agency:0xc42035ca00 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: -1 , subType: 4 [0m
2017/06/05 21:57:41 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [] [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 100000000 , sub type: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420058aa0 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc42035caa0 Agency:0xc42035cb40 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 100000000 , subType: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:41 [1;31m[E] [isAdministrator]  err: <Error> code: 1102, ( uid:100000000 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [] [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 9 , sub type: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420058f00 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc42035cd20 Agency:0xc42035cdc0 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 9 , subType: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `9`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=9]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [] [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 6 , sub type: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420059180 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc42035d040 Agency:0xc42035d0e0 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 6 , subType: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=6]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [] [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 4 , sub type: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420059400 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc42035d360 Agency:0xc42035d400 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 4 , subType: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:41 [1;34m[D] [isAgency]  nCnt: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [4] [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_minor`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_minor` IN (?) AND T0.`ref_id` = ? ORDER BY T0.`type_minor` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `4`, `3`
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]   1 pictures [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 10 , sub type: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420059770 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc42035d680 Agency:0xc42035d720 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 10 , subType: 4 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [4] [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_minor`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_minor` IN (?) AND T0.`ref_id` = ? ORDER BY T0.`type_minor` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `4`, `3`
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]   1 pictures [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 5 , sub type: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420059ae0 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc42035d7c0 Agency:0xc42035d860 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 5 , subType: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.9ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [4] [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.7ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_minor`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_minor` IN (?) AND T0.`ref_id` = ? ORDER BY T0.`type_minor` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `4`, `3`
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]   1 pictures [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: -1 , sub type: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc420059e50 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc42035dae0 Agency:0xc42035db80 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: -1 , subType: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [1 2 3] [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     1.2ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_minor`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_minor` IN (?, ?, ?) AND T0.`ref_id` = ? ORDER BY T0.`type_minor` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `1`, `2`, `3`, `3`
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]   16 pictures [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 5 , sub type: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc4203be2d0 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc42035dc20 Agency:0xc42035dcc0 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 5 , subType: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [1 2 3 4] [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     1.0ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_minor`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_minor` IN (?, ?, ?, ?) AND T0.`ref_id` = ? ORDER BY T0.`type_minor` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `1`, `2`, `3`, `4`, `3`
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]   17 pictures [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 5 , sub type: 1 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.7ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc4203be5f0 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc4203d6000 Agency:0xc4203d60a0 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 5 , subType: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [1] [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_minor`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_minor` IN (?) AND T0.`ref_id` = ? ORDER BY T0.`type_minor` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `1`, `3`
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]   1 pictures [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 5 , sub type: 2 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc4203be910 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc4203d6140 Agency:0xc4203d61e0 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 5 , subType: 2 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [2] [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_minor`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_minor` IN (?) AND T0.`ref_id` = ? ORDER BY T0.`type_minor` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `2`, `3`
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]   3 pictures [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 5 , sub type: 3 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc4203bec30 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc4203d6280 Agency:0xc4203d6320 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 5 , subType: 3 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [3] [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_minor`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_minor` IN (?) AND T0.`ref_id` = ? ORDER BY T0.`type_minor` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `3`, `3`
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]   12 pictures [0m
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]  house: 3 , login user: 5 , sub type: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `building_no`, `floor_total`, `floor_this`, `house_no`, `bedrooms`, `livingrooms`, `bathrooms`, `acreage`, `cover_img`, `property_id`, `decoration`, `public`, `for_sale`, `for_rent`, `rent_stat`, `owner_id`, `agency_id`, `submit_time`, `publish_time`, `modify_time` FROM `tbl_house` WHERE `id` = ? ] - `3`
2017/06/05 21:57:41 [1;34m[I] [getHousePicSubtypes]  house: {Id:3 BuildingNo:177 FloorTotal:35 FloorThis:17 HouseNo:1505 Bedrooms:3 Livingrooms:2 Bathrooms:2 Acreage:13148 CoverImg:0 Property:0xc4203bef50 Decoration:0 Public:true ForSale:false ForRent:true RentStat:2 Owner:0xc4203d63c0 Agency:0xc4203d6460 SubmitTime:2017-01-26 04:31:55 +0000 UTC PublishTime:2017-04-12 16:00:00 +0000 UTC ModifyTime:0001-01-01 00:00:00 +0000 UTC} , login user: 5 , subType: 4 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=5]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [getHousePicSubtypes]  sub-type list: [4] [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.5ms] - [SELECT T0.`id`, T0.`type_major`, T0.`type_minor`, T0.`ref_id`, T0.`desc`, T0.`md5`, T0.`submit` FROM `tbl_pictures` T0 WHERE T0.`type_major` = ? AND T0.`type_minor` IN (?) AND T0.`ref_id` = ? ORDER BY T0.`type_minor` ASC, T0.`ref_id` ASC LIMIT 1000] - `200`, `4`, `3`
2017/06/05 21:57:41 [1;34m[D] [GetHousePicList]   1 pictures [0m
2017/06/05 21:57:41 [1;33m[W] TODO: Add code here to test other kind of house picture [0m
--- PASS: Test_GetHousePicList (0.03s)
	pictures_test.go:482: Test GetHousePicList
	pictures_test.go:486: <Case 1> Invalid Argument: house < 0
	pictures_test.go:493: <Case 2> Invalid Argument: house = 0
	pictures_test.go:500: <Case 3> Invalid Argument: house does not exist
	pictures_test.go:507: <Case 4> Invalid Argument: type < 0
	pictures_test.go:514: <Case 5> Invalid Argument: type > commdef.PIC_HOUSE_END
	pictures_test.go:521: <Case 6> Permission: user not login
	pictures_test.go:533: <Case 7> Permission: user does not exist
	pictures_test.go:545: <Case 8> Permission: user is a regular user
	pictures_test.go:557: <Case 9> Permission: user is an agency, but not behalf with this house
	pictures_test.go:569: <Case 10> Permission: user is an agency who behalf of this house
	pictures_test.go:581: <Case 11> Permission: user is landlord
	pictures_test.go:593: <Case 12> Permission: user is an administrator
	pictures_test.go:605: <Case 13> type = 0, user not login, pic count should be 16
	pictures_test.go:617: <Case 14> type = 0, administrator login, pic count should be 17
	pictures_test.go:629: <Case 15> type = PIC_HOUSE_FLOOR_PLAN, administrator login, pic count should be 1
	pictures_test.go:641: <Case 16> type = PIC_HOUSE_FURNITURE, administrator login, pic count should be 3
	pictures_test.go:653: <Case 17> type = PIC_HOUSE_APPLIANCE, administrator login, pic count should be 12
	pictures_test.go:665: <Case 18> type = PIC_HOUSE_OwnershipCert, administrator login, pic count should be 1
=== RUN   Test_GetPropertyList
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn:  , begin: -1 , fetch: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [GetPropertyList]  <Error> code: 1101, ( begin position:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn:  , begin: 0 , fetch: -1 [0m
2017/06/05 21:57:41 [1;31m[E] [GetPropertyList]  <Error> code: 1101, ( fetch number:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn:  , begin: 0 , fetch: 0 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: 0 pn="" true [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_property]
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn:  , begin: 0 , fetch: 14 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: 0 pn="" true [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_property]
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  sql: SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p LIMIT 0, 14 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p LIMIT 0, 14]
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  ps_tmp: [{1 ‰∏ñËåÇ.Ëù∂ÊπñÊπæ  } {2 ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† ÈïøÊ±üÂçóË∑Ø 666Âè∑ 1234} {3 ÈïøÊ±üËä±Âõ≠  } {4 Èï∑Ê±üËä±Âúí  } {5 1234 abcd abcd1234} {6 -  } {7 ÊòåÂª∫Âõ≠ Â∞±ÊòØ KÊ≠å} {8 _  } {9 %E9%95%BF%E6%B1%9F%E8%8A%B1%E5%9B%AD  } {10 6ZW35rGf6Iqx5ZyS
  } {11 Èï∑Ê±üËä±  } {12 Èï∑Ê±üËä±Âúí2 Áè†Ê±üÂçóË∑Ø ÊÄ°ÊôØÁÅ£} {13 Èï∑Ê±üËä±Âúí21 Áè†Ê±üÂçóË∑Ø ÊÄ°ÊôØÁÅ£} {14 ‰∏äÊµ∑ÂÖ¨È¶Ü Âïä Âêß}] [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  numb: 14 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn:  , begin: 14 , fetch: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: 0 pn="" true [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_property]
2017/06/05 21:57:41 [1;31m[E] [GetPropertyList]  <Error> code: 1101, ( begin(14) >= total(14) )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: ÈïøÊ±ü , begin: 0 , fetch: 0 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: 6 pn="" false [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%ÈïøÊ±ü%' [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%ÈïøÊ±ü%']
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: ÈïøÊ±ü , begin: 0 , fetch: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: 6 pn="" false [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%ÈïøÊ±ü%' [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%ÈïøÊ±ü%']
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  sql: SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p WHERE name LIKE '%ÈïøÊ±ü%' LIMIT 0, 1 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p WHERE name LIKE '%ÈïøÊ±ü%' LIMIT 0, 1]
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  ps_tmp: [{3 ÈïøÊ±üËä±Âõ≠  }] [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  numb: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: Ê±üËä± , begin: 0 , fetch: 0 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: 6 pn="" false [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%Ê±üËä±%' [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%Ê±üËä±%']
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: Ê±üËä± , begin: 0 , fetch: 5 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  pn: 6 pn="" false [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  sql_cnt: SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%Ê±üËä±%' [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_property WHERE name LIKE '%Ê±üËä±%']
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  sql: SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p WHERE name LIKE '%Ê±üËä±%' LIMIT 0, 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT id, name AS prop_name, address AS prop_address, p.desc AS prop_desc FROM tbl_property AS p WHERE name LIKE '%Ê±üËä±%' LIMIT 0, 5]
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  ps_tmp: [{3 ÈïøÊ±üËä±Âõ≠  } {4 Èï∑Ê±üËä±Âúí  } {11 Èï∑Ê±üËä±  } {12 Èï∑Ê±üËä±Âúí2 Áè†Ê±üÂçóË∑Ø ÊÄ°ÊôØÁÅ£} {13 Èï∑Ê±üËä±Âúí21 Áè†Ê±üÂçóË∑Ø ÊÄ°ÊôØÁÅ£}] [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyList]  numb: 5 [0m
--- PASS: Test_GetPropertyList (0.00s)
	property_test.go:15: Test GetPropertyList
	property_test.go:17: <Case> invalid arguments: begin < 0
	property_test.go:23: <Case> invalid arguments: toFetch < 0
	property_test.go:29: <Case> get max count of whole property list
	property_test.go:35: total: 14
	property_test.go:41: fetchCnt: 14
	property_test.go:43:  0 : {Id:1 PropName:‰∏ñËåÇ.Ëù∂ÊπñÊπæ PropAddress: PropDesc:}
	property_test.go:43:  1 : {Id:2 PropName:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† PropAddress:ÈïøÊ±üÂçóË∑Ø 666Âè∑ PropDesc:1234}
	property_test.go:43:  2 : {Id:3 PropName:ÈïøÊ±üËä±Âõ≠ PropAddress: PropDesc:}
	property_test.go:43:  3 : {Id:4 PropName:Èï∑Ê±üËä±Âúí PropAddress: PropDesc:}
	property_test.go:43:  4 : {Id:5 PropName:1234 PropAddress:abcd PropDesc:abcd1234}
	property_test.go:43:  5 : {Id:6 PropName:- PropAddress: PropDesc:}
	property_test.go:43:  6 : {Id:7 PropName:ÊòåÂª∫Âõ≠ PropAddress:Â∞±ÊòØ PropDesc:KÊ≠å}
	property_test.go:43:  7 : {Id:8 PropName:_ PropAddress: PropDesc:}
	property_test.go:43:  8 : {Id:9 PropName:%E9%95%BF%E6%B1%9F%E8%8A%B1%E5%9B%AD PropAddress: PropDesc:}
	property_test.go:43:  9 : {Id:10 PropName:6ZW35rGf6Iqx5ZyS
		 PropAddress: PropDesc:}
	property_test.go:43:  10 : {Id:11 PropName:Èï∑Ê±üËä± PropAddress: PropDesc:}
	property_test.go:43:  11 : {Id:12 PropName:Èï∑Ê±üËä±Âúí2 PropAddress:Áè†Ê±üÂçóË∑Ø PropDesc:ÊÄ°ÊôØÁÅ£}
	property_test.go:43:  12 : {Id:13 PropName:Èï∑Ê±üËä±Âúí21 PropAddress:Áè†Ê±üÂçóË∑Ø PropDesc:ÊÄ°ÊôØÁÅ£}
	property_test.go:43:  13 : {Id:14 PropName:‰∏äÊµ∑ÂÖ¨È¶Ü PropAddress:Âïä PropDesc:Âêß}
	property_test.go:46: <Case> invalid arguments: begin > total
	property_test.go:53: <Case> get count of property list with search key word: ÈïøÊ±ü
	property_test.go:59: total: 1
	property_test.go:65: fetchCnt: 1
	property_test.go:67:  0 : {Id:3 PropName:ÈïøÊ±üËä±Âõ≠ PropAddress: PropDesc:}
	property_test.go:71: <Case> get count of property list with search key word: Ê±üËä±
	property_test.go:77: total: 5
	property_test.go:83: fetchCnt: 5
	property_test.go:85:  0 : {Id:3 PropName:ÈïøÊ±üËä±Âõ≠ PropAddress: PropDesc:}
	property_test.go:85:  1 : {Id:4 PropName:Èï∑Ê±üËä±Âúí PropAddress: PropDesc:}
	property_test.go:85:  2 : {Id:11 PropName:Èï∑Ê±üËä± PropAddress: PropDesc:}
	property_test.go:85:  3 : {Id:12 PropName:Èï∑Ê±üËä±Âúí2 PropAddress:Áè†Ê±üÂçóË∑Ø PropDesc:ÊÄ°ÊôØÁÅ£}
	property_test.go:85:  4 : {Id:13 PropName:Èï∑Ê±üËä±Âúí21 PropAddress:Áè†Ê±üÂçóË∑Ø PropDesc:ÊÄ°ÊôØÁÅ£}
=== RUN   Test_GetPropertyInfo
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: -1 [0m
2017/06/05 21:57:41 [1;31m[E] [GetPropertyInfo]  <Error> code: 1101, ( property id:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 100000000 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `100000000`
2017/06/05 21:57:41 [1;31m[E] [GetPropertyInfo]  <Error> code: 1102, ( <QuerySeter> no row found )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 2 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `2`
--- PASS: Test_GetPropertyInfo (0.00s)
	property_test.go:94: Test GetPropertyInfo
	property_test.go:96: <Case> invalid arguments: pid <= 0
	property_test.go:102: <Case> invalid arguments: property doe's not exist
	property_test.go:108: <Case> get property by id
	property_test.go:114: property: {Id:2 PropName:ÈïøÈ°∫.Êª®Ê±üÁöáÂÜ† PropAddress:ÈïøÊ±üÂçóË∑Ø 666Âè∑ PropDesc:1234}
=== RUN   Test_ModifyProperty
2017/06/05 21:57:41 [1;34m[D] [ModifyProperty]  login user: -1 , property: 5 , name:  , addr:  , desc:  [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/06/05 21:57:41 [1;31m[E] [ModifyProperty]  <Error> code: 1101, ( property name: )
 [0m
2017/06/05 21:57:41 [1;34m[D] [ModifyProperty]  login user: -1 , property: 5 , name: 1 , addr:  , desc:  [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/06/05 21:57:41 [1;31m[E] [ModifyProperty]  <Error> code: 1101, ( address: )
 [0m
2017/06/05 21:57:41 [1;34m[D] [ModifyProperty]  login user: -1 , property: 5 , name: 1 , addr: 1 , desc:  [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/06/05 21:57:41 [1;31m[E] [ModifyProperty]  <Error> code: 1101, ( desc: )
 [0m
2017/06/05 21:57:41 [1;34m[D] [ModifyProperty]  login user: -1 , property: 5 , name: 1 , addr: 1 , desc: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/06/05 21:57:41 [1;31m[E] [isAgency]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:41 [1;31m[E] [isAdministrator]  err: <Error> code: 1104, ( uid:-1 )
 [0m
2017/06/05 21:57:41 [1;31m[E] [ModifyProperty]  <Error> code: 1106, ( uid:-1 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [ModifyProperty]  login user: 2 , property: 5 , name: 1 , addr: 1 , desc: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.3ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=2]
2017/06/05 21:57:41 [1;34m[D] [isAgency]  nCnt: 0 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `2`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=2]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 0 [0m
2017/06/05 21:57:41 [1;31m[E] [ModifyProperty]  <Error> code: 1106, ( uid:2 )
 [0m
2017/06/05 21:57:41 [1;34m[D] [ModifyProperty]  login user: 6 , property: 5 , name: Ëä± , addr: 1 , desc: 1 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:41 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%Ëä±%`
2017/06/05 21:57:41 [1;31m[E] [ModifyProperty]  <Error> code: 1105, ( property name:Ëä± )
 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/06/05 21:57:41 [1;34m[D] [ModifyProperty]  login user: 6 , property: 5 , name: test property , addr: test address , desc: test desc [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.1ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:41 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%test property%`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /     db.Exec /     2.0ms] - [UPDATE `tbl_property` SET `name` = ?, `address` = ?, `desc` = ? WHERE `id` = ?] - `test property`, `test address`, `test desc`, `5`
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/06/05 21:57:41 [1;34m[D] [ModifyProperty]  login user: 6 , property: 5 , name: 1234 , addr: abcd , desc: abcd1234 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.8ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `6`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.8ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=6]
2017/06/05 21:57:41 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     2.6ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%1234%`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /     db.Exec /     1.7ms] - [UPDATE `tbl_property` SET `name` = ?, `address` = ?, `desc` = ? WHERE `id` = ?] - `1234`, `abcd`, `abcd1234`, `5`
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.2ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/06/05 21:57:41 [1;34m[D] [ModifyProperty]  login user: 4 , property: 5 , name: test property , addr: test address , desc: test desc [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.1ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:41 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%test property%`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /     db.Exec /     3.2ms] - [UPDATE `tbl_property` SET `name` = ?, `address` = ?, `desc` = ? WHERE `id` = ?] - `test property`, `test address`, `test desc`, `5`
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     3.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
2017/06/05 21:57:41 [1;34m[D] [ModifyProperty]  login user: 4 , property: 5 , name: 1234 , addr: abcd , desc: abcd1234 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 5 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `5`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=false AND user_id=4]
2017/06/05 21:57:41 [1;34m[D] [isAgency]  nCnt: 1 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%1234%`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /     db.Exec /     2.3ms] - [UPDATE `tbl_property` SET `name` = ?, `address` = ?, `desc` = ? WHERE `id` = ?] - `1234`, `abcd`, `abcd1234`, `5`
--- PASS: Test_ModifyProperty (0.03s)
	property_test.go:122: Test ModifyProperty
	property_test.go:124: <Case> invalid arguments: name is empty
	property_test.go:130: <Case> invalid arguments: address is empty
	property_test.go:136: <Case> invalid arguments: desc is empty
	property_test.go:142: <Case> permission: user not login
	property_test.go:148: <Case> permission: regular user have no right to modify
	property_test.go:154: <Case> invalid arguments: property already exist
	property_test.go:160: <Case> update by agency
	property_test.go:167: old property:  {Id:5 PropName:1234 PropAddress:abcd PropDesc:abcd1234}
	property_test.go:177: property:  {Id:5 PropName:test property PropAddress:test address PropDesc:test desc}
	property_test.go:188: <Case> update by administrator
	property_test.go:195: old property:  {Id:5 PropName:1234 PropAddress:abcd PropDesc:abcd1234}
	property_test.go:202: property:  {Id:5 PropName:test property PropAddress:test address PropDesc:test desc}
=== RUN   Test_AddProperty
2017/06/05 21:57:41 [1;34m[D] [AddProperty]  prop:  , addr:  , desc:  [0m
2017/06/05 21:57:41 [1;31m[E] [AddProperty]  <Error> code: 1101, ( property name: )
 [0m
2017/06/05 21:57:41 [1;34m[D] [AddProperty]  prop: Ëä±Âõ≠ , addr:  , desc:  [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.5ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%Ëä±Âõ≠%`
2017/06/05 21:57:41 [1;31m[E] [AddProperty]  <Error> code: 1105, ( property name:Ëä±Âõ≠ )
 [0m
2017/06/05 21:57:41 [1;34m[D] [AddProperty]  prop: AddProperty , addr:  , desc:  [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT COUNT(*) FROM `tbl_property` T0 WHERE T0.`name` LIKE BINARY ? ] - `%AddProperty%`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /     db.Exec /     1.0ms] - [INSERT INTO `tbl_property` (`name`, `address`, `desc`) VALUES (?, ?, ?)] - `AddProperty`, ``, ``
2017/06/05 21:57:41 [1;33m[W] [AddProperty]  Notify administrator or agency to complete the new property information [0m
2017/06/05 21:57:41 [1;34m[D] [delProperty]  property: 19 , login user: 4 [0m
2017/06/05 21:57:41 [1;34m[D] [GetPropertyInfo]  pid: 19 [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.3ms] - [SELECT `id`, `name`, `address`, `desc` FROM `tbl_property` WHERE `id` = ? ] - `19`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK / db.QueryRow /     0.4ms] - [SELECT `id`, `login_name`, `name`, `salt`, `pass_login`, `pass_trasn`, `id_no`, `phone`, `head`, `enable`, `session` FROM `tbl_user` WHERE `id` = ? ] - `4`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.2ms] - [SELECT COUNT(*) FROM tbl_user_group AS g, tbl_user_group_member AS m WHERE m.group_id=g.id AND admin=true AND user_id=4]
2017/06/05 21:57:41 [1;34m[D] [isAdministrator]  nCnt: 1 [0m
2017/06/05 21:57:41 [1;33m[W] [delProperty]  checking property relation or just delete all of them along with property [0m
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /     db.Exec /     0.7ms] - [DELETE FROM `tbl_property` WHERE `id` = ?] - `19`
[ORM]2017/06/05 21:57:41  -[Queries/default] - [  OK /    db.Query /     0.4ms] - [SELECT T0.`id` FROM `tbl_house` T0 WHERE T0.`property_id` IN (?) ] - `19`
--- PASS: Test_AddProperty (0.01s)
	property_test.go:219: Test AddProperty
	property_test.go:221: <Case> invalid arguments: name is empty
	property_test.go:227: <Case> invalid arguments: property already exist
	property_test.go:233: <Case> add property
	property_test.go:239: new property: 19
FAIL
exit status 1
FAIL	ApiServer/models	1.413s
